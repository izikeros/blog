
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="HandheldFriendly" content="True"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"/>
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap"
              rel="stylesheet">

        <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/stylesheet/style.min.css">



        <link id="pygments-light-theme" rel="stylesheet" type="text/css"
              href="https://www.safjan.com/theme/pygments/github.min.css">



    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/fontawesome.css">
    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/brands.css">
    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/solid.css">

        <link rel="stylesheet" type="text/css"
              href="https://www.safjan.com/styles/custom.css">

        <link href="https://www.safjan.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Krystian Safjan's Blog Atom">

        <link href="https://www.safjan.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
              title="Krystian Safjan's Blog RSS">


<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-117080232-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-117080232-1');
</script>
<!-- End of Google tag (gtag.js) -->



    <meta name="author" content="Krystian Safjan"/>
    <meta name="description" content="Machine learning (ML) models are becoming increasingly popular in various industries, and as a result, the need to distribute and deploy these models in a secure, portable, and efficient manner has become crucial. One way to accomplish this is by creating command …"/>
    <meta name="keywords" content="machine-learning, packaging, deployment, model-delivery, cli, commandline">
    <meta expr:content="2023-01-17 00:00:00+01:00" itemprop='datePublished'/>
    <meta expr:content="2023-01-17 00:00:00+01:00" itemprop='dateModified'/>
    <meta property="article:modified_time" content="2023-01-17 00:00:00+01:00"/>
    <meta property="article:published_time" content="2023-01-17 00:00:00+01:00"/>
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Creating Command Line Tools from Machine Learning Models",
  "datePublished": "2023-01-17 00:00:00+01:00",
  "dateModified": "2023-01-17 00:00:00+01:00"
}



    </script>



  <meta property="og:site_name" content="Krystian Safjan's Blog"/>
  <meta property="og:title" content="Creating Command Line Tools from Machine Learning Models"/>
  <meta property="og:description" content="Machine learning (ML) models are becoming increasingly popular in various industries, and as a result, the need to distribute and deploy these models in a secure, portable, and efficient manner has become crucial. One way to accomplish this is by creating command …"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="https://www.safjan.com/creating-command-line-tools-from-machine-learning-models/"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2023-01-17 00:00:00+01:00"/>
  <meta property="article:modified_time" content="2023-01-17 00:00:00+01:00"/>
  <meta property="article:author" content="https://www.safjan.com/author/krystian-safjan/">
  <meta property="article:section" content="note"/>
  <meta property="article:tag" content="machine-learning"/>
  <meta property="article:tag" content="packaging"/>
  <meta property="article:tag" content="deployment"/>
  <meta property="article:tag" content="model-delivery"/>
  <meta property="article:tag" content="cli"/>
  <meta property="article:tag" content="commandline"/>
  <meta property="og:image" content="/images/profile_new.jpg">

    <meta name="twitter:card" content="summary"/>
    <meta property="twitter:image" content="/images/profile_new.jpg">

    <meta name="twitter:label1" content="Est. reading time"/>
    <meta name="twitter:data1" content="4 min."/>
    <meta name="twitter:site" content="@izikeros"/>
    <meta name="twitter:description" content=""/>
    <meta name="twitter:title" content="Creating Command Line Tools from Machine Learning Models"/>


    <title>    Creating Command Line Tools from Machine Learning Models
</title>


<!-- Google Automatic Ads -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9767732578835199"
     crossorigin="anonymous"></script>
<!-- End of Google Automatic Ads -->


</head>
<body class="light-theme">
<aside>
    <div>
        <a href="https://www.safjan.com/">
                <img src="/images/profile_new.jpg" alt="Krystian Safjan's Blog" title="Krystian Safjan's Blog" width="140" height="140">
        </a>

        <h1>
            <a href="https://www.safjan.com/">Krystian Safjan's Blog</a>
        </h1>

<p>Data Scientist | Researcher | Team Leader<br><br> working at Ernst &amp; Young and writing about <a href="/category/machine-learning.html">Data Science and Visualization</a>, on <a href="/category/machine-learning.html">Machine Learning, Deep Learning</a> and <a href="/tag/nlp/">NLP</a>. There are also some  <a href="/category/howto.html">howto</a> posts on tools and workflows.</p>




        <ul class="social">
                <li>
                    <a  class="sc-linkedin" href="https://pl.linkedin.com/in/krystiansafjan"
                       target="_blank">
                        <i class="fab fa-linkedin"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-github" href="https://github.com/izikeros"
                       target="_blank">
                        <i class="fab fa-github"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-envelope" href="mailto:ksafjan@gmail.com"
                       target="_blank">
                        <i class="fas fa-envelope"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-graduation-cap" href="https://scholar.google.pl/citations?user=UlNJgMoAAAAJ"
                       target="_blank">
                        <i class="fas fa-graduation-cap"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-rss" href="/feeds/all.rss.xml"
                       target="_blank">
                        <i class="fas fa-rss"></i>
                    </a>
                </li>
        </ul>
    </div>

<style>
    .button {
        background-color: yellow;
        color: black;
        border: none;
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
        border-radius: 20px;
    }

    .center {
        text-align: center;
    }

    .container {
        display: grid;
        grid-template-columns: 1fr 1fr;
    }

    .left-col {
    }

    .right-col {
    }

    .image {
        border-radius: 0;
        width: 100%;
    }

    .book-list {
        padding-top:0;
        padding-bottom: 0;
        text-align:left;
        box-sizing: border-box;
        display: block;
        list-style-image: url(/images/shortcode-tick.webp);
        margin-block-start: 1em;
        margin-block-end: 1em;
        margin-inline-start:0;
        margin-inline-end:0;
        padding-inline-start:40px;
    }

    .book-list li {
        font-weight: bold;
    }

    @media (max-width: 600px) {
        .container {
            grid-template-columns: 1fr;
        }
    }

</style>
<div class="container">
    <div class="left-col">
        <a href="https://gumroad.com/">
            <img src="/images/mlop_interview_book_cover_3D_300px.jpg" class="image" alt="Interview Book Cover">
        </a>

        <div class="center">
            <a href="https://gumroad.com/">
                <button class="button">Get for $0.99</button>
            </a>
        </div>
    </div>
    <div class="right-col">
        <div>
            <ul class="book-list">
                <li>PDF, ePUB, mobi format ebook, no DRM</li>
                <li>50 questions and answers</li>
                <li>Stories from real projects</li>
                <li>100 multiple choice quizz questions</li>
                <li>178 pages</li>
            </ul>
        </div>
    </div>
</div>
</aside>
<main>

        <nav>
            <a href="https://www.safjan.com/">Home</a>

                <a href="/archives.html">Articles</a>
                <a href="/til.html">Notes</a>
                <a href="/categories.html">Categories</a>
                <a href="/tags.html">Tags</a>
                <a href="/pdfs/Krystian_Safjan_resume_priv.pdf">Resume</a>

                <a href="https://www.safjan.com/feeds/all.atom.xml">Atom</a>

                <a href="https://www.safjan.com/feeds/all.rss.xml">RSS</a>
        </nav>

    <article class="single">
        <header>
                
            <p>
                <!-- Posted on: -->
                2023-01-17 



                    <span id="post-share-links">
    &nbsp;&nbsp;&nbsp;Share on:
    <a href="https://twitter.com/intent/tweet?text=Creating%20Command%20Line%20Tools%20from%20Machine%20Learning%20Models&url=https%3A//www.safjan.com/creating-command-line-tools-from-machine-learning-models/&hashtags=machine-learning,packaging,deployment,model-delivery,cli,commandline" target="_blank" title="Share on Twitter">Twitter</a>
    |
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//www.safjan.com/creating-command-line-tools-from-machine-learning-models/" target="_blank" title="Share on Facebook">Facebook</a>
    |
    <a href="https://news.ycombinator.com/submitlink?t=Creating%20Command%20Line%20Tools%20from%20Machine%20Learning%20Models&u=https%3A//www.safjan.com/creating-command-line-tools-from-machine-learning-models/" target="_blank" title="Share on HackerNews">HackerNews</a>
    |
    <a href="https://www.reddit.com/submit?url=https%3A//www.safjan.com/creating-command-line-tools-from-machine-learning-models/&title=Creating%20Command%20Line%20Tools%20from%20Machine%20Learning%20Models" target="_blank" title="Share via Reddit">Reddit</a>
  </span>
                <br/>
            </p>
            <h1 id="creating-command-line-tools-from-machine-learning-models">Creating Command Line Tools from Machine Learning Models</h1>
            <div class="header-underline"></div>



        </header>


        <div>
            <p>Machine learning (ML) models are becoming increasingly popular in various industries, and as a result, the need to distribute and deploy these models in a secure, portable, and efficient manner has become crucial. One way to accomplish this is by creating command line tools from ML models. Command line tools are easy to use, efficient and can be integrated with other tools and workflows.</p>
<h2>Overview</h2>
<p>This article will cover the following topics:</p>
<!-- MarkdownTOC autolink="true" autoanchor="true" -->

<ul>
<li><a href="#why-use-command-line-tools-for-ml-models">Why use command line tools for ML models</a></li>
<li><a href="#creating-a-command-line-tool-using-argparse">Creating a command line tool using argparse</a></li>
<li><a href="#integrating-the-model-into-the-command-line-tool">Integrating the model into the command line tool</a></li>
<li><a href="#packaging-the-command-line-tool-as-a-python-pex-file">Packaging the command line tool as a Python PEX file</a></li>
<li><a href="#examples-of-command-line-tools-for-ml-models">Examples of command line tools for ML models</a></li>
</ul>
<!-- /MarkdownTOC -->

<p><a id="why-use-command-line-tools-for-ml-models"></a></p>
<h2>Why use command line tools for ML models</h2>
<p>Command line tools are a simple and efficient way to interact with an ML model. They can be easily integrated into existing systems and workflows, and can be run on a variety of platforms, including Windows, Linux, and Mac. Additionally, command line tools are easy to use and can be invoked from the command line, making them accessible to non-technical users.</p>
<p><a id="creating-a-command-line-tool-using-argparse"></a></p>
<h2>Creating a command line tool using argparse</h2>
<p><a href="https://docs.python.org/3/library/argparse.html">argparse</a> is a built-in Python library that makes it easy to create command line tools. It allows you to define the arguments that the tool takes and provides a simple interface for parsing those arguments.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">argparse</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Process some integers.&#39;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;integers&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;N&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s1">&#39;an integer for the accumulator&#39;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--sum&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;accumulate&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_const&#39;</span><span class="p">,</span>
                    <span class="n">const</span><span class="o">=</span><span class="nb">sum</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="nb">max</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s1">&#39;sum the integers (default: find the max)&#39;</span><span class="p">)</span>

<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">accumulate</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">integers</span><span class="p">))</span>
</code></pre></div>

<p>This example creates a command line tool that takes a list of integers and an optional "--sum" flag. If the "--sum" flag is provided, the tool will sum the integers, otherwise, it will find the max.</p>
<p><a id="integrating-the-model-into-the-command-line-tool"></a></p>
<h2>Integrating the model into the command line tool</h2>
<p>Once you have created the command line interface using argparse, the next step is to integrate the ML model into the tool. This can be done by importing the model and using it to process the input arguments.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">mymodel</span>

<span class="k">def</span> <span class="nf">process_input</span><span class="p">(</span><span class="n">inputs</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">mymodel</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="n">process_input</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">inputs</span><span class="p">)</span>
</code></pre></div>

<p>In this example, the <code>mymodel</code> module is imported and its <code>predict</code> function is used to process the inputs passed in through the command line</p>
<p><a id="packaging-the-command-line-tool-as-a-python-pex-file"></a></p>
<h2>Packaging the command line tool as a Python PEX file</h2>
<p>Once you have created the command line tool and integrated the ML model, the next step is to package it as a Python PEX (Python executable) file. This can be done using the <a href="https://pex.readthedocs.io/en/stable/">pex</a> library. PEX files are self-contained and do not require a specific environment or dependencies to be installed on the machine, making it easy to distribute and run the tool on different systems. Additionally, PEX files can be optimized for performance and can be signed, which allows users to verify the authenticity of the file.</p>
<p>To create a PEX file, you first need to install the pex library:</p>
<p><code>pip install pex</code></p>
<p>Then, you can use the following command to create a PEX file for your command line tool:</p>
<p><code>pex . -o mytool.pex</code></p>
<p>This will create a PEX file called "mytool.pex" in the current directory, which can be distributed and run on any system with Python installed.</p>
<p><a id="examples-of-command-line-tools-for-ml-models"></a></p>
<h2>Examples of command line tools for ML models</h2>
<p>Here are a few examples of command line tools for ML models:</p>
<ol>
<li>
<p><a href="https://www.tensorflow.org/tfx/serving">TensorFlow Serving</a>: TensorFlow Serving is a flexible, high-performance serving system for machine learning models, designed for production environments. It allows you to easily deploy new versions of your model and roll back to previous versions if needed.</p>
</li>
<li>
<p><a href="https://github.com/jasonbaldridge/keras-cli">Keras-CLI</a>: Keras-CLI is a command line interface for Keras, a popular deep learning framework. It allows you to easily train and evaluate models, and also provides a simple interface for making predictions.</p>
</li>
<li>
<p><a href="https://github.com/sloria/sklearn-cli">Scikit-learn Command Line Interface</a>: sklearn-cli is a command line interface for scikit-learn, a popular machine learning library. It allows you to easily train and evaluate models, and also provides a simple interface for making predictions.</p>
</li>
</ol>
<p>In conclusion, creating command line tools from ML models is a simple and efficient way to distribute and deploy models. By using <code>argparse</code> and <code>pex</code> libraries, it is easy to create a command line interface and package it in a portable and efficient way. These tools can be integrated into existing systems and workflows, and can be run on a variety of platforms.</p>
<p>up::[[MOC_AI]]
[[model_documentation]]</p>
        </div>


        <div class="tag-cloud">
            <p>
                    <br/><br/>Tags:&nbsp;
                        <a href="https://www.safjan.com/tag/machine-learning/">machine-learning</a>
                        <a href="https://www.safjan.com/tag/packaging/">packaging</a>
                        <a href="https://www.safjan.com/tag/deployment/">deployment</a>
                        <a href="https://www.safjan.com/tag/model-delivery/">model-delivery</a>
                        <a href="https://www.safjan.com/tag/cli/">cli</a>
                        <a href="https://www.safjan.com/tag/commandline/">commandline</a>
            </p>
        </div>


  <div class="neighbors">
    <a class="btn float-left" href="https://www.safjan.com/pieces-of-popular mlops-advice-to-ignore-what-to-do-instead/" title="3 Pieces of Popular MLOps Advice to Ignore — and What to Do Instead">
      <i class="fa fa-angle-left"></i> Previous Post
    </a>
    <a class="btn float-right" href="https://www.safjan.com/How-to-use-Polish-wordnet-in-python/" title="How to use the Polish WordNet in Python?">
      Next Post <i class="fa fa-angle-right"></i>
    </a>
  </div>

            <div class="related-posts">
                <h4>You might enjoy</h4>
                <ul class="related-posts">
                        <li><a href="https://www.safjan.com/blue-green-deployment-in-mlops/">Maximizing Efficiency in MLOps: How Blue/Green Deployment Can Help?</a></li>
                        <li><a href="https://www.safjan.com/contextual_understanding-speech-to-text/">Contextual Understanding in Automated Speech-to-Text Transcription: Machine Learning Techniques and Challenges</a></li>
                        <li><a href="https://www.safjan.com/best-alternatives-to-jupyter-notebooks/">Best Alternatives to Jupyter Notebooks</a></li>
                        <li><a href="https://www.safjan.com/how-to-save-numpy-array-to-file/">How to save numpy array to file?</a></li>
                        <li><a href="https://www.safjan.com/illusion-of-expertise/">Rethinking the Link Between Speech and Expertise</a></li>
                </ul>
            </div>


    </article>

    <footer>
<p>
  &copy; 2023 Krystian Safjan - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/deed.en_US" target="_blank">Creative Commons Attribution-ShareAlike</a>
</p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
</main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Krystian Safjan's Blog ",
  "url" : "https://www.safjan.com",
  "image": "/images/profile_new.jpg",
  "description": ""
}
</script>

</body>
</html>