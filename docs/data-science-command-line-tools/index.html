
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="color-scheme" content="light dark"/>
    <script>
      (function() {
        var theme = localStorage.getItem('theme-preference');
        if (theme === 'dark' || theme === 'light') {
          document.documentElement.setAttribute('data-theme', theme);
        }
      })();
    </script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="HandheldFriendly" content="True"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"/>
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap"
              rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/stylesheet/style.css">


    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/pygments/github.min.css">


    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/fontawesome.css">
    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/brands.css">
    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/solid.css">

    <link rel="stylesheet" href="https://www.safjan.com/pagefind/pagefind-ui.css">

        <link rel="stylesheet" type="text/css"
              href="https://www.safjan.com/styles/custom.css">

        <link href="https://www.safjan.com/feeds/all.atom.xml?utm_source=rss&utm_medium=feed&utm_campaign=rss-feed" type="application/atom+xml" rel="alternate"
              title="Krystian Safjan's Blog Atom">

        <link href="https://www.safjan.com/feeds/all.rss.xml?utm_source=rss&utm_medium=feed&utm_campaign=rss-feed" type="application/rss+xml" rel="alternate"
              title="Krystian Safjan's Blog RSS">


    <link rel="apple-touch-icon" sizes="180x180" href="https://www.safjan.com/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://www.safjan.com/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://www.safjan.com/favicon-16x16.png">
    <link rel="shortcut icon" href="https://www.safjan.com/favicon.ico">
    <link rel="manifest" href="https://www.safjan.com/site.webmanifest">
    <meta name="theme-color" content="#333333">
    <meta name="apple-mobile-web-app-title" content="Krystian Safjan's Blog">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RM2PKDCCYM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RM2PKDCCYM');
</script>
<!-- End of Google tag (gtag.js) -->



    <meta name="author" content="Krystian Safjan"/>
    <meta name="description" content="Description of GNU utils and other less standard tools that helps with processing data from CLI or with shell scripts."/>
    <meta name="keywords" content="machine-learning, Linux">


  <meta property="og:site_name" content="Krystian Safjan's Blog"/>
  <meta property="og:title" content="Data Science Command-Line Tools"/>
  <meta property="og:description" content="Description of GNU utils and other less standard tools that helps with processing data from CLI or with shell scripts."/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="https://www.safjan.com/data-science-command-line-tools/"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2019-08-23 00:00:00+02:00"/>
  <meta property="article:modified_time" content="2023-07-12 00:00:00+02:00"/>
  <meta property="article:author" content="https://www.safjan.com/author/krystian-safjan/"/>
  <meta property="article:section" content="Linux"/>
  <meta property="article:tag" content="machine-learning"/>
  <meta property="article:tag" content="Linux"/>
  <meta property="og:image" content="https://www.safjan.com//images/head/cli_tools.jpg"/>
  <meta property="og:image:width" content="1200"/>
  <meta property="og:image:height" content="630"/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image" content="https://www.safjan.com//images/head/cli_tools.jpg"/>
    <meta name="twitter:image:alt" content="Data Science Command-Line Tools"/>


    <meta name="twitter:site" content="@izikeros"/>
    <meta name="twitter:creator" content="@izikeros"/>
    <meta name="twitter:title" content="Data Science Command-Line Tools"/>
    <meta name="twitter:description" content="Description of GNU utils and other less standard tools that helps with processing data from CLI or with shell scripts."/>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.safjan.com/data-science-command-line-tools/"
  },
  "headline": "Data Science Command-Line Tools",
  "datePublished": "2019-08-23T00:00:00+02:00",
  "dateModified": "2023-07-12T00:00:00+02:00",
  "author": {
    "@type": "Person",
    "name": "Krystian Safjan",
    "url": "https://www.safjan.com/author/krystian-safjan/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Krystian Safjan's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "/images/profile_new.jpg"
    }  },
"image": "https://www.safjan.com//images/head/cli_tools.jpg",  "url": "https://www.safjan.com/data-science-command-line-tools/",
  "description": "Description of GNU utils and other less standard tools that helps with processing data from CLI or with shell scripts.",
  "articleSection": "Linux",
  "inLanguage": "en",
  "keywords": "machine-learning, Linux",
  "wordCount": 1068,
  "speakable": {
    "@type": "SpeakableSpecification",
    "cssSelector": ["article h1", ".summary", ".tldr", "article \u003e p:first-of-type"]
  }}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://www.safjan.com/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Linux",
      "item": "https://www.safjan.com/category/linux.html"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Data Science Command-Line Tools"
    }
  ]
}
</script>



<meta name="ai:summary" content="Description of GNU utils and other less standard tools that helps with processing data from CLI or with shell scripts.">

<meta name="ai:topics" content="machine-learning, Linux">



<meta name="ai:word-count" content="1068">
<meta name="ai:reading-time" content="5 min">

<meta name="ai:section" content="Linux">



<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">

    <title>    Data Science Command-Line Tools
</title>



<!-- Google Automatic Ads -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9767732578835199"
     crossorigin="anonymous"></script>
<!-- End of Google Automatic Ads -->


</head>
<body>
<div id="reading-progress" class="reading-progress"></div>
<aside>
    <div>
        <a href="https://www.safjan.com/">
                <img src="/images/profile_new.jpg" alt="Krystian Safjan's Blog" title="Krystian Safjan's Blog" width="140" height="140">
        </a>

        <h1>
            <a href="https://www.safjan.com/">Krystian Safjan's Blog</a>
        </h1>

<p>Data Scientist and Team Leader writing about Machine Learning, MLOps, and Python</p>


        <ul class="social">
                <li>
                    <a  class="sc-linkedin" href="https://pl.linkedin.com/in/krystiansafjan"
                       target="_blank">
                        <i class="fab fa-linkedin"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-github" href="https://github.com/izikeros"
                       target="_blank">
                        <i class="fab fa-github"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-envelope" href="mailto:ksafjan@gmail.com"
                       target="_blank">
                        <i class="fas fa-envelope"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-graduation-cap" href="https://scholar.google.pl/citations?user=UlNJgMoAAAAJ"
                       target="_blank">
                        <i class="fas fa-graduation-cap"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-rss" href="/feeds/all.rss.xml"
                       target="_blank">
                        <i class="fas fa-rss"></i>
                    </a>
                </li>
        </ul>
    </div>

<div class="promo-box">
    <a href="https://ksafjanuser.gumroad.com/l/mlops" class="promo-box-image">
        <img src="/images/mlop_interview_book_cover_3D_300px.jpg" alt="MLOps Interview Book Cover">
    </a>
    
    <p class="promo-box-headline">Ace Your MLOps Interview</p>
    
    <a href="https://ksafjanuser.gumroad.com/l/mlops" class="promo-box-cta">
        Get for $2.99
    </a>
    
    <p class="promo-box-features">50 Q&A • PDF/ePUB/mobi</p>
</div>
</aside>
<main>

        <nav aria-label="Main navigation">
            <a href="https://www.safjan.com/">Home</a>

                <a href="/archives.html">Articles</a>
                <a href="/til.html">Notes</a>
                <a href="/categories.html">Categories</a>
                <a href="/pdfs/Krystian_Safjan_resume_priv.pdf">Resume</a>

                <a href="https://www.safjan.com/feeds/all.atom.xml">Atom</a>

                <a href="https://www.safjan.com/feeds/all.rss.xml">RSS</a>

            <div id="search" class="nav-search"></div>
            <button type="button" id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
                <i class="fas fa-sun"></i>
                <i class="fas fa-moon"></i>
            </button>
        </nav>

    <article class="single">
        <header>
                
            <p>
                <!-- Posted on: -->
                2019-08-23 


                <br/>
            </p>
            <h1>Data Science Command-Line Tools</h1>
            <div class="header-underline"></div>
                <div class="summary"><p>Description of GNU utils and other less standard tools that helps with processing data from CLI or with shell scripts.</p></div>

                <div style="width: 100%; padding-bottom: 30px; position: relative;">
                    <a href="https://www.safjan.com/data-science-command-line-tools/">
                        <img style="width: 100%; "
                             src="/images/head/cli_tools.jpg" alt="Data Science Command-Line Tools">
                    </a>
                </div>


        </header>




        <div class="article-content">
            <p>There are plenty of tools designed to ease the life of a Data Scientist. In this group, the special place has tools that are used from the command line. They are special because are available for most operating systems and are designed with Unix philosophy in mind: they do one thing extremely well, they can be chained creating convenient workflows.</p>
<p><img alt="Diagram of cli tools for data science" src="/images/cli_tools_1/cli_tools.png"></p>
<h2 id="textutils-from-gnu-coreutils">Textutils from GNU Coreutils</h2>
<p>From my experience, I have benefited most from mastering the GNU Coreutils. This is the collection of shellutils, fileutils, and textutils - and in this post, I will be discussing the latter.</p>
<p><em>Table 1. Textutils - text processing tools, part of GNU Coreutils</em></p>
<table>
<thead>
<tr>
<th style="text-align: left;">command</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>cat</strong></td>
<td>merge, print files to standard output</td>
</tr>
<tr>
<td style="text-align: left;"><a href="#comm"><strong>comm</strong></a></td>
<td>compare sorted files line by line; can find differences, unique lines for each compared files</td>
</tr>
<tr>
<td style="text-align: left;"><strong>csplit</strong></td>
<td>divide files into parts using context</td>
</tr>
<tr>
<td style="text-align: left;"><strong>cut</strong></td>
<td>remove sections from each line in the file</td>
</tr>
<tr>
<td style="text-align: left;"><strong>expand/unexpand</strong></td>
<td>convert tab into spaces / convert spaces to tabs</td>
</tr>
<tr>
<td style="text-align: left;"><strong>fmt</strong></td>
<td>simple text formatter</td>
</tr>
<tr>
<td style="text-align: left;"><strong>fold</strong></td>
<td>fold each input line to fit the given line length</td>
</tr>
<tr>
<td style="text-align: left;"><strong><a href="#head">head</a>/<a href="#tail">tail</a>/<a href="#shuf">shuf</a></strong></td>
<td>display starting lines of file / display file ending lines/get random lines from file</td>
</tr>
<tr>
<td style="text-align: left;"><strong>join</strong></td>
<td>join lines from two files on common fields</td>
</tr>
<tr>
<td style="text-align: left;"><strong>nl</strong></td>
<td>line numbering</td>
</tr>
<tr>
<td style="text-align: left;"><strong>paste</strong></td>
<td>merge lines</td>
</tr>
<tr>
<td style="text-align: left;"><a href="#sort"><strong>sort</strong></a></td>
<td>sort lines of the text file</td>
</tr>
<tr>
<td style="text-align: left;"><strong><a href="split">split</a></strong></td>
<td>divide file into parts</td>
</tr>
<tr>
<td style="text-align: left;"><strong>tac</strong></td>
<td>merge, print in reverse order lines of files to standard output</td>
</tr>
<tr>
<td style="text-align: left;"><strong>tr</strong></td>
<td>translate or remove characters</td>
</tr>
<tr>
<td style="text-align: left;"><strong><a href="#uniq">uniq</a></strong></td>
<td>remove duplicated lines from the file</td>
</tr>
<tr>
<td style="text-align: left;"><strong><a href="#wc">wc</a></strong></td>
<td>display the number of characters, words, and lines of the given file</td>
</tr>
</tbody>
</table>
<p>I will give a few examples of commands I use most often or ones that are exceptionally useful.</p>
<h3 id="comm">comm</h3>
<p>The <code>comm</code> command is very handy when comes to comparing lists stored in separate files. For example, you have a list of samples used for experiment  in one file and a list of samples used in experiment  in another file.
The <code>comm</code> command takes sorted files as input and calculates unique lines for FILE1 and for FILE2 and the result is represented respectively as <code>column 1</code> and <code>column 2</code>. Having unique lines in column 1 and 2, the set of lines that appear in both files is calculated and the result is represented by column 3.</p>
<p>Columns description for <code>comm</code>:</p>
<table>
<thead>
<tr>
<th>1</th>
<th>2</th>
<th>3</th>
</tr>
</thead>
<tbody>
<tr>
<td>lines unique to FILE1</td>
<td>lines unique to FILE1</td>
<td>lines that appear in both files</td>
</tr>
</tbody>
</table>
<p>Having three columns calculated we can now suppress lines that appear in the given column in order to get lines that fulfill the desired condition.</p>
<p>Meaning of the numbers used as <code>comm</code> parameters:</p>
<ul>
<li><code>-1</code>     suppress column 1 (lines unique to FILE1)</li>
<li><code>-2</code>     suppress column 2 (lines unique to FILE2)</li>
<li><code>-3</code>     suppress column 3 (lines that appear in both files)</li>
</ul>
<p>See below three typical usages of <code>comm</code>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># find lines only in file1</span>
comm<span class="w"> </span>-23<span class="w"> </span>file1<span class="w"> </span>file2

<span class="c1"># find lines only in file2</span>
comm<span class="w"> </span>-13<span class="w"> </span>file1<span class="w"> </span>file2

<span class="c1"># find lines common to both files</span>
comm<span class="w"> </span>-12<span class="w"> </span>file1<span class="w"> </span>file2
</code></pre></div>

<h3 id="head">head</h3>
<p>By default, <code>head</code> prints the first 10 lines of each file provided as an argument to standard output.  With more than one file, precede each with a header giving the file name. You can control how many lines are displayed with option <code>-n</code>:</p>
<div class="highlight"><pre><span></span><code>head<span class="w"> </span>-n5<span class="w"> </span>file.txt
</code></pre></div>

<p>You can also print all but the last N lines by adding <code>-</code> sign. For example in order to have all lines but the last one:</p>
<div class="highlight"><pre><span></span><code>head<span class="w"> </span>-n<span class="w"> </span>-1<span class="w"> </span>file.txt
</code></pre></div>

<h3 id="shuf">shuf</h3>
<p>To quickly inspect the content of the dataset in a text file you can use <code>head</code> which shows some first lines of the file. If you would like to have a more representative example of the content of the file, you can take a random sample of lines from the file with <code>shuf</code>:</p>
<div class="highlight"><pre><span></span><code>shuf<span class="w"> </span>-n<span class="w"> </span><span class="m">5</span><span class="w"> </span>file.txt
</code></pre></div>

<h3 id="sort">sort</h3>
<p>Here are options I often use for sort and unique operation:</p>
<div class="highlight"><pre><span></span><code>-b, --ignore-leading-blanks
              ignore leading blanks

-u, --unique
              with -c, check for strict ordering; without -c, output only the first  of  an equal run

-f, --ignore-case
              fold lower case to upper case characters

-i, --ignore-nonprinting
              consider only printable characters
</code></pre></div>

<div class="highlight"><pre><span></span><code>sort<span class="w"> </span>-bufi<span class="w"> </span>data.csv
</code></pre></div>

<h3 id="split">split</h3>
<p>Sometimes there is a need to split datasets into smaller parts. For E.g. when processing large files you can be hit by memory limitations, or you want to speed up processing using parallel computing. To split the file into N parts with the equal number of lines, use:</p>
<div class="highlight"><pre><span></span><code>split<span class="w"> </span>-n<span class="w"> </span>l/N<span class="w"> </span>data.csv
</code></pre></div>

<p>e.g.</p>
<div class="highlight"><pre><span></span><code>split<span class="w"> </span>-n<span class="w"> </span>l/10<span class="w"> </span>data.csv
</code></pre></div>

<p>This will create series of files named: <code>xaa, xab, xac,...</code>. The default pattern of  <code>split</code> for file naming is PREFIXaa, PREFIXab,...; default PREFIX is <code>x</code>. You can provide your own prefix e.g.</p>
<h3 id="tail">tail</h3>
<div class="highlight"><pre><span></span><code>split<span class="w"> </span>l/10<span class="w"> </span>data.csv<span class="w"> </span>part_
</code></pre></div>

<p>and this will result in having files <code>part_aa, part_ab,...</code>.  Suffixes don't have to be alphabetical: can be numeric (use switch <code>-d</code>) or even hex (use switch <code>-x</code>). What is particularly useful - prefixes can be used to save resulting files in a given location. Let's take an example <code>dataset.csv</code> file located in the data directory, we want to split this file into parts and save results in <code>parts</code> directory as shown below:</p>
<div class="highlight"><pre><span></span><code>data
├── dataset.csv
└── parts
    ├── xaa
    ├── xab
    └── xac
</code></pre></div>

<p>To achieve this create a parts directory and modify the prefix to <code>parts/x</code>:</p>
<div class="highlight"><pre><span></span><code>split<span class="w"> </span>l/3<span class="w"> </span>data.csv<span class="w"> </span>parts/x
</code></pre></div>

<p>Skipping the header row can be done with the tail</p>
<div class="highlight"><pre><span></span><code>tail<span class="w"> </span>-n<span class="w"> </span>+2<span class="w"> </span>file.txt
</code></pre></div>

<p>This syntax with the usage of <code>+</code> sign might require explanation. Here is an excerpt from the man page:</p>
<blockquote>
<p>-n N means output the last N lines, instead of the last 10; or use +N to output lines starting with the Nth.</p>
</blockquote>
<p>The usage of <code>+</code> sign can be considered as inverting the argument and telling the tail to print everything but the first x-1 lines. Note that <code>tail -n +1</code> would print the whole file, <code>tail -n +2</code> everything but the first line, etc.</p>
<p>the alternative solution involves <code>sed</code>:</p>
<div class="highlight"><pre><span></span><code>sed<span class="w"> </span>1d<span class="w"> </span>file.txt
</code></pre></div>

<h3 id="uniq">uniq</h3>
<p>often used with <code>sort</code> in a way:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>file.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq
</code></pre></div>

<p>If there are no special circumstances <code>cat</code> should be avoided:</p>
<div class="highlight"><pre><span></span><code>sort<span class="w"> </span>file.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq
</code></pre></div>

<p>Moreover, <code>sort</code> has the option <code>-u</code> which stands for <em>unique</em>. Therefore, to have unique lines it is sufficient to use:</p>
<div class="highlight"><pre><span></span><code>sort<span class="w"> </span>-u<span class="w"> </span>file.txt
</code></pre></div>

<h3 id="wc">wc</h3>
<ul>
<li>count lines</li>
</ul>
<div class="highlight"><pre><span></span><code>wc<span class="w"> </span>-l<span class="w"> </span>data.csv
</code></pre></div>

<ul>
<li>count lines in multiple files at once</li>
</ul>
<div class="highlight"><pre><span></span><code>wc<span class="w"> </span>-l<span class="w"> </span>*.csv
</code></pre></div>

<p>For special tasks - counting lines in very large files one can consider using replacement: <a href="https://github.com/crioux/turbo-linecount">Super-Fast Multi-Threaded Line Counter</a></p>
<p><em>Any comments or suggestions? <a href="mailto:ksafjan@gmail.com?subject=Blog+post">Let me know</a>.</em></p>
        </div>




            <div class="bibtex-note">
                <p><b>To cite this article:</b></p>
                <pre>@article{Saf2019Data,
    author  = {Krystian Safjan},
    title   = {Data Science Command-Line Tools},
    journal = {Krystian's Safjan Blog},
    year    = {2019},
}</pre>
            </div>
        <div class="article-tags">
            <span class="tags-label">Tags:</span>
                <a href="https://www.safjan.com/tag/machine-learning/" class="article-tag">machine-learning</a>
                <a href="https://www.safjan.com/tag/linux/" class="article-tag">Linux</a>
        </div>







            <div class="related-posts">
                <h4 class="related-posts-title">You might also like</h4>
                <div class="related-posts-grid">
                        <a href="https://www.safjan.com/interpreting-r2-mse-rmse-for-regression-models/" class="related-post-card">
                            <span class="related-post-title">Comprehensive Guide to Interpreting R², MSE, and RMSE for Regression Models.</span>
                            <span class="related-post-date">Feb 13, 2023</span>
                        </a>
                        <a href="https://www.safjan.com/implementing-sentence-boundary-detection-in-python-for-improved-text-chunkin/" class="related-post-card">
                            <span class="related-post-title">Implementing Sentence Boundary Detection in Python for Improved Text Chunking</span>
                            <span class="related-post-date">Aug 30, 2024</span>
                        </a>
                        <a href="https://www.safjan.com/prompt-discovery/" class="related-post-card">
                            <span class="related-post-title">Prompt Discovery</span>
                            <span class="related-post-date">Nov 04, 2023</span>
                        </a>
                        <a href="https://www.safjan.com/techniques-to-boost-rag-performance-in-production/" class="related-post-card">
                            <span class="related-post-title">Techniques to Boost RAG Performance in Production</span>
                            <span class="related-post-date">Nov 01, 2023</span>
                        </a>
                </div>
            </div>




    </article>

    <footer>
<p>
  &copy; 2026 Krystian Safjan - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/deed.en_US" target="_blank">Creative Commons Attribution-ShareAlike</a>
</p>    </footer>
</main>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Blog",
  "name": "Krystian Safjan's Blog",
  "url": "https://www.safjan.com",
"image": "/images/profile_new.jpg",  "description": ""
}
</script>


<script src="https://www.safjan.com/pagefind/pagefind-ui.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', function() {
        new PagefindUI({
            element: "#search",
            showSubResults: false,
            showImages: false,
            basePath: "https://www.safjan.com/pagefind/"
        });
    });
</script>

<script src="https://www.safjan.com/theme/js/theme-switcher.js"></script>

<style>
.youtube-embed {
    position: relative;
    width: 100%;
    padding-bottom: 56.25%;
    background: #000;
    border-radius: 0.375rem;
    overflow: hidden;
}
.youtube-embed iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
}
.youtube-embed-wrapper {
    margin-bottom: 1rem;
}
.youtube-embed-info {
    padding: 0.5rem 0.75rem;
    background: var(--color-bg-secondary, #f6f8fa);
    border-radius: 0 0 0.375rem 0.375rem;
    font-size: 0.875rem;
    margin-top: -0.375rem;
}
.youtube-embed-info a {
    text-decoration: none;
    color: inherit;
}
.youtube-embed-info a:hover {
    text-decoration: underline;
}
</style>
<script>
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('pre > code').forEach(function(code) {
        var text = code.textContent.trim();
        if (!text.match(/^https?:\/\/(www\.)?(youtube\.com|youtu\.be)/)) return;

        var lines = text.split('\n');
        var url = lines[0].trim();
        var match = url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/);
        if (!match) return;
        var videoId = match[1];

        var meta = {};
        lines.slice(1).forEach(function(line) {
            var m = line.match(/^(\w+):\s*(.+)$/);
            if (m) meta[m[1].toLowerCase()] = m[2].trim();
        });

        var wrapper = document.createElement('div');
        wrapper.className = 'youtube-embed-wrapper';

        var embed = document.createElement('div');
        embed.className = 'youtube-embed';
        embed.innerHTML = '<iframe src="https://www.youtube-nocookie.com/embed/' + videoId +
            '" allowfullscreen loading="lazy" title="' + (meta.title || 'YouTube video').replace(/"/g, '&quot;') + '"></iframe>';
        wrapper.appendChild(embed);

        if (meta.title || meta.author) {
            var info = document.createElement('div');
            info.className = 'youtube-embed-info';
            var html = meta.title ? '<strong>' + meta.title + '</strong>' : '';
            if (meta.author) {
                html += (meta.title ? ' &bull; ' : '');
                html += meta.authorurl ? '<a href="' + meta.authorurl + '" target="_blank" rel="noopener">' + meta.author + '</a>' : meta.author;
            }
            info.innerHTML = html;
            wrapper.appendChild(info);
        }
        code.closest('pre').replaceWith(wrapper);
    });
});
</script>
</body>
</html>