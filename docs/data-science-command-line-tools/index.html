
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="https://www.safjan.com/theme/pygments/github.min.css">


        <link rel="stylesheet" href="https://unpkg.com/applause-button/dist/applause-button.css" />
        <script src="https://unpkg.com/applause-button/dist/applause-button.js"></script>

  <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/solid.css">

    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/styles/custom.css">

    <link href="https://www.safjan.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Krystian Safjan's Blog Atom">

    <link href="https://www.safjan.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Krystian Safjan's Blog RSS">


<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-117080232-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->



<meta name="author" content="Krystian Safjan" />
<meta name="description" content="Description of GNU utils and other less standard tools that helps with processing data from CLI or with shell scripts." />
<meta name="keywords" content="machine learning, linux">


  <meta property="og:site_name" content="Krystian Safjan's Blog"/>
  <meta property="og:title" content="Data Science Command line Tools"/>
  <meta property="og:description" content="Description of GNU utils and other less standard tools that helps with processing data from CLI or with shell scripts."/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="https://www.safjan.com/data-science-command-line-tools/"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2019-08-23 00:00:00+02:00"/>
  <meta property="article:modified_time" content="2021-02-08 21:28:00+01:00"/>
  <meta property="article:author" content="https://www.safjan.com/author/krystian-safjan/">
  <meta property="article:section" content="Linux"/>
  <meta property="article:tag" content="machine learning"/>
  <meta property="article:tag" content="linux"/>
  <meta property="og:image" content="https://www.safjan.com//images/head/cli_tools.jpg">

  <title>Krystian Safjan's Blog &ndash; Data Science Command line Tools</title>

</head>
<body class="light-theme">
  <aside>
    <div>
      <a href="https://www.safjan.com/">
        <img src="/images/profile_new.jpg" alt="Krystian Safjan's Blog" title="Krystian Safjan's Blog" width="140" height="140">
      </a>

      <h1>
        <a href="https://www.safjan.com/">Krystian Safjan's Blog</a>
      </h1>

<p><p>Data Scientist | Researcher | Team Leader</p><br/><br/>I'm working at Ernst &amp; Young and writing about <a href="/category/data-science.html">Data Science and Visualization</a>, on <a href="/category/data-science.html">Machine Learning, Deep Learning</a> and <a href="/tag/nlp/">NLP</a>. There are also some <a href="/category/howto.html">howto</a> posts on tools and workflows.</li></ul><hr></p>


      <ul class="social">
          <li>
            <a  class="sc-linkedin" href="https://pl.linkedin.com/in/krystiansafjan" target="_blank">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
          <li>
            <a  class="sc-github" href="https://github.com/izikeros" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
          <li>
            <a  class="sc-envelope" href="mailto:ksafjan@gmail.com" target="_blank">
              <i class="fas fa-envelope"></i>
            </a>
          </li>
          <li>
            <a  class="sc-graduation-cap" href="https://scholar.google.pl/citations?user=UlNJgMoAAAAJ" target="_blank">
              <i class="fas fa-graduation-cap"></i>
            </a>
          </li>
          <li>
            <a  class="sc-rss" href="/feeds/all.rss.xml" target="_blank">
              <i class="fas fa-rss"></i>
            </a>
          </li>
      </ul>
    </div>

  </aside>
  <main>

    <nav>
      <a href="https://www.safjan.com/">Home</a>

      <a href="/archives.html">Articles</a>
      <a href="/til.html">Notes</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>
      <a href="/pdfs/Krystian_Safjan_resume_priv.pdf">Resume</a>

      <a href="https://www.safjan.com/feeds/all.atom.xml">Atom</a>

      <a href="https://www.safjan.com/feeds/all.rss.xml">RSS</a>
    </nav>

<article class="single">
  <header>
      
    <p>
      <!-- Posted on: -->
      August 23, 2019 



  <span id="post-share-links">
    &nbsp;&nbsp;&nbsp;Share on:
    <a href="https://twitter.com/intent/tweet?text=Data%20Science%20Command%20line%C2%A0Tools&url=https%3A//www.safjan.com/data-science-command-line-tools/&hashtags=machine-learning,linux" target="_blank" title="Share on Twitter">Twitter</a>
    |
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//www.safjan.com/data-science-command-line-tools/" target="_blank" title="Share on Facebook">Facebook</a>
    |
    <a href="https://news.ycombinator.com/submitlink?t=Data%20Science%20Command%20line%C2%A0Tools&u=https%3A//www.safjan.com/data-science-command-line-tools/" target="_blank" title="Share on HackerNews">HackerNews</a>
    |
    <a href="https://www.reddit.com/submit?url=https%3A//www.safjan.com/data-science-command-line-tools/&title=Data%20Science%20Command%20line%C2%A0Tools" target="_blank" title="Share via Reddit">Reddit</a>
  </span>
    <br/>
   </p>
  <h1 id="data-science-command-line-tools">Data Science Command line&nbsp;Tools</h1>
  <div class="header-underline"></div>
  </header>


  <div>
    <p>There are plenty of tools designed to ease life of Data Scientist. In this group, the special place has tools that are used from command line. They are special because are available for most operating systems and are designed with Unix philosophy in mind: they do one thing extremely well, they can be chained creating convenient&nbsp;workflows. </p>
<p><img alt="Diagram of cli tools for data science" src="/images/cli_tools_1/cli_tools.png"></p>
<p><a id="textutils-from-gnu-coreutils"></a></p>
<h2>Textutils from <span class="caps">GNU</span>&nbsp;Coreutils</h2>
<p>From my experience, I have benefit most from mastering the <span class="caps">GNU</span> Coreutils. This is the collection of: shellutils, fileutils and textutils - and in this post I will be discussing the latter&nbsp;one. </p>
<p><em>Table 1. Textutils - text processing tools, part of <span class="caps">GNU</span>&nbsp;Coreutils</em></p>
<table>
<thead>
<tr>
<th align="left">command</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><strong>cat</strong></td>
<td>merge, print files to standard output</td>
</tr>
<tr>
<td align="left"><a href="#comm"><strong>comm</strong></a></td>
<td>compare sorted files line by line; can find differences, unique lines for each compared files</td>
</tr>
<tr>
<td align="left"><strong>csplit</strong></td>
<td>divide files into parts using context</td>
</tr>
<tr>
<td align="left"><strong>cut</strong></td>
<td>remove sections from each line in file</td>
</tr>
<tr>
<td align="left"><strong>expand/unexpand</strong></td>
<td>convert tab into spaces / convert spaces to tabs</td>
</tr>
<tr>
<td align="left"><strong>fmt</strong></td>
<td>simple text formatter</td>
</tr>
<tr>
<td align="left"><strong>fold</strong></td>
<td>fold each input line to fit given line length</td>
</tr>
<tr>
<td align="left"><strong><a href="#head">head</a>/<a href="#tail">tail</a>/<a href="#shuf">shuf</a></strong></td>
<td>display starting lines of file / display file ending lines/get random lines from file</td>
</tr>
<tr>
<td align="left"><strong>join</strong></td>
<td>join lines from two files on common fields</td>
</tr>
<tr>
<td align="left"><strong>nl</strong></td>
<td>line numbering</td>
</tr>
<tr>
<td align="left"><strong>paste</strong></td>
<td>merge lines</td>
</tr>
<tr>
<td align="left"><a href="#sort"><strong>sort</strong></a></td>
<td>sort lines of text file</td>
</tr>
<tr>
<td align="left"><strong><a href="split">split</a></strong></td>
<td>divide file into parts</td>
</tr>
<tr>
<td align="left"><strong>tac</strong></td>
<td>merge, print in reverse order lines of files to standard output</td>
</tr>
<tr>
<td align="left"><strong>tr</strong></td>
<td>translate or remove characters</td>
</tr>
<tr>
<td align="left"><strong><a href="#uniq">uniq</a></strong></td>
<td>remove duplicated lines from file</td>
</tr>
<tr>
<td align="left"><strong><a href="#wc">wc</a></strong></td>
<td>display number of characters, words and lines of given file</td>
</tr>
</tbody>
</table>
<p>I will give a few examples of commands I use most often or ones that are exceptionally&nbsp;useful.</p>
<p><a id="comm"></a></p>
<h3>comm</h3>
<p>The <code>comm</code> command is very handy when comes to compare lists stored in separate files. For example, you have list of samples used for experiment #1 in one file and list of samples used in experiment #2 in another file.
The <code>comm</code> command takes sorted files as input and calculate unique lines for <span class="caps">FILE1</span> and for <span class="caps">FILE2</span> and the result is represented respectively as <code>column 1</code> and <code>column 2</code>. Having unique lines in column 1 and 2, set of lines that appear in both files is calculated and result is represented by column&nbsp;3. </p>
<p>Columns description for <code>comm</code>:</p>
<table>
<thead>
<tr>
<th>1</th>
<th>2</th>
<th>3</th>
</tr>
</thead>
<tbody>
<tr>
<td>lines unique to <span class="caps">FILE1</span></td>
<td>lines unique to <span class="caps">FILE1</span></td>
<td>lines that appear in both files</td>
</tr>
</tbody>
</table>
<p>Having three columns calculated we can now suppress lines that appears in given column in order to get lines that fulfill desired&nbsp;condition.</p>
<p>Meaning of the numbers used as <code>comm</code> parameters:</p>
<ul>
<li><code>-1</code>     suppress column 1 (lines unique to <span class="caps">FILE1</span>)</li>
<li><code>-2</code>     suppress column 2 (lines unique to <span class="caps">FILE2</span>)</li>
<li><code>-3</code>     suppress column 3 (lines that appear in both&nbsp;files)</li>
</ul>
<p>See below three typical usages of <code>comm</code>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># find lines only in file1</span>
comm -23 file1 file2

<span class="c1"># find lines only in file2</span>
comm -13 file1 file2

<span class="c1"># find lines common to both files</span>
comm -12 file1 file2
</code></pre></div>

<p><a id="head"></a></p>
<h3>head</h3>
<p>By default, <code>head</code> prints  the first 10 lines of each file provided as argument to standard output.  With more than one file, precede each with a header giving the file name. You can control how many lines is displayed with option <code>-n</code>:</p>
<div class="highlight"><pre><span></span><code>head -n5 file.txt
</code></pre></div>

<p>You can also print all but last N lines by adding <code>-</code> sign. For example in order to have all lines but last&nbsp;one:</p>
<div class="highlight"><pre><span></span><code>head -n -1 file.txt
</code></pre></div>

<p><a id="shuf"></a></p>
<h3>shuf</h3>
<p>To quickly inspect content of dataset in text file you can use <code>head</code> which shows some filest lines of the file. If you would like to have more representative example of the content of the file, you can take random sample of lines from file with <code>shuf</code>:</p>
<div class="highlight"><pre><span></span><code>shuf -n <span class="m">5</span> file.txt
</code></pre></div>

<p><a id="sort"></a></p>
<h3>sort</h3>
<p>Here are options I often use for sort and unique&nbsp;operation:</p>
<div class="highlight"><pre><span></span><code>-b, --ignore-leading-blanks
              ignore leading blanks

-u, --unique
              with -c, check for strict ordering; without -c, output only the first  of  an equal run

-f, --ignore-case
              fold lower case to upper case characters

-i, --ignore-nonprinting
              consider only printable characters
</code></pre></div>

<div class="highlight"><pre><span></span><code>sort -bufi data.csv
</code></pre></div>

<p><a id="split"></a></p>
<h3>split</h3>
<p>Sometimes there is a need to split dataset to smaller parts. E.g. when processing large files you can be hit by memory limitations, or you want to speed up processing using parallel computing. To split file into N parts with equal number of lines,&nbsp;use: </p>
<div class="highlight"><pre><span></span><code>split -n l/N data.csv
</code></pre></div>

<p>e.g.</p>
<div class="highlight"><pre><span></span><code>split -n l/10 data.csv
</code></pre></div>

<p>This will create serie of files named: <code>xaa, xab, xac,...</code>. The default pattern of  <code>split</code> for file naming is PREFIXaa, PREFIXab,&#8230;; default <span class="caps">PREFIX</span> is <code>x</code>. You can provide your own prefix e.g.
<a id="tail"></a></p>
<h3>tail</h3>
<div class="highlight"><pre><span></span><code>split l/10 data.csv part_
</code></pre></div>

<p>and this will result in having files <code>part_aa, part_ab,...</code>.  Suffixes don&#8217;t have to be alphabetical: can be numeric (use switch <code>-d</code>) or even hex (use switch <code>-x</code>). What is particularly useful - prefixes can be used to save resulting files in given location. Let&#8217;s take an example <code>dataset.csv</code> file located in data directory, we want to split this file into parts and save results in <code>parts</code> directory as shown&nbsp;below:</p>
<div class="highlight"><pre><span></span><code>data
├── dataset.csv
└── parts
    ├── xaa
    ├── xab
    └── xac
</code></pre></div>

<p>To achieve this create parts directory and modify the prefix to <code>parts/x</code>:</p>
<div class="highlight"><pre><span></span><code>split l/3 data.csv parts/x
</code></pre></div>

<p>Skipping header row can be done with&nbsp;tail</p>
<div class="highlight"><pre><span></span><code>tail -n +2 file.txt
</code></pre></div>

<p>This syntax with usage of <code>+</code> sign might require explanation. Here is excerpt from the man&nbsp;page: </p>
<blockquote>
<p>-n N means output the last N lines, instead of the last 10; or use +N to output lines starting with the&nbsp;Nth.</p>
</blockquote>
<p>The usage of <code>+</code> sign can be considered as inverting the argument and telling tail to print everything but the first x-1 lines. Note that <code>tail -n +1</code> would print the whole file, <code>tail -n +2</code> everything but the first line,&nbsp;etc.</p>
<p>the alternative solution involves <code>sed</code>:</p>
<div class="highlight"><pre><span></span><code>sed 1d file.txt
</code></pre></div>

<p><a id="uniq"></a></p>
<h3>uniq</h3>
<p>often used with <code>sort</code> in a&nbsp;way:</p>
<div class="highlight"><pre><span></span><code>cat file.txt <span class="p">|</span> sort <span class="p">|</span> uniq
</code></pre></div>

<p>If there are no special circumstances <code>cat</code> should be&nbsp;avoided:</p>
<div class="highlight"><pre><span></span><code>sort file.txt <span class="p">|</span> uniq
</code></pre></div>

<p>Moreover, <code>sort</code> has option <code>-u</code> which stands for <em>unique</em>. Therefore, to have unique lines it is sufficient to&nbsp;use:</p>
<div class="highlight"><pre><span></span><code>sort -u file.txt
</code></pre></div>

<p><a id="wc"></a></p>
<h3>wc</h3>
<ul>
<li>count&nbsp;lines</li>
</ul>
<div class="highlight"><pre><span></span><code>wc -l data.csv
</code></pre></div>

<ul>
<li>count lines in multiple files at&nbsp;once</li>
</ul>
<div class="highlight"><pre><span></span><code>wc -l *.csv
</code></pre></div>

<p>For special task - counting lines in very large files one can consider using replacement: <a href="https://github.com/crioux/turbo-linecount">Super-Fast Multi-Threaded Line&nbsp;Counter</a></p>
  </div>

     <div id="applause-container">
        <applause-button color="#d9411e" style="width: 58px; height: 58px;"/>
     </div>

  <div class="tag-cloud">
    <p>
      <br/><br/>Tags:&nbsp;
      <a href="https://www.safjan.com/tag/machine-learning/">machine learning</a>
      <a href="https://www.safjan.com/tag/linux/">linux</a>
    </p>
  </div>


  <div class="neighbors">
    <a class="btn float-left" href="https://www.safjan.com/spy-catch/" title="Finding the spy - post on Markov Chains and stochastic matrices">
      <i class="fa fa-angle-left"></i> Previous Post
    </a>
    <a class="btn float-right" href="https://www.safjan.com/interactive-plots-for-blogging/" title="Interactive plots for blogging">
      Next Post <i class="fa fa-angle-right"></i>
    </a>
  </div>

  <div class="related-posts">
    <h4>You might enjoy</h4>
    <ul class="related-posts">
      <li><a href="https://www.safjan.com/learn-bayesian-methods-in-4-steps-by-reading-and-by-doing/">Learn Bayesian methods in 4 steps - by reading and by&nbsp;doing</a></li>
      <li><a href="https://www.safjan.com/kaggle-evaluation-metrics-used-for-regression-problems/">Kaggle evaluation metrics used for regression&nbsp;problems</a></li>
      <li><a href="https://www.safjan.com/how-to-install-tensorflow-and-keras-on-windows-10/">How to install TensorFlow and Keras on Windows&nbsp;10</a></li>
      <li><a href="https://www.safjan.com/darwin-approach-to-traveling-salesman/">Darwin Approach to Traveling&nbsp;Salesman</a></li>
      <li><a href="https://www.safjan.com/how-to-organize-data-science-project-based-on-jupyter-notebook/">How to organize Data Science project based on Jupyter&nbsp;notebook</a></li>
    </ul>
  </div>


<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'krystian-safjan';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Please enable JavaScript to view comments.
</noscript>
<!-- End Disqus -->
</article>

    <footer>
<p>
  &copy; 2022 Krystian Safjan - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/deed.en_US" target="_blank">Creative Commons Attribution-ShareAlike</a>
</p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Krystian Safjan's Blog ",
  "url" : "https://www.safjan.com",
  "image": "/images/profile_new.jpg",
  "description": ""
}
</script>

</body>
</html>