
<!DOCTYPE html>
<html lang="en">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="https://safjan.com/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://safjan.com/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="https://safjan.com/theme/font-awesome/css/font-awesome.min.css">


    <link href="https://safjan.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Krystian Safjan's blog Atom">

    <link href="https://safjan.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Krystian Safjan's blog RSS">

    <link rel="shortcut icon" href="/extra/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/extra/favicon.ico" type="image/x-icon">

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />


<meta name="author" content="Krystian Safjan" />
<meta name="description" content="" />
<meta name="keywords" content="machine learning, linux">
<meta property="og:site_name" content="Krystian Safjan's blog"/>
<meta property="og:title" content="Data Science Command line Tools"/>
<meta property="og:description" content=""/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://safjan.com/data-science-command-line-tools/"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2019-08-23 00:00:00+02:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://safjan.com/author/krystian-safjan/">
<meta property="article:section" content="Posts"/>
<meta property="article:tag" content="machine learning"/>
<meta property="article:tag" content="linux"/>
<meta property="og:image" content="/images/profile_new.jpg">

  <title>Krystian Safjan's blog &ndash; Data Science Command line Tools</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://safjan.com">
        <img src="/images/profile_new.jpg" alt="" title="">
      </a>
      <h1><a href="https://safjan.com"></a></h1>

<p><hr>Data Scientist</br></br>I blog about Machine Learning, Deep Learning and NLP<hr></p>
      <nav>
        <ul class="list">
          <li><a href="https://safjan.com/about-me/#about-me">About me</a></li>

        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-linkedin" href="https://pl.linkedin.com/in/krystiansafjan" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        <li><a class="sc-github" href="https://github.com/izikeros" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-envelope-o" href="mailto:ksafjan@gmail.com" target="_blank"><i class="fa fa-envelope-o"></i></a></li>
        <li><a class="sc-mortar-board" href="https://scholar.google.pl/citations?user=UlNJgMoAAAAJ" target="_blank"><i class="fa fa-mortar-board"></i></a></li>
        <li><a class="sc-rss" href="/feeds/all.rss.xml" target="_blank"><i class="fa fa-rss"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="/index.html">Home</a>
      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>
      <a href="/Krystian_Safjan_resume_priv.pdf">Resume</a>

      <a href="https://safjan.com/feeds/all.atom.xml">    Atom
</a>

      <a href="https://safjan.com/feeds/all.rss.xml">    RSS
</a>
    </nav>

<article class="single">
  <header>
    <h1 id="data-science-command-line-tools">Data Science Command line Tools</h1>
    <p>
<!--           Posted on Fri 23 August 2019 in <a href="https://safjan.com/category/posts.html">Posts</a>
 -->
      
          Posted on Fri 23 August 2019


        &nbsp; &#8226; &nbsp; 5 min read
      <br/>
<!--        -->
    </p>
  </header>


  <div>
    <p>There are plenty of tools designed to ease life of Data Scientist. In this group, the special place has tools that are used from command line. They are special because are available for most operating systems and are designed with Unix philosophy in mind: they do one thing extremely well, they can be chained creating convenient workflows. This post </p>
<p><img alt="Diagram of cli tools for data science" src="/images/cli_tools_1/cli_tools.png"></p>
<h2>Textutils from GNU Coreutils</h2>
<p>From my experience, I have benefit most from mastering the GNU Coreutils. This is the collection of: shellutils, fileutils and textutils - and in this post I will be discussing the latter one. </p>
<p><em>Table 1. Textutils - text processing tools, part of GNU Coreutils</em></p>
<table>
<thead>
<tr>
<th align="right">command</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">cat</td>
<td>merge, print files to standard output</td>
</tr>
<tr>
<td align="right">comm</td>
<td>compare sorted files line by line; can find differences, unique lines for each compared files</td>
</tr>
<tr>
<td align="right">csplit</td>
<td>divide files into parts using context</td>
</tr>
<tr>
<td align="right">cut</td>
<td>remove sections from each line in file</td>
</tr>
<tr>
<td align="right">expand/unexpand</td>
<td>convert tab into spaces / convert spaces to tabs</td>
</tr>
<tr>
<td align="right">fmt</td>
<td>Simple text formatter</td>
</tr>
<tr>
<td align="right">fold</td>
<td>fold each input line to fit given line length</td>
</tr>
<tr>
<td align="right">head/tail/shuf</td>
<td>display starting lines of file / display file ending lines/get random lines from file</td>
</tr>
<tr>
<td align="right">join</td>
<td>join lines from two files on common fields</td>
</tr>
<tr>
<td align="right">nl</td>
<td>line numbering</td>
</tr>
<tr>
<td align="right">paste</td>
<td>merge lines</td>
</tr>
<tr>
<td align="right">sort</td>
<td>sort lines of text file</td>
</tr>
<tr>
<td align="right">split</td>
<td>divide file into parts</td>
</tr>
<tr>
<td align="right">tac</td>
<td>merge, print in reverse order lines of files to standard output</td>
</tr>
<tr>
<td align="right"></td>
<td></td>
</tr>
<tr>
<td align="right">tr</td>
<td>translate or remove characters</td>
</tr>
<tr>
<td align="right">uniq</td>
<td>Remove duplicated lines from file</td>
</tr>
<tr>
<td align="right">wc</td>
<td>display number of characters, words and lines of given file</td>
</tr>
</tbody>
</table>
<p>I will give a few examples of commands I use most often or ones that are exceptionally useful.</p>
<h3>comm</h3>
<p>The <code>comm</code> command is very handy when comes to compare lists stored in separate files. For example you have list of samples used for experiment #1 in one file and list of samples used in experiment #2 in another file.
The <code>comm</code> command takes sorted files as input and calculate unique lines for FILE1 and for FILE2 and the result is represented respectively as <code>column 1</code> and <code>column 2</code>. Having unique lines in column 1 and 2, set of lines that appear in both files is calculated and result is represented by column 3. </p>
<p>Columns description for <code>comm</code>:</p>
<table>
<thead>
<tr>
<th>1</th>
<th>2</th>
<th>3</th>
</tr>
</thead>
<tbody>
<tr>
<td>lines unique to FILE1</td>
<td>lines unique to FILE1</td>
<td>lines that appear in both files</td>
</tr>
</tbody>
</table>
<p>Having three columns calculated we can now suppress lines that appears in given column in order to get lines that fulfill desired condition.</p>
<p>Meaning of the numbers used as <code>comm</code> parameters:</p>
<ul>
<li><code>-1</code>     suppress column 1 (lines unique to FILE1)</li>
<li><code>-2</code>     suppress column 2 (lines unique to FILE2)</li>
<li><code>-3</code>     suppress column 3 (lines that appear in both files)</li>
</ul>
<p>See below three typical usages of <code>comm</code>:</p>
<div class="highlight"><pre><span></span><span class="c1"># find lines only in file1</span>
comm -23 file1 file2

<span class="c1"># find lines only in file2</span>
comm -13 file1 file2

<span class="c1"># find lines common to both files</span>
comm -12 file1 file2
</pre></div>


<h3>head</h3>
<p>By default, <code>head</code> prints  the first 10 lines of each file provided as argument to standard output.  With more than one file, precede each with a header giving the file name. You can control how many lines is displayed with option <code>-n</code>:</p>
<div class="highlight"><pre><span></span>head -n5 file.txt
</pre></div>


<p>You can also print all but last N lines by adding <code>-</code> sign. For example in order to have all lines but last one:</p>
<div class="highlight"><pre><span></span>head -n -1 file.txt
</pre></div>


<h3>shuf</h3>
<p>To quickly inspect content of dataset in text file you can use <code>head</code> which shows some filest lines of the file. If you would like to have more representative example of the content of the file, you can take random sample of lines from file with <code>shuf</code>:</p>
<div class="highlight"><pre><span></span>shuf -n <span class="m">5</span> file.txt
</pre></div>


<h3>sort</h3>
<p>Here are options I often use for sort and unique operation:</p>
<div class="highlight"><pre><span></span><span class="o">-</span><span class="nv">b</span>, <span class="o">--</span><span class="nv">ignore</span><span class="o">-</span><span class="nv">leading</span><span class="o">-</span><span class="nv">blanks</span>
              <span class="nv">ignore</span> <span class="nv">leading</span> <span class="nv">blanks</span>

<span class="o">-</span><span class="nv">u</span>, <span class="o">--</span><span class="nv">unique</span>
              <span class="nv">with</span> <span class="o">-</span><span class="nv">c</span>, <span class="nv">check</span> <span class="k">for</span> <span class="nv">strict</span> <span class="nv">ordering</span><span class="c1">; without -c, output only the first  of  an equal run</span>

<span class="o">-</span><span class="nv">f</span>, <span class="o">--</span><span class="nv">ignore</span><span class="o">-</span><span class="nv">case</span>
              <span class="nv">fold</span> <span class="nv">lower</span> <span class="nv">case</span> <span class="nv">to</span> <span class="nv">upper</span> <span class="nv">case</span> <span class="nv">characters</span>

<span class="o">-</span><span class="nv">i</span>, <span class="o">--</span><span class="nv">ignore</span><span class="o">-</span><span class="nv">nonprinting</span>
              <span class="nv">consider</span> <span class="nv">only</span> <span class="nv">printable</span> <span class="nv">characters</span>
</pre></div>


<div class="highlight"><pre><span></span>sort -bufi data.csv
</pre></div>


<h3>split</h3>
<p>Sometimes there is a need to split dataset to smaller parts. E.g. when processing large files you can be hit by memory limitations or you want to speed up processing using parallel computing. To split file into N parts with equal number of lines, use: </p>
<div class="highlight"><pre><span></span>split -n l/N data.csv
</pre></div>


<p>e.g.</p>
<div class="highlight"><pre><span></span>split -n l/10 data.csv
</pre></div>


<p>This will create serie of files named: <code>xaa, xab, xac,...</code>. The default pattern of  <code>split</code> for file naming is PREFIXaa, PREFIXab,...; default PREFIX is <code>x</code>. You can provide your own prefix e.g.</p>
<h3>tail</h3>
<div class="highlight"><pre><span></span>split l/10 data.csv part_
</pre></div>


<p>and this will result in having files <code>part_aa, part_ab,...</code>.  Suffixes doesn't have to be alphabetical: can be numeric (use switch <code>-d</code>) or even hex (use switch <code>-x</code>). What is particularly usefull - prefixes can be used to save resulting files in given location. Let's take an example <code>dataset.csv</code> file located in data directory, we want to split this file into parts and save results in <code>parts</code> directory as shown below:</p>
<div class="highlight"><pre><span></span>data
├── dataset.csv
└── parts
    ├── xaa
    ├── xab
    └── xac
</pre></div>


<p>To achieve this create parts directory and modify the prefix to <code>parts/x</code>:</p>
<div class="highlight"><pre><span></span>split l/3 data.csv parts/x
</pre></div>


<p>Skipping header row can be done with tail</p>
<div class="highlight"><pre><span></span><span class="n">tail</span> <span class="o">-</span><span class="n">n</span> <span class="o">+</span><span class="mi">2</span> <span class="n">file</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<p>This syntax with usage of <code>+</code> sign might require explanation. Here is excerpt from the man page: </p>
<blockquote>
<p>-n N means output the last N lines, instead of the last 10; or use +N to output lines starting with the Nth.</p>
</blockquote>
<p>The usage of <code>+</code> sign can be considered as inverting the argument and telling tail to print everything but the first x-1 lines. Note that <code>tail -n +1</code> would print the whole file, <code>tail -n +2</code> everything but the first line, etc.</p>
<p>the alternative solution involves <code>sed</code>:</p>
<div class="highlight"><pre><span></span>sed 1d file.txt
</pre></div>


<h3>uniq</h3>
<p>used often with <code>sort</code> in a way:</p>
<div class="highlight"><pre><span></span><span class="n">cat</span> <span class="n">file</span><span class="p">.</span><span class="n">txt</span> <span class="o">|</span> <span class="n">sort</span> <span class="o">|</span> <span class="n">uniq</span>
</pre></div>


<p>If there are no special circumstances <code>cat</code> should be avoided:</p>
<div class="highlight"><pre><span></span>sort file.txt <span class="p">|</span> uniq
</pre></div>


<p>Moreover, <code>sort</code> has option <code>-u</code> which stands for <em>unique</em>. Therefore, to have unique lines it is sufficient to use:</p>
<div class="highlight"><pre><span></span><span class="n">sort</span> <span class="o">-</span><span class="n">u</span> <span class="n">file</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<h3>wc</h3>
<ul>
<li>count lines</li>
</ul>
<div class="highlight"><pre><span></span><span class="n">wc</span> <span class="o">-</span><span class="n">l</span> <span class="k">data</span><span class="p">.</span><span class="n">csv</span>
</pre></div>


<ul>
<li>count lines in multiple files at once</li>
</ul>
<div class="highlight"><pre><span></span><span class="n">wc</span> <span class="o">-</span><span class="n">l</span> <span class="o">*</span><span class="p">.</span><span class="n">csv</span>
</pre></div>


<p>For special task - counting lines in very large files one can consider using replacement: <a href="https://github.com/crioux/turbo-linecount">Super-Fast Multi-Threaded Line Counter</a></p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://safjan.com/tag/machine-learning/">machine learning</a>
      <a href="https://safjan.com/tag/linux/">linux</a>
    </p>
  </div>


  <div class="related-posts">
    <h4>    If you liked this article, you might also enjoy:
</h4>
    <ul class="related-posts">
      <li><a href="https://safjan.com/learn-bayesian-methods-in-4-steps-by-reading-and-by-doing/">Learn Bayesian methods in 4 steps - by reading and by doing</a></li>
      <li><a href="https://safjan.com/kaggle-evaluation-metrics-used-for-regression-problems/">Kaggle evaluation metrics used for regression problems</a></li>
      <li><a href="https://safjan.com/how-to-install-tensorflow-and-keras-on-windows-10/">How to install TensorFlow and Keras on Windows 10</a></li>
      <li><a href="https://safjan.com/darwin-approach-to-traveling-salesman/">Darwin Approach to Traveling Salesman</a></li>
      <li><a href="https://safjan.com/how-to-organize-data-science-project-based-on-jupyter-notebook/">How to organize Data Science project based on Jupyter notebook</a></li>
    </ul>
  </div>


<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'krystian-safjan';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
        Please enable JavaScript to view comments.

</noscript>
</article>

    <footer>
<p>&copy; Krystian Safjan </p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>

<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-117080232-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->



<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Krystian Safjan's blog ",
  "url" : "https://safjan.com",
  "image": "/images/profile_new.jpg",
  "description": "Krystian Safjan's Thoughts and Writings"
}
</script>
</body>
</html>