
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="HandheldFriendly" content="True"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"/>
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap"
              rel="stylesheet">

        <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/stylesheet/style.min.css">



        <link id="pygments-light-theme" rel="stylesheet" type="text/css"
              href="https://www.safjan.com/theme/pygments/github.min.css">



    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/fontawesome.css">
    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/brands.css">
    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/solid.css">

        <link rel="stylesheet" type="text/css"
              href="https://www.safjan.com/styles/custom.css">

        <link href="https://www.safjan.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Krystian Safjan's Blog Atom">

        <link href="https://www.safjan.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
              title="Krystian Safjan's Blog RSS">


<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-117080232-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-117080232-1');
</script>
<!-- End of Google tag (gtag.js) -->



    <meta name="author" content="Krystian Safjan"/>
    <meta name="description" content=""/>
    <meta name="keywords" content="nim, programming, tsp, genetic-algorithms">
    <meta expr:content="2023-01-13 00:00:00+01:00" itemprop='datePublished'/>
    <meta expr:content="2023-01-13 00:00:00+01:00" itemprop='dateModified'/>
    <meta property="article:modified_time" content="2023-01-13 00:00:00+01:00"/>
    <meta property="article:published_time" content="2023-01-13 00:00:00+01:00"/>
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Solve TSP problem using genetic algorithms in NIM",
  "datePublished": "2023-01-13 00:00:00+01:00",
  "dateModified": "2023-01-13 00:00:00+01:00"
}



    </script>



  <meta property="og:site_name" content="Krystian Safjan's Blog"/>
  <meta property="og:title" content="Solve TSP problem using genetic algorithms in NIM"/>
  <meta property="og:description" content=""/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="https://www.safjan.com/drafts/solve-tsp-problem-using-genetic-algorithms-in-nim.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2023-01-13 00:00:00+01:00"/>
  <meta property="article:modified_time" content="2023-01-13 00:00:00+01:00"/>
  <meta property="article:author" content="https://www.safjan.com/author/krystian-safjan/">
  <meta property="article:section" content="Howto"/>
  <meta property="article:tag" content="nim"/>
  <meta property="article:tag" content="programming"/>
  <meta property="article:tag" content="tsp"/>
  <meta property="article:tag" content="genetic-algorithms"/>
  <meta property="og:image" content="https://www.safjan.com//images/zsh/inside-work-tree.jpg">

    <meta name="twitter:card" content="summary"/>
    <meta property="twitter:image" content="https://www.safjan.com//images/zsh/inside-work-tree.jpg">

    <meta name="twitter:label1" content="Est. reading time"/>
    <meta name="twitter:data1" content="4 min."/>
    <meta name="twitter:site" content="@izikeros"/>
    <meta name="twitter:description" content=""/>
    <meta name="twitter:title" content="Solve TSP problem using genetic algorithms in NIM"/>


    <title>    Solve TSP problem using genetic algorithms in NIM
</title>


<!-- Google Automatic Ads -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9767732578835199"
     crossorigin="anonymous"></script>
<!-- End of Google Automatic Ads -->


</head>
<body class="light-theme">
<aside>
    <div>
        <a href="https://www.safjan.com/">
                <img src="/images/profile_new.jpg" alt="Krystian Safjan's Blog" title="Krystian Safjan's Blog" width="140" height="140">
        </a>

        <h1>
            <a href="https://www.safjan.com/">Krystian Safjan's Blog</a>
        </h1>

<p>Data Scientist | Researcher | Team Leader<br><br> working at Ernst &amp; Young and writing about <a href="/category/data-science.html">Data Science and Visualization</a>, on <a href="/category/data-science.html">Machine Learning, Deep Learning</a> and <a href="/tag/nlp/">NLP</a>. There are also some  <a href="/category/howto.html">howto</a> posts on tools and workflows.</p>




        <ul class="social">
                <li>
                    <a  class="sc-linkedin" href="https://pl.linkedin.com/in/krystiansafjan"
                       target="_blank">
                        <i class="fab fa-linkedin"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-github" href="https://github.com/izikeros"
                       target="_blank">
                        <i class="fab fa-github"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-envelope" href="mailto:ksafjan@gmail.com"
                       target="_blank">
                        <i class="fas fa-envelope"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-graduation-cap" href="https://scholar.google.pl/citations?user=UlNJgMoAAAAJ"
                       target="_blank">
                        <i class="fas fa-graduation-cap"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-rss" href="/feeds/all.rss.xml"
                       target="_blank">
                        <i class="fas fa-rss"></i>
                    </a>
                </li>
        </ul>
    </div>

<style>
    .button {
        background-color: yellow;
        color: black;
        border: none;
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
        border-radius: 20px;
    }

    .center {
        text-align: center;
    }

    .container {
        display: grid;
        grid-template-columns: 1fr 1fr;
    }

    .left-col {
    }

    .right-col {
    }

    .image {
        border-radius: 0;
        width: 100%;
    }

    .book-list {
        padding-top:0;
        padding-bottom: 0;
        text-align:left;
        box-sizing: border-box;
        display: block;
        list-style-image: url(/images/shortcode-tick.webp);
        margin-block-start: 1em;
        margin-block-end: 1em;
        margin-inline-start:0;
        margin-inline-end:0;
        padding-inline-start:40px;
    }

    .book-list li {
        font-weight: bold;
    }

    @media (max-width: 600px) {
        .container {
            grid-template-columns: 1fr;
        }
    }

</style>
<div class="container">
    <div class="left-col">
        <a href="https://gumroad.com/">
            <img src="/images/mlop_interview_book_cover_3D_300px.jpg" class="image" alt="Interview Book Cover">
        </a>

        <div class="center">
            <a href="https://gumroad.com/">
                <button class="button">Get for $0.99</button>
            </a>
        </div>
    </div>
    <div class="right-col">
        <div>
            <ul class="book-list">
                <li>PDF, ePUB, mobi format ebook, no DRM</li>
                <li>50 questions and answers</li>
                <li>Stories from real projects</li>
                <li>100 multiple choice quizz questions</li>
                <li>178 pages</li>
            </ul>
        </div>
    </div>
</div>
</aside>
<main>

        <nav>
            <a href="https://www.safjan.com/">Home</a>

                <a href="/archives.html">Articles</a>
                <a href="/til.html">Notes</a>
                <a href="/categories.html">Categories</a>
                <a href="/tags.html">Tags</a>
                <a href="/pdfs/Krystian_Safjan_resume_priv.pdf">Resume</a>

                <a href="https://www.safjan.com/feeds/all.atom.xml">Atom</a>

                <a href="https://www.safjan.com/feeds/all.rss.xml">RSS</a>
        </nav>

    <article class="single">
        <header>
                
            <p>
                <!-- Posted on: -->
                2023-01-13 


                <br/>
            </p>
            <h1 id="solve-tsp-problem-using-genetic-algorithms-in-nim">Solve TSP problem using genetic algorithms in NIM</h1>
            <div class="header-underline"></div>



        </header>


        <div>
            <p>Let's start with the outline of a solution for the Traveling Salesman Problem (TSP) using a genetic algorithm in the NIM programming language. Here is an example:</p>
<ol>
<li>
<p>Define a representation for TSP tours (i.e. a list of cities in order) as a sequence of integers, where each integer represents a city.</p>
</li>
<li>
<p>Create an initial population of TSP tours using a random number generator.</p>
</li>
<li>
<p>Use a fitness function to evaluate the quality of each tour in the population. The fitness function should take into account the total distance traveled by the tour.</p>
</li>
<li>
<p>Use genetic operators such as selection, crossover, and mutation to create a new population of tours.</p>
</li>
<li>
<p>Repeat steps 3 and 4 for a certain number of generations or until a satisfactory solution is found.</p>
</li>
<li>
<p>Return the best tour found as the solution to the TSP.</p>
</li>
</ol>
<p>Here is a basic example of how this could be implemented in NIM:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="n">random</span>

<span class="k">type</span>
<span class="w">  </span><span class="n">Tour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">seq</span><span class="o">[</span><span class="nb">int</span><span class="o">]</span>

<span class="kd">var</span>
<span class="w">  </span><span class="n">population</span><span class="p">:</span><span class="w"> </span><span class="nb">seq</span><span class="o">[</span><span class="n">Tour</span><span class="o">]</span>

<span class="k">proc</span><span class="w"> </span><span class="nf">createInitialPopulation</span><span class="p">(</span><span class="n">n</span><span class="p">:</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="n">numCities</span><span class="p">:</span><span class="w"> </span><span class="nb">int</span><span class="p">):</span>
<span class="w">  </span><span class="n">population</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newSeq</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="mf">0</span><span class="p">..</span><span class="o">&lt;</span><span class="n">n</span><span class="p">:</span>
<span class="w">    </span><span class="n">population</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">randomPermutation</span><span class="p">(</span><span class="n">numCities</span><span class="p">)</span>

<span class="k">proc</span><span class="w"> </span><span class="nf">evaluateFitness</span><span class="p">(</span><span class="n">tour</span><span class="p">:</span><span class="w"> </span><span class="n">Tour</span><span class="p">):</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="c"># calculate total distance traveled by tour</span>
<span class="w">  </span><span class="c"># return as a float</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">distance</span>

<span class="k">proc</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="n">population</span><span class="p">:</span><span class="w"> </span><span class="nb">seq</span><span class="o">[</span><span class="n">Tour</span><span class="o">]</span><span class="p">):</span><span class="w"> </span><span class="n">Tour</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="c"># implement selection operator (e.g. roulette wheel selection)</span>

<span class="k">proc</span><span class="w"> </span><span class="nf">crossover</span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="n">Tour</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="n">Tour</span><span class="p">):</span><span class="w"> </span><span class="n">Tour</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="c"># implement crossover operator (e.g. two-point crossover)</span>

<span class="k">proc</span><span class="w"> </span><span class="nf">mutate</span><span class="p">(</span><span class="n">tour</span><span class="p">:</span><span class="w"> </span><span class="n">Tour</span><span class="p">):</span>
<span class="w">  </span><span class="c"># implement mutation operator (e.g. swap mutation)</span>

<span class="k">proc</span><span class="w"> </span><span class="nf">solveTSP</span><span class="p">(</span><span class="n">numCities</span><span class="p">:</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="n">populationSize</span><span class="p">:</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="n">numGenerations</span><span class="p">:</span><span class="w"> </span><span class="nb">int</span><span class="p">):</span>
<span class="w">  </span><span class="n">createInitialPopulation</span><span class="p">(</span><span class="n">populationSize</span><span class="p">,</span><span class="w"> </span><span class="n">numCities</span><span class="p">)</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="mf">0</span><span class="p">..</span><span class="o">&lt;</span><span class="n">numGenerations</span><span class="p">:</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">tour</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">population</span><span class="p">:</span>
<span class="w">      </span><span class="n">evaluateFitness</span><span class="p">(</span><span class="n">tour</span><span class="p">)</span>
<span class="w">    </span><span class="c"># sort population by fitness</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="mf">0</span><span class="p">..</span><span class="o">&lt;</span><span class="n">populationSize</span><span class="o">/</span><span class="mi">2</span><span class="p">:</span>
<span class="w">      </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">select</span><span class="p">(</span><span class="n">population</span><span class="p">)</span>
<span class="w">      </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">select</span><span class="p">(</span><span class="n">population</span><span class="p">)</span>
<span class="w">      </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">crossover</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<span class="w">      </span><span class="n">mutate</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="w">      </span><span class="n">population</span><span class="o">[</span><span class="n">j</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span>
<span class="w">  </span><span class="c"># return the best tour in the final population</span>
</code></pre></div>

<p>Here is an example implementation of the <code>select</code> procedure using roulette wheel selection in NIM:</p>
<div class="highlight"><pre><span></span><code><span class="k">proc</span><span class="w"> </span><span class="nv">select</span><span class="p">(</span><span class="nv">population</span><span class="p">:</span><span class="w"> </span><span class="nv">seq</span><span class="p">[</span><span class="nv">Tour</span><span class="p">]):</span><span class="w"> </span><span class="nv">Tour</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="no">var</span>
<span class="w">    </span><span class="kd">totalFitness</span><span class="p">,</span><span class="w"> </span><span class="nv">randNum</span><span class="p">:</span><span class="w"> </span><span class="nv">float</span>
<span class="w">    </span><span class="nl">runningSum:</span><span class="w"> </span><span class="nf">float</span>
<span class="w">    </span><span class="nl">i:</span><span class="w"> </span><span class="no">int</span>
<span class="w">  </span><span class="kd">totalFitness</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span>
<span class="w">  </span><span class="no">for</span><span class="w"> </span><span class="kd">tour</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">population</span><span class="p">:</span>
<span class="w">    </span><span class="nf">totalFitness</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nv">evaluateFitness</span><span class="p">(</span><span class="nv">tour</span><span class="p">)</span>
<span class="w">  </span><span class="nf">randNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">random</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">totalFitness</span>
<span class="w">  </span><span class="nf">runningSum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span>
<span class="w">  </span><span class="nf">for</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="mi">0</span><span class="nv">..</span><span class="o">&lt;</span><span class="nv">len</span><span class="p">(</span><span class="nv">population</span><span class="p">):</span>
<span class="w">    </span><span class="nf">runningSum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nv">evaluateFitness</span><span class="p">(</span><span class="nv">population</span><span class="p">[</span><span class="nv">i</span><span class="p">])</span>
<span class="w">    </span><span class="nf">if</span><span class="w"> </span><span class="nv">runningSum</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nv">randNum</span><span class="p">:</span>
<span class="w">      </span><span class="nf">return</span><span class="w"> </span><span class="nv">population</span><span class="p">[</span><span class="nv">i</span><span class="p">]</span>
</code></pre></div>

<p>This implementation uses the <code>random()</code> function to generate a random number between 0 and 1, and then uses that number to select a tour from the population. The <code>evaluateFitness(tour: Tour)</code> function is used to calculate the fitness of each tour, and the roulette wheel selection is implemented by iterating through the population, adding the fitness of each tour to a running sum, and returning the tour when the running sum exceeds the randomly generated number.</p>
<p>Please note that this is just an example, and that there are many different ways to implement roulette wheel selection. Also in this example I am assuming that evaluateFitness(tour: Tour) returns a value between 0 and 1 as fitness of a tour.</p>
<p>Here is an example implementation of the <code>evaluateFitness</code> procedure in NIM:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">math</span>

<span class="n">proc</span> <span class="n">evaluateFitness</span><span class="p">(</span><span class="n">tour</span><span class="p">:</span> <span class="n">Tour</span><span class="p">):</span> <span class="nb">float</span> <span class="o">=</span>
  <span class="n">var</span>
    <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">i</span><span class="p">:</span> <span class="nb">int</span>
  <span class="n">distance</span> <span class="o">=</span> <span class="mf">0.0</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="mf">0.</span><span class="o">.&lt;</span><span class="nb">len</span><span class="p">(</span><span class="n">tour</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
    <span class="n">city1</span> <span class="o">=</span> <span class="n">tour</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">city2</span> <span class="o">=</span> <span class="n">tour</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">distance</span> <span class="o">+=</span> <span class="n">euclideanDistance</span><span class="p">(</span><span class="n">city1</span><span class="p">,</span> <span class="n">city2</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">distance</span>

<span class="n">proc</span> <span class="n">euclideanDistance</span><span class="p">(</span><span class="n">city1</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">city2</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span> <span class="nb">float</span> <span class="o">=</span>
  <span class="n">var</span>
    <span class="n">xd</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">yd</span><span class="p">:</span> <span class="nb">float</span>
  <span class="n">xd</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">city1</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="n">city2</span><span class="p">]</span>
  <span class="n">yd</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="n">city1</span><span class="p">]</span> <span class="o">-</span> <span class="n">y</span><span class="p">[</span><span class="n">city2</span><span class="p">]</span>
  <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">xd</span> <span class="o">*</span> <span class="n">xd</span> <span class="o">+</span> <span class="n">yd</span> <span class="o">*</span> <span class="n">yd</span><span class="p">)</span>
</code></pre></div>

<p>In this example, <code>euclideanDistance(city1: int, city2: int)</code> calculates the euclidean distance between two cities using the coordinates of the cities. The <code>evaluateFitness</code> procedure iterates through the tour, calculating the total distance traveled by adding up the euclidean distance between each consecutive city in the tour.</p>
<p>Please note that this is just an example, and that there are many different ways to calculate the distance between cities. Also, this example assumes that the x and y coordinates of each city are stored in arrays <code>x</code> and <code>y</code> respectively and also the tour is a list of integers where each integer represents a city.</p>
<div class="highlight"><pre><span></span><code><span class="k">proc</span><span class="w"> </span><span class="nf">crossover</span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="n">Tour</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="n">Tour</span><span class="p">):</span><span class="w"> </span><span class="n">Tour</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="kd">var</span>
<span class="w">    </span><span class="n">i</span><span class="p">:</span><span class="w"> </span><span class="nb">int</span>
<span class="w">    </span><span class="n">r1</span><span class="p">,</span><span class="w"> </span><span class="n">r2</span><span class="p">:</span><span class="w"> </span><span class="nb">int</span>
<span class="w">    </span><span class="n">offspring</span><span class="p">:</span><span class="w"> </span><span class="n">Tour</span>
<span class="w">  </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">randint</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">offspring</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">[</span><span class="mf">0</span><span class="p">..</span><span class="n">r1</span><span class="o">]</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">r1</span><span class="p">..</span><span class="n">r2</span><span class="p">:</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">b</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="w"> </span><span class="ow">notin</span><span class="w"> </span><span class="n">offspring</span><span class="p">:</span>
<span class="w">      </span><span class="n">offspring</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">b</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">)</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="mf">0</span><span class="p">..</span><span class="o">&lt;</span><span class="n">len</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="w"> </span><span class="ow">notin</span><span class="w"> </span><span class="n">offspring</span><span class="p">:</span>
<span class="w">      </span><span class="n">offspring</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">)</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">offspring</span>

<span class="k">proc</span><span class="w"> </span><span class="nf">mutate</span><span class="p">(</span><span class="n">tour</span><span class="p">:</span><span class="w"> </span><span class="n">Tour</span><span class="p">):</span>
<span class="w">  </span><span class="kd">var</span>
<span class="w">    </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">:</span><span class="w"> </span><span class="nb">int</span>
<span class="w">    </span><span class="n">r1</span><span class="p">,</span><span class="w"> </span><span class="n">r2</span><span class="p">:</span><span class="w"> </span><span class="nb">int</span>
<span class="w">  </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">tour</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">tour</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">tour</span><span class="o">[</span><span class="n">r1</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">tour</span><span class="o">[</span><span class="n">r2</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tour</span><span class="o">[</span><span class="n">r2</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">tour</span><span class="o">[</span><span class="n">r1</span><span class="o">]</span>
</code></pre></div>

<p>The <code>crossover</code> procedure implements a two-point crossover operator. It takes two tours, <code>a</code> and <code>b</code>, as input and creates an offspring tour by taking the sub-tour from <code>a</code> between two randomly selected points and adding any missing cities from <code>b</code> to the offspring.</p>
<p>The <code>mutate</code> procedure implements a swap mutation operator. It takes a tour as input and randomly selects two positions in the tour and swap the elements at those positions.</p>
<p>Please note that this is just an example, and that there are many different ways to implement crossover and mutation operators. Also, in this example I am using <code>randint(a:int, b:int)</code> function which returns random integer between a and b (inclusive)</p>
<blockquote>
<p>How to visualize convergence of the this algorithm in NIM?</p>
</blockquote>
<p>There are several ways to visualize the convergence of a genetic algorithm in NIM. Here are a few examples:</p>
<ol>
<li>
<p>Plotting the best fitness of the population over time: This can be done by keeping track of the best fitness value at each generation and plotting that data over time.</p>
</li>
<li>
<p>Plotting the average fitness of the population over time: Similar to the best fitness, but instead of keeping track of the best fitness, we keep track of average fitness of the population at each generation.</p>
</li>
<li>
<p>Plotting the standard deviation of the fitness of the population over time: This can give an idea of how much the fitness values are varying within the population.</p>
</li>
<li>
<p>Plotting the distribution of the fitness of the population over time: This can give a visual representation of how the population's fitness is changing over time.</p>
</li>
<li>
<p>Plotting the best solution found at each generation: This can give a visual representation of how the algorithm is approaching an optimal solution</p>
</li>
</ol>
<p>To implement this visualization in NIM, you would need to use a library such as matplotlib, or gnuplot. There are also other libraries which you can use to plot. You would also need to store the best, average, standard deviation and population's fitness values in arrays at each generation and then use the plotting libraries to generate the graph.</p>
<p>Please note that, visualization of convergence is not only important for understanding the behavior of the algorithm but also for debugging and fine-tuning the algorithm.</p>
        </div>


        <div class="tag-cloud">
            <p>
                    <br/><br/>Tags:&nbsp;
                        <a href="https://www.safjan.com/tag/nim/">nim</a>
                        <a href="https://www.safjan.com/tag/programming/">programming</a>
                        <a href="https://www.safjan.com/tag/tsp/">tsp</a>
                        <a href="https://www.safjan.com/tag/genetic-algorithms/">genetic-algorithms</a>
            </p>
        </div>


  <div class="neighbors">
  </div>

            <div class="related-posts">
                <h4>You might enjoy</h4>
                <ul class="related-posts">
                        <li><a href="https://www.safjan.com/vscode-as-nim-ide/">Setup VS Code as NIM IDE</a></li>
                        <li><a href="https://www.safjan.com/combining-neural-networks-and-evolutionary-algorithms/">Combining neural networks and evolutionary algorithms</a></li>
                </ul>
            </div>


    </article>

    <footer>
<p>
  &copy; 2023 Krystian Safjan - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/deed.en_US" target="_blank">Creative Commons Attribution-ShareAlike</a>
</p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
</main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Krystian Safjan's Blog ",
  "url" : "https://www.safjan.com",
  "image": "/images/profile_new.jpg",
  "description": ""
}
</script>

</body>
</html>