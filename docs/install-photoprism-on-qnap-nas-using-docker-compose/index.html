
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="color-scheme" content="light dark"/>
    <script>
      (function() {
        var theme = localStorage.getItem('theme-preference');
        if (theme === 'dark' || theme === 'light') {
          document.documentElement.setAttribute('data-theme', theme);
        }
      })();
    </script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="HandheldFriendly" content="True"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"/>
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap"
              rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="http://127.0.0.1:8000/theme/stylesheet/style.css">


    <link rel="stylesheet" type="text/css" href="http://127.0.0.1:8000/theme/pygments/github.min.css">


    <link rel="stylesheet" type="text/css" href="http://127.0.0.1:8000/theme/font-awesome/css/fontawesome.css">
    <link rel="stylesheet" type="text/css" href="http://127.0.0.1:8000/theme/font-awesome/css/brands.css">
    <link rel="stylesheet" type="text/css" href="http://127.0.0.1:8000/theme/font-awesome/css/solid.css">

    <link rel="stylesheet" href="http://127.0.0.1:8000/pagefind/pagefind-ui.css">

        <link rel="stylesheet" type="text/css"
              href="http://127.0.0.1:8000/styles/custom.css">




    <link rel="apple-touch-icon" sizes="180x180" href="http://127.0.0.1:8000/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="http://127.0.0.1:8000/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="http://127.0.0.1:8000/favicon-16x16.png">
    <link rel="shortcut icon" href="http://127.0.0.1:8000/favicon.ico">
    <link rel="manifest" href="http://127.0.0.1:8000/site.webmanifest">
    <meta name="theme-color" content="#333333">
    <meta name="apple-mobile-web-app-title" content="Krystian Safjan's Blog">





    <meta name="author" content="Krystian Safjan"/>
    <meta name="description" content="Instruction on how to install Photoprism on QNAP NAS using Docker Compose"/>
    <meta name="keywords" content="nas, photoprism, Linux, photo-gallery, docker, docker-compose, qnap, nas-app">


  <meta property="og:site_name" content="Krystian Safjan's Blog"/>
  <meta property="og:title" content="Install Photoprism on QNAP NAS Using Docker Compose"/>
  <meta property="og:description" content="Instruction on how to install Photoprism on QNAP NAS using Docker Compose"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="http://127.0.0.1:8000/install-photoprism-on-qnap-nas-using-docker-compose/"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2022-08-08 00:00:00+02:00"/>
  <meta property="article:modified_time" content="2024-08-26 00:00:00+02:00"/>
  <meta property="article:author" content="http://127.0.0.1:8000/author/krystian-safjan/"/>
  <meta property="article:section" content="note"/>
  <meta property="article:tag" content="nas"/>
  <meta property="article:tag" content="photoprism"/>
  <meta property="article:tag" content="Linux"/>
  <meta property="article:tag" content="photo-gallery"/>
  <meta property="article:tag" content="docker"/>
  <meta property="article:tag" content="docker-compose"/>
  <meta property="article:tag" content="qnap"/>
  <meta property="article:tag" content="nas-app"/>
  <meta property="og:image" content="/images/profile_new.jpg"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image" content="/images/profile_new.jpg"/>
    <meta name="twitter:image:alt" content="Krystian Safjan's Blog"/>


    <meta name="twitter:site" content="@izikeros"/>
    <meta name="twitter:creator" content="@izikeros"/>
    <meta name="twitter:title" content="Install Photoprism on QNAP NAS Using Docker Compose"/>
    <meta name="twitter:description" content="Instruction on how to install Photoprism on QNAP NAS using Docker Compose"/>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://127.0.0.1:8000/install-photoprism-on-qnap-nas-using-docker-compose/"
  },
  "headline": "Install Photoprism on QNAP NAS Using Docker Compose",
  "datePublished": "2022-08-08T00:00:00+02:00",
  "dateModified": "2024-08-26T00:00:00+02:00",
  "author": {
    "@type": "Person",
    "name": "Krystian Safjan",
    "url": "http://127.0.0.1:8000/author/krystian-safjan/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Krystian Safjan's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "/images/profile_new.jpg"
    }  },
"image": "/images/profile_new.jpg",  "url": "http://127.0.0.1:8000/install-photoprism-on-qnap-nas-using-docker-compose/",
  "description": "Instruction on how to install Photoprism on QNAP NAS using Docker Compose",
  "articleSection": "note",
  "inLanguage": "en",
  "keywords": "nas, photoprism, Linux, photo-gallery, docker, docker-compose, qnap, nas-app",
  "wordCount": 1170,
  "speakable": {
    "@type": "SpeakableSpecification",
    "cssSelector": ["article h1", ".summary", ".tldr", "article \u003e p:first-of-type"]
  }}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "http://127.0.0.1:8000/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "note",
      "item": "http://127.0.0.1:8000/category/note.html"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Install Photoprism on QNAP NAS Using Docker Compose"
    }
  ]
}
</script>



<meta name="ai:summary" content="Instruction on how to install Photoprism on QNAP NAS using Docker Compose">

<meta name="ai:topics" content="nas, photoprism, Linux, photo-gallery, docker, docker-compose, qnap, nas-app">



<meta name="ai:word-count" content="1170">
<meta name="ai:reading-time" content="5 min">

<meta name="ai:section" content="note">



<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">

    <title>    Install Photoprism on QNAP NAS Using Docker Compose
</title>



<!-- Google Automatic Ads -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9767732578835199"
     crossorigin="anonymous"></script>
<!-- End of Google Automatic Ads -->


</head>
<body>
<div id="reading-progress" class="reading-progress"></div>
<aside>
    <div>
        <a href="http://127.0.0.1:8000/">
                <img src="/images/profile_new.jpg" alt="Krystian Safjan's Blog" title="Krystian Safjan's Blog" width="140" height="140">
        </a>

        <h1>
            <a href="http://127.0.0.1:8000/">Krystian Safjan's Blog</a>
        </h1>

<p>Data Scientist | Researcher | Team Leader<br><br> working at Ernst &amp; Young and writing about <a href="/category/machine-learning.html">Data Science and Visualization</a>, on <a href="/category/machine-learning.html">Machine Learning, Deep Learning</a> and <a href="/tag/nlp/">NLP</a>. There are also some <a href="/category/howto.html">howto</a> posts on tools and workflows.</p>


        <ul class="social">
                <li>
                    <a  class="sc-linkedin" href="https://pl.linkedin.com/in/krystiansafjan"
                       target="_blank">
                        <i class="fab fa-linkedin"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-github" href="https://github.com/izikeros"
                       target="_blank">
                        <i class="fab fa-github"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-envelope" href="mailto:ksafjan@gmail.com"
                       target="_blank">
                        <i class="fas fa-envelope"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-graduation-cap" href="https://scholar.google.pl/citations?user=UlNJgMoAAAAJ"
                       target="_blank">
                        <i class="fas fa-graduation-cap"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-rss" href="/feeds/all.rss.xml"
                       target="_blank">
                        <i class="fas fa-rss"></i>
                    </a>
                </li>
        </ul>
    </div>

<div class="promo-box">
    <a href="https://ksafjanuser.gumroad.com/l/mlops" class="promo-box-image">
        <img src="/images/mlop_interview_book_cover_3D_300px.jpg" alt="MLOps Interview Book Cover">
    </a>
    
    <p class="promo-box-headline">Ace Your MLOps Interview</p>
    
    <a href="https://ksafjanuser.gumroad.com/l/mlops" class="promo-box-cta">
        Get for $2.99
    </a>
    
    <p class="promo-box-features">50 Q&A • PDF/ePUB/mobi</p>
</div>
</aside>
<main>

        <nav aria-label="Main navigation">
            <a href="http://127.0.0.1:8000/">Home</a>

                <a href="/archives.html">Articles</a>
                <a href="/til.html">Notes</a>
                <a href="/categories.html">Categories</a>
                <a href="/pdfs/Krystian_Safjan_resume_priv.pdf">Resume</a>



            <div id="search" class="nav-search"></div>
            <button type="button" id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
                <i class="fas fa-sun"></i>
                <i class="fas fa-moon"></i>
            </button>
        </nav>

    <article class="single">
        <header>
                
            <p>
                <!-- Posted on: -->
                2022-08-08 


                <br/>
            </p>
            <h1>Install Photoprism on QNAP NAS Using Docker Compose</h1>
            <div class="header-underline"></div>



        </header>




        <div class="article-content">
            <p>Photoprism is a modern, searchable, well organized web gallery of your photos and videos. At the moment of writing, the official documentation, does not contain a dedicated instructions on  how to install Photoprism on QNAP NAS. This article is meant to fill that gap.
Installation described here was done on TS-251+ (Celeron J1900 4 Cores) but should be applicable to wide variety of other QNAP NAS models. There is also possibility to install photoprism using Container Station GUI and modified docker-compose file (see lower in the article).</p>
<!-- MarkdownTOC autolink="true" autoanchor="true" -->

<ul>
<li><a href="#what-is-the-photoprism">What is the photoprism</a></li>
<li><a href="#feature-overview">Feature Overview</a></li>
<li><a href="#installation-on-qnap-nas-from-the-cli">Installation on QNAP NAS from the CLI</a></li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#login-to-your-nas-server-via-ssh">login to your NAS server via SSH</a></li>
<li><a href="#create-photoprism-directory">Create photoprism directory</a></li>
<li><a href="#create-docker-composeyml-file">Create <code>docker-compose.yml</code> file</a></li>
<li><a href="#create-directories-in-sharecontainerphotoprism">Create directories in <code>/share/Container/photoprism</code></a></li>
<li><a href="#run-application-in-the-container">Run application in the container</a><ul>
<li><a href="#using-web-ui">Using web-UI</a></li>
<li><a href="#using-cli">Using CLI</a></li>
</ul>
</li>
<li><a href="#manual-upgrading-photoprism-to-the-latests-version">Manual upgrading Photoprism to the latests version</a></li>
<li><a href="#adding-new-content">Adding new content</a></li>
<li><a href="#performance-tuning">Performance tuning</a></li>
<li><a href="#installation-using-container-station-gui">Installation using Container Station GUI</a></li>
<li><a href="#references">References</a></li>
<li><a href="#updates">Updates</a></li>
</ul>
<!-- /MarkdownTOC -->

<h2 id="what-is-the-photoprism">What is the photoprism</h2>
<p>from the photoprism website:</p>
<blockquote>
<p>PhotoPrism® is an AI-Powered Photos App for the Decentralized Web. It makes use of the latest technologies to tag and find pictures automatically without getting in your way. You can run it at home, on a private server, or in the cloud.</p>
</blockquote>
<p><img alt="Screenshot" src="https://docs.photoprism.app/img/preview.jpg"></p>
<h3 id="feature-overview">Feature Overview</h3>
<blockquote>
<ul>
<li>Browse <a href="https://docs.photoprism.app/user-guide/organize/browse/">all your photos</a> and <a href="https://try.photoprism.app/videos">videos</a> without worrying about <a href="https://docs.photoprism.app/user-guide/settings/library/">RAW conversion, duplicates or video formats</a></li>
<li>Easily find specific pictures using <a href="https://try.photoprism.app/browse?view=cards&amp;q=flower%20color%3Ared">powerful search filters</a></li>
<li>Recognizes <a href="https://try.photoprism.app/people">the faces of your family and friends</a></li>
<li><a href="https://try.photoprism.app/labels">Automatic classification</a> of pictures based on their content and location</li>
<li><a href="https://try.photoprism.app/browse?view=cards&amp;q=type%3Alive">Play Live Photos</a> by hovering over them in <a href="https://try.photoprism.app/albums">albums</a> and search results</li>
<li>Since the <a href="https://try.photoprism.app/">User Interface</a> is a  <a href="https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps">Progressive Web App</a>, it provides a native app-like experience, and you can conveniently install it on the home screen of all major operating systems and mobile devices</li>
<li>Includes 4 high-resolution <a href="https://try.photoprism.app/places">World Maps</a> to bring back the memories of your favorite trips</li>
<li>Metadata is extracted and merged from Exif, XMP, and other sources such as Google Photos</li>
<li>Many more image properties like <a href="https://try.photoprism.app/browse?view=cards&amp;q=color:red">Colors</a>, <a href="https://try.photoprism.app/browse?view=cards&amp;q=mono%3Atrue">Chroma</a>, and <a href="https://try.photoprism.app/review">Quality</a> can be searched as well</li>
<li>Use  <a href="https://link.photoprism.app/photosync">PhotoSync</a> to securely backup iOS and Android phones in the background</li>
<li>WebDAV clients such as Microsoft's Windows Explorer and Apple's Finder <a href="https://docs.photoprism.app/user-guide/sync/webdav/">can connect directly</a> to PhotoPrism, allowing you to open, edit, and delete files from your computer as if they were local</li>
</ul>
<p><strong>NOTE:</strong> I haven't found functionality to add other accounts than administrator. But in my case having only single user is perfectly fine.</p>
</blockquote>
<h2 id="installation-on-qnap-nas-from-the-cli">Installation on QNAP NAS from the CLI</h2>
<h3 id="prerequisites">Prerequisites</h3>
<p>This instruction assumes that you are familiar with using command line interface (CLI).</p>
<ul>
<li>ensure you have installed Container Station which is providing Docker on QNAP NAS</li>
<li>ensure that you have docker in the path</li>
</ul>
<h3 id="login-to-your-nas-server-via-ssh">login to your NAS server via SSH</h3>
<p>from the terminal or use e.g. <code>putty</code> if working on Windows</p>
<h3 id="create-photoprism-directory">Create photoprism directory</h3>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>/share/Container/photoprism
<span class="nb">cd</span><span class="w"> </span>photoprism
</code></pre></div>

<h3 id="create-docker-composeyml-file">Create <code>docker-compose.yml</code> file</h3>
<p>download <code>docker-compose.yml</code> from the link provided in <a href="https://docs.photoprism.app/getting-started/docker-compose/">official documentation</a> :</p>
<div class="highlight"><pre><span></span><code>wget<span class="w"> </span>https://dl.photoprism.app/docker/docker-compose.yml
</code></pre></div>

<p>You can try to use this docker file (compatible with v3 format)</p>
<div class="highlight"><pre><span></span><code><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.8&#39;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">photoprism</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">photoprism/photoprism:latest</span>
<span class="w">    </span><span class="nt">stop_grace_period</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
<span class="w">    </span><span class="c1"># restart: unless-stopped</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mariadb</span>
<span class="w">    </span><span class="nt">security_opt</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">seccomp:unconfined</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apparmor:unconfined</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;2342:2342&quot;</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_ADMIN_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_ADMIN_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;insecure&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_AUTH_MODE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;password&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_SITE_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://localhost:2342/&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_DISABLE_TLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_DEFAULT_TLS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_ORIGINALS_LIMIT</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5000</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_HTTP_COMPRESSION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;gzip&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_LOG_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;info&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_READONLY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_EXPERIMENTAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_DISABLE_CHOWN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_DISABLE_WEBDAV</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_DISABLE_SETTINGS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_DISABLE_TENSORFLOW</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_DISABLE_FACES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_DISABLE_CLASSIFICATION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_DISABLE_VECTORS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_DISABLE_RAW</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_RAW_PRESETS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_SIDECAR_YAML</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_BACKUP_ALBUMS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_BACKUP_DATABASE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_BACKUP_SCHEDULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;daily&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_INDEX_SCHEDULE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_AUTO_INDEX</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_AUTO_IMPORT</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_DETECT_NSFW</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_UPLOAD_NSFW</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_DATABASE_DRIVER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mysql&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_DATABASE_SERVER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mariadb:3306&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_DATABASE_NAME</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;photoprism&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_DATABASE_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;photoprism&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_DATABASE_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;insecure&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_SITE_CAPTION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;AI-Powered</span><span class="nv"> </span><span class="s">Photos</span><span class="nv"> </span><span class="s">App&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_SITE_DESCRIPTION</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">      </span><span class="nt">PHOTOPRISM_SITE_AUTHOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">    </span><span class="nt">working_dir</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/photoprism&quot;</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;~/Pictures:/photoprism/originals&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;./storage:/photoprism/storage&quot;</span>

<span class="w">  </span><span class="nt">mariadb</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mariadb:11</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
<span class="w">    </span><span class="nt">stop_grace_period</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5s</span>
<span class="w">    </span><span class="nt">security_opt</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">seccomp:unconfined</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apparmor:unconfined</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--innodb-buffer-pool-size=512M</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--transaction-isolation=READ-COMMITTED</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--character-set-server=utf8mb4</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--collation-server=utf8mb4_unicode_ci</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--max-connections=512</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--innodb-rollback-on-timeout=OFF</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--innodb-lock-wait-timeout=120</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;./database:/var/lib/mysql&quot;</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">MARIADB_AUTO_UPGRADE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1&quot;</span>
<span class="w">      </span><span class="nt">MARIADB_INITDB_SKIP_TZINFO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1&quot;</span>
<span class="w">      </span><span class="nt">MARIADB_DATABASE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;photoprism&quot;</span>
<span class="w">      </span><span class="nt">MARIADB_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;photoprism&quot;</span>
<span class="w">      </span><span class="nt">MARIADB_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;insecure&quot;</span>
<span class="w">      </span><span class="nt">MARIADB_ROOT_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;insecure&quot;</span>

<span class="w">  </span><span class="nt">watchtower</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">containrrr/watchtower</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
<span class="w">    </span><span class="nt">profiles</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">update</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">WATCHTOWER_CLEANUP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="w">      </span><span class="nt">WATCHTOWER_POLL_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7200</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;/var/run/docker.sock:/var/run/docker.sock&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;~/.docker/config.json:/config.json&quot;</span>
</code></pre></div>

<p>Assuming that you keep your original photos in <code>/share/Container/photos</code> modify  volume mount for <code>photoprism/originals</code>. To do that, edit <code>volumes</code> part of the photoprism service in <code>docker-compose.yml</code> file you just downloaded and provide proper mapping for the <code>/photoprism/originals</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># &quot;/host/folder:/photoprism/folder&quot;                 # Example</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;/share/Container/photos:/photoprism/originals&quot;</span><span class="w"> </span><span class="c1"># Original media files</span>
</code></pre></div>

<blockquote>
<p><strong>NOTE:</strong> Other things you might want to modify in the <code>docker-compose.yml</code> are:</p>
<ul>
<li>default password for the user admin (default is: <code>insecure</code>)</li>
<li>number of workers</li>
<li>disable Tensorflow (used for categorization of photos and face detection)</li>
</ul>
<p>For changing number of workers and disabling TensorFlow see the "Performance tuning" section bellow.</p>
</blockquote>
<h3 id="create-directories-in-sharecontainerphotoprism">Create directories in <code>/share/Container/photoprism</code></h3>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/share/Container/photoprism
mkdir<span class="w"> </span>-p<span class="w"> </span>database
mkdir<span class="w"> </span>-p<span class="w"> </span>import
mkdir<span class="w"> </span>-p<span class="w"> </span>originals
mkdir<span class="w"> </span>-p<span class="w"> </span>storage
</code></pre></div>

<h3 id="run-application-in-the-container">Run application in the container</h3>
<p>Start the container. Pulling images might take few minutes depending on your Internet connection speed.</p>
<div class="highlight"><pre><span></span><code>docker-compose<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>

<blockquote>
<p><strong>NOTE</strong>: From July 2023 Compose V1 invoked as <code>docker-compose</code> stopped receiving updates. It’s also no longer available in new releases of Docker Desktop. Compose V2 was announced in 2020, is written in Go, and is invoked as <code>docker compose</code>.</p>
</blockquote>
<p>after that, Photoprism should be available under:</p>
<div class="highlight"><pre><span></span><code>http://&lt;YOUR-NAS-IP&gt;:2342
</code></pre></div>

<p>You need to login as administrator with default password for the first time, after login remember to change that password in settings.
<img alt="img" src="/images/photoprism/photoprism_change_password.png"></p>
<h4 id="using-web-ui">Using web-UI</h4>
<p>Now, you can trigger indexing your photos and videos using web-UI or from CLI.
<img alt="img" src="/images/photoprism/photoprism_indexing.png"></p>
<h4 id="using-cli">Using CLI</h4>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-ti<span class="w"> </span>photoprism<span class="w"> </span>photoprism<span class="w"> </span>index
</code></pre></div>

<h3 id="manual-upgrading-photoprism-to-the-latests-version">Manual upgrading Photoprism to the latests version</h3>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/share/Container/photoprism/
docker<span class="w"> </span>stop<span class="w"> </span>photoprism
docker<span class="w"> </span>pull<span class="w"> </span>photoprism/photoprism:latest
docker-compose<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>

<p>For automated updates check <a href="https://containrrr.dev/watchtower/">Watchtower</a></p>
<h3 id="adding-new-content">Adding new content</h3>
<ul>
<li>use upload via webDAV</li>
<li>manually upload new pictures and videos to <code>/share/Container/photoprism/import</code> and manually trigger import using CLI:</li>
</ul>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>photoprism<span class="w"> </span>photoprism<span class="w"> </span>import
</code></pre></div>

<p>You can also consider automating import by adding <code>import</code> do the cron (e.g. every midnight)</p>
<h3 id="performance-tuning">Performance tuning</h3>
<p>If you are experiencing performance problems you can reduce number of workers (from documentation):</p>
<blockquote>
<p>Try <a href="https://docs.photoprism.app/getting-started/config-options/#index-workers">reducing the number of workers</a> by setting <code>PHOTOPRISM_WORKERS</code> to a reasonably small value in <code>docker-compose.yml</code>, depending on the CPU performance and number of cores</p>
</blockquote>
<p>or disable TensorFlow:</p>
<blockquote>
<p>As a last measure, you can <a href="https://docs.photoprism.app/getting-started/config-options/#feature-flags">disable the use of TensorFlow</a> for image classification and facial recognition. You ca do it via web-UI settings, cli (<code>--disable-tensorflow</code> option) or set <code>PHOTOPRISM_DISABLE_TENSORFLOW</code> to <code>true</code> in <code>docker-compose.yml</code> and restart container.</p>
</blockquote>
<p><strong>Credits:</strong>
I was able to launch this service thanks to the instructions found on reddit [1] provided by <a href="https://www.reddit.com/user/schol4stiker/">schol4stiker</a>.</p>
<h2 id="installation-using-container-station-gui">Installation using Container Station GUI</h2>
<p>I got message from one of the readers, that he realized, it was better to use Container Station to install Photoprism using its GUI. Open <strong>Container Station &gt; Applications &gt; Create</strong></p>
<p>He named the application 'photoprism' and pasted the docker-compose file (first converted with Claude.ai to Docker Composer v3 format)</p>
<h2 id="references">References</h2>
<ol>
<li><a href="https://www.reddit.com/r/photoprism/comments/vph4ct/comment/ieobj8w/?utm_source=share&amp;utm_medium=web2x&amp;context=3">instruction from reddit</a></li>
<li><a href="https://www.wundertech.net/how-to-setup-photoprism-on-a-synology-nas">How to Setup PhotoPrism on a Synology NAS in 2022 - WunderTech</a></li>
</ol>
<h2 id="updates">Updates</h2>
<ul>
<li>2023-08-11: add note about change in docker compose to v2. Thx Tom Berg.</li>
<li>2024-08-18: under volumes:    zdjecia was changed to photos, <code>/share/Multimedia/photos</code>  was changed to <code>/share/Container/</code>photos for documentation consistency.</li>
<li>2024-08-26: fixed process of manual update of docker images (stop should go before pull)</li>
<li>2024-08-26: fixed path in import section (for consistency)</li>
</ul>
        </div>


        <div class="article-tags">
            <span class="tags-label">Tags:</span>
                <a href="http://127.0.0.1:8000/tag/nas/" class="article-tag">nas</a>
                <a href="http://127.0.0.1:8000/tag/photoprism/" class="article-tag">photoprism</a>
                <a href="http://127.0.0.1:8000/tag/linux/" class="article-tag">Linux</a>
                <a href="http://127.0.0.1:8000/tag/photo-gallery/" class="article-tag">photo-gallery</a>
                <a href="http://127.0.0.1:8000/tag/docker/" class="article-tag">docker</a>
                <a href="http://127.0.0.1:8000/tag/docker-compose/" class="article-tag">docker-compose</a>
                <a href="http://127.0.0.1:8000/tag/qnap/" class="article-tag">qnap</a>
                <a href="http://127.0.0.1:8000/tag/nas-app/" class="article-tag">nas-app</a>
        </div>











    </article>

    <footer>
<p>
  &copy; 2026 Krystian Safjan - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/deed.en_US" target="_blank">Creative Commons Attribution-ShareAlike</a>
</p>    </footer>
</main>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Blog",
  "name": "Krystian Safjan's Blog",
  "url": "http://127.0.0.1:8000",
"image": "/images/profile_new.jpg",  "description": ""
}
</script>


<script src="http://127.0.0.1:8000/pagefind/pagefind-ui.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', function() {
        new PagefindUI({
            element: "#search",
            showSubResults: false,
            showImages: false,
            basePath: "http://127.0.0.1:8000/pagefind/"
        });
    });
</script>

<script src="http://127.0.0.1:8000/theme/js/theme-switcher.js"></script>

<style>
.youtube-embed {
    position: relative;
    width: 100%;
    padding-bottom: 56.25%;
    background: #000;
    border-radius: 0.375rem;
    overflow: hidden;
}
.youtube-embed iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
}
.youtube-embed-wrapper {
    margin-bottom: 1rem;
}
.youtube-embed-info {
    padding: 0.5rem 0.75rem;
    background: var(--color-bg-secondary, #f6f8fa);
    border-radius: 0 0 0.375rem 0.375rem;
    font-size: 0.875rem;
    margin-top: -0.375rem;
}
.youtube-embed-info a {
    text-decoration: none;
    color: inherit;
}
.youtube-embed-info a:hover {
    text-decoration: underline;
}
</style>
<script>
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('pre > code').forEach(function(code) {
        var text = code.textContent.trim();
        if (!text.match(/^https?:\/\/(www\.)?(youtube\.com|youtu\.be)/)) return;

        var lines = text.split('\n');
        var url = lines[0].trim();
        var match = url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/);
        if (!match) return;
        var videoId = match[1];

        var meta = {};
        lines.slice(1).forEach(function(line) {
            var m = line.match(/^(\w+):\s*(.+)$/);
            if (m) meta[m[1].toLowerCase()] = m[2].trim();
        });

        var wrapper = document.createElement('div');
        wrapper.className = 'youtube-embed-wrapper';

        var embed = document.createElement('div');
        embed.className = 'youtube-embed';
        embed.innerHTML = '<iframe src="https://www.youtube-nocookie.com/embed/' + videoId +
            '" allowfullscreen loading="lazy" title="' + (meta.title || 'YouTube video').replace(/"/g, '&quot;') + '"></iframe>';
        wrapper.appendChild(embed);

        if (meta.title || meta.author) {
            var info = document.createElement('div');
            info.className = 'youtube-embed-info';
            var html = meta.title ? '<strong>' + meta.title + '</strong>' : '';
            if (meta.author) {
                html += (meta.title ? ' &bull; ' : '');
                html += meta.authorurl ? '<a href="' + meta.authorurl + '" target="_blank" rel="noopener">' + meta.author + '</a>' : meta.author;
            }
            info.innerHTML = html;
            wrapper.appendChild(info);
        }
        code.closest('pre').replaceWith(wrapper);
    });
});
</script>
</body>
</html>