
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="HandheldFriendly" content="True"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"/>
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap"
              rel="stylesheet">

        <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/stylesheet/style.min.css">



        <link id="pygments-light-theme" rel="stylesheet" type="text/css"
              href="https://www.safjan.com/theme/pygments/github.min.css">



    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/fontawesome.css">
    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/brands.css">
    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/solid.css">

        <link rel="stylesheet" type="text/css"
              href="https://www.safjan.com/styles/custom.css">

        <link href="https://www.safjan.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Krystian Safjan's Blog Atom">

        <link href="https://www.safjan.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
              title="Krystian Safjan's Blog RSS">


<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RM2PKDCCYM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RM2PKDCCYM');
</script>
<!-- End of Google tag (gtag.js) -->



    <meta name="author" content="Krystian Safjan"/>
    <meta name="description" content="Understand innovative artificial intelligence framework that empower large language models (LLMs) by anchoring them to external knowledge sources with accurate, current information."/>
    <meta name="keywords" content="llm, nlp, question-answering">
    <meta expr:content="2023-08-24 00:00:00+02:00" itemprop='datePublished'/>
    <meta expr:content="2023-08-24 00:00:00+02:00" itemprop='dateModified'/>
    <meta property="article:modified_time" content="2023-08-24 00:00:00+02:00"/>
    <meta property="article:published_time" content="2023-08-24 00:00:00+02:00"/>
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Understanding Retrieval-Augmented Generation (RAG) empowering LLMs",
  "datePublished": "2023-08-24 00:00:00+02:00",
  "dateModified": "2023-08-24 00:00:00+02:00"
}








    </script>



  <meta property="og:site_name" content="Krystian Safjan's Blog"/>
  <meta property="og:title" content="Understanding Retrieval-Augmented Generation (RAG) empowering LLMs"/>
  <meta property="og:description" content="Understand innovative artificial intelligence framework that empower large language models (LLMs) by anchoring them to external knowledge sources with accurate, current information."/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="https://www.safjan.com/understanding-retrieval-augmented-generation-rag-empowering-llms/"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2023-08-24 00:00:00+02:00"/>
  <meta property="article:modified_time" content="2023-08-24 00:00:00+02:00"/>
  <meta property="article:author" content="https://www.safjan.com/author/krystian-safjan/">
  <meta property="article:section" content="Machine Learning"/>
  <meta property="article:tag" content="llm"/>
  <meta property="article:tag" content="nlp"/>
  <meta property="article:tag" content="question-answering"/>
  <meta property="og:image" content="https://www.safjan.com//images/head/abstract_9.jpg">

    <meta name="twitter:card" content="summary"/>
    <meta property="twitter:image" content="https://www.safjan.com//images/head/abstract_9.jpg">

    <meta name="twitter:label1" content="Est. reading time"/>
    <meta name="twitter:data1" content="4 min."/>
    <meta name="twitter:site" content="@izikeros"/>
    <meta name="twitter:description" content="<p>Understand innovative artificial intelligence framework that empower large language models (LLMs) by anchoring them to external knowledge sources with accurate, current information.</p>"/>
    <meta name="twitter:title" content="Understanding Retrieval-Augmented Generation (RAG) empowering LLMs"/>


    <title>    Understanding Retrieval-Augmented Generation (RAG) empowering LLMs
</title>


<!-- Google Automatic Ads -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9767732578835199"
     crossorigin="anonymous"></script>
<!-- End of Google Automatic Ads -->


</head>
<body class="light-theme">
<aside>
    <div>
        <a href="https://www.safjan.com/">
                <img src="/images/profile_new.jpg" alt="Krystian Safjan's Blog" title="Krystian Safjan's Blog" width="140" height="140">
        </a>

        <h1>
            <a href="https://www.safjan.com/">Krystian Safjan's Blog</a>
        </h1>

<p>Data Scientist | Researcher | Team Leader<br><br> working at Ernst &amp; Young and writing about <a href="/category/machine-learning.html">Data Science and Visualization</a>, on <a href="/category/machine-learning.html">Machine Learning, Deep Learning</a> and <a href="/tag/nlp/">NLP</a>. There are also some  <a href="/category/howto.html">howto</a> posts on tools and workflows.</p>




        <ul class="social">
                <li>
                    <a  class="sc-linkedin" href="https://pl.linkedin.com/in/krystiansafjan"
                       target="_blank">
                        <i class="fab fa-linkedin"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-github" href="https://github.com/izikeros"
                       target="_blank">
                        <i class="fab fa-github"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-envelope" href="mailto:ksafjan@gmail.com"
                       target="_blank">
                        <i class="fas fa-envelope"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-graduation-cap" href="https://scholar.google.pl/citations?user=UlNJgMoAAAAJ"
                       target="_blank">
                        <i class="fas fa-graduation-cap"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-rss" href="/feeds/all.rss.xml"
                       target="_blank">
                        <i class="fas fa-rss"></i>
                    </a>
                </li>
        </ul>
    </div>

<style>
    .button {
        background-color: yellow;
        color: black;
        border: none;
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
        border-radius: 20px;
    }

    .center {
        text-align: center;
    }

    .container {
        display: grid;
        grid-template-columns: 1fr 1fr;
    }

    .left-col {
    }

    .right-col {
    }

    .image {
        border-radius: 0;
        width: 100%;
    }

    .book-list {
        padding-top:0;
        padding-bottom: 0;
        text-align:left;
        box-sizing: border-box;
        display: block;
        list-style-image: url(/images/shortcode-tick.webp);
        margin-block-start: 1em;
        margin-block-end: 1em;
        margin-inline-start:0;
        margin-inline-end:0;
        padding-inline-start:40px;
    }

    .book-list li {
        font-weight: bold;
    }

    @media (max-width: 600px) {
        .container {
            grid-template-columns: 1fr;
        }
    }

</style>
<div class="container">
    <div class="left-col">
        <a href="https://ksafjanuser.gumroad.com/l/mlops">
            <img src="/images/mlop_interview_book_cover_3D_300px.jpg" class="image" alt="Interview Book Cover">
        </a>

        <div class="center">
            <a href="https://ksafjanuser.gumroad.com/l/mlops">
                <button class="button">Get for $2.99</button>
            </a>
        </div>
    </div>
    <div class="right-col">
        <div>
            <ul class="book-list">
                <li>PDF, ePUB, mobi format ebook, no DRM</li>
                <li>50 questions and answers</li>
                <li>Stories from real projects</li>
                <li>92 multiple choice quiz questions</li>
                <li>80 pages</li>
            </ul>
        </div>
    </div>
</div>
</aside>
<main>

        <nav>
            <a href="https://www.safjan.com/">Home</a>

                <a href="/archives.html">Articles</a>
                <a href="/til.html">Notes</a>
                <a href="/categories.html">Categories</a>
                <a href="/pdfs/Krystian_Safjan_resume_priv.pdf">Resume</a>

                <a href="https://www.safjan.com/feeds/all.atom.xml">Atom</a>

                <a href="https://www.safjan.com/feeds/all.rss.xml">RSS</a>
        </nav>

    <article class="single">
        <header>
                
            <p>
                <!-- Posted on: -->
                2023-08-24 



                    <span id="post-share-links">
    &nbsp;&nbsp;&nbsp;Share on:
    <a href="https://twitter.com/intent/tweet?text=Understanding%20Retrieval-Augmented%20Generation%20%28RAG%29%20empowering%20LLMs&url=https%3A//www.safjan.com/understanding-retrieval-augmented-generation-rag-empowering-llms/&hashtags=llm,nlp,question-answering" target="_blank" title="Share on Twitter">Twitter</a>
    |
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//www.safjan.com/understanding-retrieval-augmented-generation-rag-empowering-llms/" target="_blank" title="Share on Facebook">Facebook</a>
    |
    <a href="https://news.ycombinator.com/submitlink?t=Understanding%20Retrieval-Augmented%20Generation%20%28RAG%29%20empowering%20LLMs&u=https%3A//www.safjan.com/understanding-retrieval-augmented-generation-rag-empowering-llms/" target="_blank" title="Share on HackerNews">HackerNews</a>
    |
    <a href="https://www.reddit.com/submit?url=https%3A//www.safjan.com/understanding-retrieval-augmented-generation-rag-empowering-llms/&title=Understanding%20Retrieval-Augmented%20Generation%20%28RAG%29%20empowering%20LLMs" target="_blank" title="Share via Reddit">Reddit</a>
  </span>
                <br/>
            </p>
            <h1 id="understanding-retrieval-augmented-generation-rag-empowering-llms">Understanding Retrieval-Augmented Generation (RAG) empowering LLMs</h1>
            <div class="header-underline"></div>
                <p class="summary"><p>Understand innovative artificial intelligence framework that empower large language models (LLMs) by anchoring them to external knowledge sources with accurate, current information.</p></p>

                <div style="width: 100%; padding-bottom: 30px; position: relative;">
                    <a href="https://www.safjan.com/understanding-retrieval-augmented-generation-rag-empowering-llms/">
                        <img style="width: 100%; "
                             src="/images/head/abstract_9.jpg" alt="">
                    </a>
                </div>


        </header>


        <div>
            <h2>Introduction: Understanding Retrieval-Augmented Generation (RAG)</h2>
<p>Retrieval-Augmented Generation, commonly referred to as RAG, represents an ingenious integration of pretrained dense retrieval (DPR) and <a href="https://en.wikipedia.org/wiki/Seq2seq">sequence-to-sequence</a> models. The process involves retrieving documents using DPR and subsequently transmitting them to a seq2seq model. Through a process of marginalization, these models then produce desired outputs. The retriever and seq2seq modules commence their operations as pretrained models, and through a joint fine-tuning process, they adapt collaboratively, thus enhancing both retrieval and generation for specific downstream tasks. <strong>This innovative artificial intelligence framework serves as a means to empower large language models (LLMs) by anchoring them to external knowledge sources.</strong> Consequently, this strategic approach ensures the availability of accurate, current information, thereby granting users valuable insights into the generative mechanisms of these models. For a comprehensive understanding of the RAG technique, we offer an in-depth exploration, commencing with a simplified overview and progressively delving into more intricate technical facets.</p>
<p><img alt="" src="https://learn.microsoft.com/en-us/azure/machine-learning/media/concept-retrieval-augmented-generation/retrieval-augmented-generation-walkthrough.png?view=azureml-api-2#lightbox"></p>
<p>Figure 1. Data processing, storage and referencing in RAG method. Source: <a href="https://learn.microsoft.com/en-us/azure/machine-learning/concept-retrieval-augmented-generation?view=azureml-api-2">Microsoft</a></p>
<h2>The Need for RAG in Large Language Models</h2>
<p>Large language models, while powerful, can sometimes be inconsistent in their responses. They may provide accurate answers to certain questions but struggle with others, often regurgitating random facts from their training data. This inconsistency stems from the fact that LLMs understand the statistical relationships between words but not their actual meanings.</p>
<p>To address this issue, researchers have developed the RAG <strong>framework, which improves the quality of LLM-generated responses by grounding the model in external sources of knowledge.</strong> This approach not only ensures access to the most current and reliable facts but also allows users to verify the model's claims for accuracy and trustworthiness.</p>
<h2>The 'Open Book' Approach of RAG</h2>
<p>RAG operates in <strong>two main phases: retrieval and content generation</strong>. During the retrieval phase, algorithms search for and retrieve relevant snippets of information based on the user's prompt or question. These facts can come from various sources, such as indexed documents on the internet or a closed-domain enterprise setting for added security and reliability.</p>
<p>In the generative phase, the LLM uses the retrieved information and its internal representation of training data to synthesize a tailored answer for the user. </p>
<blockquote>
<p>This approach is akin to an "open book" exam, where the model can browse through content in a book rather than relying solely on its memory.</p>
</blockquote>
<p><img alt="RAG" src="/images/retrieval_augmented_generation/retrival_augmented_generation.jpg">
Figure 2. RAG operation. Information preparation and storage. Augmenting prompt with external information.</p>
<h2>Personalized and Verifiable Responses with RAG</h2>
<p>RAG allows LLM-powered chatbots to provide more personalized answers without the need for human-written scripts. By reducing the need to continuously train the model on new data, RAG can lower the computational and financial costs of running LLM-powered chatbots in an enterprise setting.</p>
<p>Moreover, RAG enables LLMs to generate more specific, diverse, and factual language compared to traditional parametric-only seq2seq models. This feature is particularly useful for businesses that require up-to-date information and verifiable responses.</p>
<h2>Challenges and Future Directions</h2>
<p>Despite its advantages, RAG is not without its challenges. For instance, <strong>LLMs may struggle to recognize when they don't know the answer</strong> to a question, leading to incorrect or misleading information. To address this issue, researchers are working on fine-tuning LLMs to recognize unanswerable questions and probe for more detail until they can provide a definitive answer.</p>
<p>Furthermore, there is ongoing research to improve both the retrieval and generation aspects of RAG. This includes <strong>finding and fetching the most relevant information possible and structuring that information</strong> to elicit the richest responses from the LLM.</p>
<h2>Conclusion</h2>
<p>Retrieval-Augmented Generation offers a promising solution to the limitations of large language models by grounding them in external knowledge sources. By adopting RAG, businesses can achieve customized solutions, maintain data relevance, and optimize costs while harnessing the reasoning capabilities of LLMs. As research continues to advance in this area, we can expect even more powerful and efficient language models in the future.</p>
<h2>References</h2>
<ul>
<li>Original paper <a href="https://arxiv.org/abs/2005.11401">Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks</a> by Patrick Lewis et al. (available as <a href="https://paperswithcode.com/method/rag">paper with code</a>)</li>
<li>Exemplary notebooks on amazon Sagemaker:<ul>
<li><a href="https://sagemaker-examples.readthedocs.io/en/latest/introduction_to_amazon_algorithms/jumpstart-foundation-models/question_answering_retrieval_augmented_generation/question_answering_jumpstart_knn.html">Retrieval-Augmented Generation: Question Answering based on Custom Dataset</a></li>
<li><a href="https://sagemaker-examples.readthedocs.io/en/latest/introduction_to_amazon_algorithms/jumpstart-foundation-models/question_answering_retrieval_augmented_generation/question_answering_langchain_jumpstart.html">Retrieval-Augmented Generation: Question Answering based on Custom Dataset with Open-sourced LangChain Library</a></li>
</ul>
</li>
</ul>
        </div>




            <div class="bibtex-note">
                <p><b>To cite this article:</b></p>
                <pre>@article{Saf2023Understanding,
    author  = {Krystian Safjan},
    title   = {Understanding Retrieval-Augmented Generation (RAG) empowering LLMs},
    journal = {Krystian's Safjan Blog},
    year    = {2023},
}</pre>
            </div>
        <div class="tag-cloud">
            <p>
                    <br/><br/>Tags:&nbsp;
                        <a href="https://www.safjan.com/tag/llm/">llm</a>
                        <a href="https://www.safjan.com/tag/nlp/">nlp</a>
                        <a href="https://www.safjan.com/tag/question-answering/">question-answering</a>
            </p>
        </div>








            <div class="related-posts">
                <h4>You might enjoy</h4>
                <ul class="related-posts">
                        <li><a href="https://www.safjan.com/language-models-for-knowledge-management-in-corporate/">Leveraging Language Models in Corporate Environments - The Future of Knowledge Management</a></li>
                        <li><a href="https://www.safjan.com/prompt_discivery-large-language-models-llms-prompt-engineering/">Prompt Discovery in the Context of Large Language Models (LLMs) and Prompt Engineering</a></li>
                        <li><a href="https://www.safjan.com/pros-and-cons-of-reliance-on-ai-generating-models/">New Cognitive Skills in the Age of AI Tailored Information Presentation</a></li>
                        <li><a href="https://www.safjan.com/split-glued-or-joined-words/">Split glued or joined words</a></li>
                        <li><a href="https://www.safjan.com/text-vectorization-with-vectorhub-and-sentence-transformers/">Easy Text Vectorization With VectorHub and Sentence Transformers</a></li>
                </ul>
            </div>

  <div class="neighbors">
    <a class="btn float-left" href="https://www.safjan.com/Create Self-Hosted Python Package Repository/" title="Create Self-Hosted Python Package Repository - General Guide">
      <i class="fa fa-angle-left"></i> Previous Post
    </a>
    <a class="btn float-right" href="https://www.safjan.com/bearer-token-authentication-for-api/" title="Bearer Token Authentication for API">
      Next Post <i class="fa fa-angle-right"></i>
    </a>
  </div>


    </article>

    <footer>
<p>
  &copy; 2023 Krystian Safjan - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/deed.en_US" target="_blank">Creative Commons Attribution-ShareAlike</a>
</p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
</main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Krystian Safjan's Blog ",
  "url" : "https://www.safjan.com",
  "image": "/images/profile_new.jpg",
  "description": ""
}
</script>

</body>
</html>