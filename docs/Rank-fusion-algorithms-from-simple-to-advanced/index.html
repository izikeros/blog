
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="color-scheme" content="light dark"/>
    <script>
      (function() {
        var theme = localStorage.getItem('theme-preference');
        if (theme === 'dark' || theme === 'light') {
          document.documentElement.setAttribute('data-theme', theme);
        }
      })();
    </script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="HandheldFriendly" content="True"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"/>
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap"
              rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="http://127.0.0.1:8000/theme/stylesheet/style.css">


    <link rel="stylesheet" type="text/css" href="http://127.0.0.1:8000/theme/pygments/github.min.css">


    <link rel="stylesheet" type="text/css" href="http://127.0.0.1:8000/theme/font-awesome/css/fontawesome.css">
    <link rel="stylesheet" type="text/css" href="http://127.0.0.1:8000/theme/font-awesome/css/brands.css">
    <link rel="stylesheet" type="text/css" href="http://127.0.0.1:8000/theme/font-awesome/css/solid.css">

    <link rel="stylesheet" href="http://127.0.0.1:8000/pagefind/pagefind-ui.css">

        <link rel="stylesheet" type="text/css"
              href="http://127.0.0.1:8000/styles/custom.css">




    <link rel="apple-touch-icon" sizes="180x180" href="http://127.0.0.1:8000/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="http://127.0.0.1:8000/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="http://127.0.0.1:8000/favicon-16x16.png">
    <link rel="shortcut icon" href="http://127.0.0.1:8000/favicon.ico">
    <link rel="manifest" href="http://127.0.0.1:8000/site.webmanifest">
    <meta name="theme-color" content="#333333">
    <meta name="apple-mobile-web-app-title" content="Krystian Safjan's Blog">





    <meta name="author" content="Krystian Safjan"/>
    <meta name="description" content="Learn about rank fusion algorithms, starting from the simple Borda method and progressing to advanced techniques like LambdaMART and neural rank fusion, to improve combined ranking reliability."/>
    <meta name="keywords" content="rank-fusion, rank, search, hybrid-search, borda, combining-probability-mass-function, rank-biased-precision, neural-rank-fusion, reciprocal-rank-fusion">


  <meta property="og:site_name" content="Krystian Safjan's Blog"/>
  <meta property="og:title" content="Rank Fusion Algorithms - From Simple to Advanced"/>
  <meta property="og:description" content="Learn about rank fusion algorithms, starting from the simple Borda method and progressing to advanced techniques like LambdaMART and neural rank fusion, to improve combined ranking reliability."/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="http://127.0.0.1:8000/Rank-fusion-algorithms-from-simple-to-advanced/"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2023-07-28 00:00:00+02:00"/>
  <meta property="article:modified_time" content="2024-07-14 00:00:00+02:00"/>
  <meta property="article:author" content="http://127.0.0.1:8000/author/krystian-safjan/"/>
  <meta property="article:section" content="note"/>
  <meta property="article:tag" content="rank-fusion"/>
  <meta property="article:tag" content="rank"/>
  <meta property="article:tag" content="search"/>
  <meta property="article:tag" content="hybrid-search"/>
  <meta property="article:tag" content="borda"/>
  <meta property="article:tag" content="combining-probability-mass-function"/>
  <meta property="article:tag" content="rank-biased-precision"/>
  <meta property="article:tag" content="neural-rank-fusion"/>
  <meta property="article:tag" content="reciprocal-rank-fusion"/>
  <meta property="og:image" content="/images/profile_new.jpg"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image" content="/images/profile_new.jpg"/>
    <meta name="twitter:image:alt" content="Krystian Safjan's Blog"/>


    <meta name="twitter:site" content="@izikeros"/>
    <meta name="twitter:creator" content="@izikeros"/>
    <meta name="twitter:title" content="Rank Fusion Algorithms - From Simple to Advanced"/>
    <meta name="twitter:description" content="Learn about rank fusion algorithms, starting from the simple Borda method and progressing to advanced techniques like LambdaMART and neural rank fusion, to improve combined ranking reliability."/>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://127.0.0.1:8000/Rank-fusion-algorithms-from-simple-to-advanced/"
  },
  "headline": "Rank Fusion Algorithms - From Simple to Advanced",
  "datePublished": "2023-07-28T00:00:00+02:00",
  "dateModified": "2024-07-14T00:00:00+02:00",
  "author": {
    "@type": "Person",
    "name": "Krystian Safjan",
    "url": "http://127.0.0.1:8000/author/krystian-safjan/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Krystian Safjan's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "/images/profile_new.jpg"
    }  },
"image": "/images/profile_new.jpg",  "url": "http://127.0.0.1:8000/Rank-fusion-algorithms-from-simple-to-advanced/",
  "description": "Learn about rank fusion algorithms, starting from the simple Borda method and progressing to advanced techniques like LambdaMART and neural rank fusion, to...",
  "articleSection": "note",
  "inLanguage": "en",
  "keywords": "rank-fusion, rank, search, hybrid-search, borda, combining-probability-mass-function, rank-biased-precision, neural-rank-fusion, reciprocal-rank-fusion",
  "wordCount": 1271,
  "speakable": {
    "@type": "SpeakableSpecification",
    "cssSelector": ["article h1", ".summary", ".tldr", "article \u003e p:first-of-type"]
  }}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "http://127.0.0.1:8000/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "note",
      "item": "http://127.0.0.1:8000/category/note.html"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Rank Fusion Algorithms - From Simple to Advanced"
    }
  ]
}
</script>



<meta name="ai:summary" content="Learn about rank fusion algorithms, starting from the simple Borda method and progressing to advanced techniques like LambdaMART and neural rank fusion, to improve combined ranking reliability.">

<meta name="ai:topics" content="rank-fusion, rank, search, hybrid-search, borda, combining-probability-mass-function, rank-biased-precision, neural-rank-fusion, reciprocal-rank-fusion">



<meta name="ai:word-count" content="1271">
<meta name="ai:reading-time" content="6 min">

<meta name="ai:section" content="note">



<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">

    <title>    Rank Fusion Algorithms - From Simple to Advanced
</title>



<!-- Google Automatic Ads -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9767732578835199"
     crossorigin="anonymous"></script>
<!-- End of Google Automatic Ads -->


</head>
<body>
<div id="reading-progress" class="reading-progress"></div>
<aside>
    <div>
        <a href="http://127.0.0.1:8000/">
                <img src="/images/profile_new.jpg" alt="Krystian Safjan's Blog" title="Krystian Safjan's Blog" width="140" height="140">
        </a>

        <h1>
            <a href="http://127.0.0.1:8000/">Krystian Safjan's Blog</a>
        </h1>

<p>Data Scientist | Researcher | Team Leader<br><br> working at Ernst &amp; Young and writing about <a href="/category/machine-learning.html">Data Science and Visualization</a>, on <a href="/category/machine-learning.html">Machine Learning, Deep Learning</a> and <a href="/tag/nlp/">NLP</a>. There are also some <a href="/category/howto.html">howto</a> posts on tools and workflows.</p>


        <ul class="social">
                <li>
                    <a  class="sc-linkedin" href="https://pl.linkedin.com/in/krystiansafjan"
                       target="_blank">
                        <i class="fab fa-linkedin"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-github" href="https://github.com/izikeros"
                       target="_blank">
                        <i class="fab fa-github"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-envelope" href="mailto:ksafjan@gmail.com"
                       target="_blank">
                        <i class="fas fa-envelope"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-graduation-cap" href="https://scholar.google.pl/citations?user=UlNJgMoAAAAJ"
                       target="_blank">
                        <i class="fas fa-graduation-cap"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-rss" href="/feeds/all.rss.xml"
                       target="_blank">
                        <i class="fas fa-rss"></i>
                    </a>
                </li>
        </ul>
    </div>

<div class="promo-box">
    <a href="https://ksafjanuser.gumroad.com/l/mlops" class="promo-box-image">
        <img src="/images/mlop_interview_book_cover_3D_300px.jpg" alt="MLOps Interview Book Cover">
    </a>
    
    <p class="promo-box-headline">Ace Your MLOps Interview</p>
    
    <a href="https://ksafjanuser.gumroad.com/l/mlops" class="promo-box-cta">
        Get for $2.99
    </a>
    
    <p class="promo-box-features">50 Q&A â€¢ PDF/ePUB/mobi</p>
</div>
</aside>
<main>

        <nav aria-label="Main navigation">
            <a href="http://127.0.0.1:8000/">Home</a>

                <a href="/archives.html">Articles</a>
                <a href="/til.html">Notes</a>
                <a href="/categories.html">Categories</a>
                <a href="/pdfs/Krystian_Safjan_resume_priv.pdf">Resume</a>



            <div id="search" class="nav-search"></div>
            <button type="button" id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
                <i class="fas fa-sun"></i>
                <i class="fas fa-moon"></i>
            </button>
        </nav>

    <article class="single">
        <header>
                
            <p>
                <!-- Posted on: -->
                2023-07-28 


                <br/>
            </p>
            <h1>Rank Fusion Algorithms - From Simple to Advanced</h1>
            <div class="header-underline"></div>



        </header>




        <div class="article-content">
            <h2 id="introduction">Introduction</h2>
<p>Rank fusion is a fundamental technique used in various domains, including data science and search engine optimization, to combine multiple ranked lists into a single, more reliable ranking. This process aims to exploit the strengths of individual ranking algorithms and mitigate their weaknesses, leading to improved overall performance. In this blog post, we will explore a range of rank fusion algorithms, starting from simple yet effective methods to advanced techniques employed by tech giants to achieve state-of-the-art results. If you want to analyse rank changes over time in a visual manner, you might be interested in using [[2024-06-07-rank_flow_for_retriever_visual_evaluation|rankflow]] package.</p>
<!-- MarkdownTOC levels="2,3" autolink="true" autoanchor="true" -->

<ul>
<li><a href="#algorithms">Algorithms</a><ul>
<li><a href="#borda-algorithm">Borda Algorithm</a></li>
<li><a href="#combining-probability-mass-function-cpmf">Combining Probability Mass Function (CPMF)</a></li>
<li><a href="#rank-biased-precision-rbp">Rank-Biased Precision (RBP)</a></li>
<li><a href="#lambdamart">LambdaMART</a></li>
<li><a href="#neural-rank-fusion">Neural Rank Fusion</a></li>
<li><a href="#reciprocal-rank-fusion">Reciprocal rank fusion</a></li>
</ul>
</li>
<li><a href="#conclusion">Conclusion</a></li>
<li><a href="#references">References</a></li>
</ul>
<!-- /MarkdownTOC -->

<h2 id="algorithms">Algorithms</h2>
<h3 id="borda-algorithm">Borda Algorithm</h3>
<p>The Borda algorithm is one of the simplest rank fusion techniques. It assigns scores to items based on their positions in the individual rankings and then combines these scores to obtain a fused ranking. In the context of search engine results, each document receives points based on its position in the ranked lists. The points are then summed up to form the final rank.</p>
<p>Consider $n$ ranked lists ${R_1, R_2, \ldots, R_n}$ with $m$ items. The Borda algorithm assigns points to each item $i$ in the following way:</p>
<p>$$
\text{Borda Score}(i) = \sum_{j=1}^{n} (m - \text{rank}_j(i))
$$
Where $\text{rank}_j(i)$ denotes the position of item $i$ in the $j$th ranked list.</p>
<p>The Borda algorithm is easy to implement, but it might lag in performance for large datasets or when the individual rankings are significantly diverse.</p>
<blockquote>
<p>See also: [[difference_between_borda_count_and_reciprocial_rank_fussion]] for algorithm characterization and examples.</p>
</blockquote>
<h3 id="combining-probability-mass-function-cpmf">Combining Probability Mass Function (CPMF)</h3>
<p>CPMF is a probabilistic rank fusion method that incorporates the probability of an item being at a certain rank in individual lists. It assumes that the rankings are probabilistic and uses the Probability Mass Function (PMF) to calculate the fused ranking. CPMF outperforms Borda for diverse and noisy datasets.</p>
<p>Let $p_{ij}$ be the probability that item $i$ appears at rank $j$ in the $n$ lists. The CPMF score for item $i$ is given by:</p>
<p>$$
\text{CPMF Score}(i) = \sum_{j=1}^{m} p_{ij}
$$</p>
<p>The probabilities $p_{ij}$ can be estimated using techniques like the <a href="https://hturner.github.io/PlackettLuce/articles/Overview.html">Plackett-Luce model</a> or the Thurstone-Mosteller model.</p>
<h3 id="rank-biased-precision-rbp">Rank-Biased Precision (RBP)</h3>
<p>RBP is a rank fusion method widely used in information retrieval systems. It incorporates a user-defined persistence parameter $p$ to reflect the probability that a user will examine the search results up to a certain rank. This parameter allows the search engine to optimize rankings based on user behavior.</p>
<p>For a given ranked list $R_j$, the RBP score is calculated as follows:</p>
<p>$$
\text{RBP Score}(R_j) = (1 - p) \sum_{k=1}^{m} p^{k-1} \text{rel}(R_j[k])
$$
Where $\text{rel}(R_j[k])$ is an indicator function representing the relevance of the item at rank $k$ in list $R_j$.</p>
<p>RBP provides more flexibility in tuning the importance of different ranks based on user preferences.</p>
<h3 id="lambdamart">LambdaMART</h3>
<p>LambdaMART is an advanced algorithm used by tech giants like Microsoft and Yahoo for learning-to-rank tasks. It is based on the gradient boosting framework and employs LambdaRank, which optimizes the ListNet loss function using gradient descent.</p>
<p>The LambdaMART algorithm involves constructing a set of weak rankers (usually decision trees) that are iteratively refined to minimize the LambdaRank objective, which directly measures the pairwise disagreement between ranks.</p>
<p>$$
\text{LambdaRank Objective} = \sum_{i=1}^{m} \sum_{j=1}^{m} \text{DCG gain}(i, j) \cdot \text{Lambda}(i, j)
$$</p>
<p>Where $\text{DCG gain}(i, j)$ is the gain of swapping items at ranks $i$ and $j$ in the ranking, and $\text{Lambda}(i, j)$ is a weight function that depends on the gradients of the individual models.</p>
<p>LambdaMART's ability to optimize for ranking measures directly contributes to its superior performance in learning-to-rank scenarios.</p>
<h3 id="neural-rank-fusion">Neural Rank Fusion</h3>
<p>With the rise of deep learning, neural rank fusion methods have gained popularity due to their ability to learn complex patterns from data. Neural rank fusion models typically employ techniques like siamese networks or transformer-based architectures to process individual rankings and generate a fused ranking.</p>
<p>In a siamese network-based approach, the individual rankings are fed into two parallel networks with shared weights. The networks learn to map the rankings into a common embedding space, where the fused ranking is generated based on similarity scores.</p>
<p>On the other hand, transformer-based rank fusion models utilize attention mechanisms to process and combine individual rankings effectively.</p>
<p>Neural rank fusion methods often outperform traditional algorithms when sufficient training data is available, but they may require substantial computational resources.</p>
<h3 id="reciprocal-rank-fusion">Reciprocal Rank Fusion</h3>
<p>The <a href="https://plg.uwaterloo.ca/~gvcormac/cormacksigir09-rrf.pdf">Reciprocal Rank Fusion (RRF)</a> is an advanced algorithmic technique designed to amalgamate multiple result sets, each having distinct relevance indicators, into a unified result set. One of the key advantages of RRF is its ability to deliver high-quality results without the necessity for any tuning. Moreover, it does not mandate the relevance indicators to be interconnected or similar in nature.</p>
<p>Diving deeper into the algorithm, RRF is based on the concept of reciprocal rank. The reciprocal rank of a document is the multiplicative inverse of its rank. In the context of information retrieval, the rank of a document is its position in a list of documents sorted by relevance. The reciprocal rank is used to give higher weight to documents that appear earlier in the list.</p>
<p>The RRF algorithm combines the reciprocal ranks of the same document from different result sets to compute a combined score. The combined score is then used to rank the documents in the final result set. The formula used in the RRF algorithm is as follows:</p>
<p>$$
\text{RRF Score} = \frac{1}{k + rank}
$$</p>
<p>Where $k$ is a constant (usually set to 60), and $rank$ is the rank of the document in a particular result set. The RRF score is calculated for each document in each result set, and the scores are then summed up to get the final score for each document.</p>
<p>The properties of the RRF algorithm include its simplicity, effectiveness, and robustness. It is simple because it only requires the ranks of the documents and does not need any tuning. It is effective because it can combine result sets with different relevance indicators and still produce high-quality results. It is robust because it is not sensitive to the choice of $k$ and can handle a large number of result sets.</p>
<blockquote>
<p>See also [[difference_between_borda_count_and_reciprocial_rank_fussion]] for algorithm characterization and examples and [[implementing_reciprocal_rank_fusion_in_python]].</p>
</blockquote>
<h2 id="conclusion">Conclusion</h2>
<p>Rank fusion serves as a potent tool in the arsenal of data scientists and search engine experts, enhancing the efficacy of ranking performance. The spectrum of rank fusion algorithms ranges from the <strong>straightforward Borda algorithm</strong> to the more complex Neural Rank Fusion, each tailored to meet specific scenarios and data attributes. While the <strong>Borda</strong> algorithm is <strong>appreciated</strong> for its <strong>simplicity</strong> and <strong>ease of implementation</strong>, more advanced techniques like <strong>LambdaMART</strong> and <strong>Neural Rank Fusion</strong> are capable of delivering <strong>cutting-edge results for large-scale applications</strong>.</p>
<p>Incorporating the Reciprocal Rank Fusion (RRF) into this discussion, it stands out for its ability to <strong>combine multiple result sets with varying relevance indicators</strong> <strong>without the need for tuning</strong>. This makes it a robust and effective choice for many applications.</p>
<p><strong>Edits</strong>:</p>
<ul>
<li>2024-07-15 - Added cross-link to borda vs reciprocal rank comparison and reciprocal rank implementation in Python.</li>
<li>2024-07-14 - Added reference to rankflow (ranks plotting)</li>
<li>2024-03-06 - Added Panjete/rankAggr to references</li>
<li>2023-10-09 - Added "Reciprocal Rank Fusion", rewrite conclusion</li>
</ul>
<h2 id="references">References</h2>
<ol>
<li>Wikipedia article: <a href="https://en.wikipedia.org/wiki/Borda_count">Borda algorithm</a></li>
<li><a href="https://www.microsoft.com/en-us/research/publication/from-ranknet-to-lambdarank-to-lambdamart-an-overview/">From RankNet to LambdaRank to LambdaMART: An Overview</a></li>
<li><a href="https://www.microsoft.com/en-us/research/publication/from-ranknet-to-lambdarank-to-lambdamart-an-overview/">Burges, Christopher. "From RankNet to LambdaRank to LambdaMART: An overview." Learning 11.23-581 (2010): 81.</a></li>
<li><a href="https://people.eng.unimelb.edu.au/jzobel/fulltext/acmtois08.pdf">Rank-Biased Precision for Measurement of Retrieval Effectiveness</a></li>
<li><a href="https://plg.uwaterloo.ca/~gvcormac/cormacksigir09-rrf.pdf">Reciprocal rank fusion (RRF)</a></li>
<li><a href="https://github.com/Panjete/rankAggr">GitHub - Panjete/rankAggr: Analysis and implementational details of rank aggregation methods for combing results of multiple engines to achieve best mAP and P@5,10 values</a></li>
</ol>
<p>X::[[posts/notes/implementing_reciprocal_rank_fusion_in_python]]
X::[[borda_count_python]]
X::[[difference_between_borda_count_and_reciprocial_rank_fussion]]</p>
        </div>


        <div class="article-tags">
            <span class="tags-label">Tags:</span>
                <a href="http://127.0.0.1:8000/tag/rank-fusion/" class="article-tag">rank-fusion</a>
                <a href="http://127.0.0.1:8000/tag/rank/" class="article-tag">rank</a>
                <a href="http://127.0.0.1:8000/tag/search/" class="article-tag">search</a>
                <a href="http://127.0.0.1:8000/tag/hybrid-search/" class="article-tag">hybrid-search</a>
                <a href="http://127.0.0.1:8000/tag/borda/" class="article-tag">borda</a>
                <a href="http://127.0.0.1:8000/tag/combining-probability-mass-function/" class="article-tag">combining-probability-mass-function</a>
                <a href="http://127.0.0.1:8000/tag/rank-biased-precision/" class="article-tag">rank-biased-precision</a>
                <a href="http://127.0.0.1:8000/tag/neural-rank-fusion/" class="article-tag">neural-rank-fusion</a>
                <a href="http://127.0.0.1:8000/tag/reciprocal-rank-fusion/" class="article-tag">reciprocal-rank-fusion</a>
        </div>











    </article>

    <footer>
<p>
  &copy; 2026 Krystian Safjan - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/deed.en_US" target="_blank">Creative Commons Attribution-ShareAlike</a>
</p>    </footer>
</main>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Blog",
  "name": "Krystian Safjan's Blog",
  "url": "http://127.0.0.1:8000",
"image": "/images/profile_new.jpg",  "description": ""
}
</script>


<script src="http://127.0.0.1:8000/pagefind/pagefind-ui.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', function() {
        new PagefindUI({
            element: "#search",
            showSubResults: false,
            showImages: false,
            basePath: "http://127.0.0.1:8000/pagefind/"
        });
    });
</script>

<script src="http://127.0.0.1:8000/theme/js/theme-switcher.js"></script>
</body>
</html>