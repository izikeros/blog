
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="https://www.safjan.com/theme/pygments/github.min.css">



  <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/solid.css">

  <link rel="stylesheet" type="text/css" href="https://www.safjan.com/styles/custom.css">

    <link href="https://www.safjan.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Krystian Safjan's Blog Atom">

    <link href="https://www.safjan.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Krystian Safjan's Blog RSS">


<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-117080232-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-117080232-1');
</script>
<!-- End of Google tag (gtag.js) -->



<meta name="author" content="Krystian Safjan" />
<meta name="description" content="How to create automatically commits if any file in the watched folder was changed" />
<meta name="keywords" content="git, autocommit, note-taking, notes, automatic, automation, git/autocommit">
<meta expr:content="2021-09-14 00:00:00+02:00" itemprop='datePublished'/>
<meta expr:content="2022-09-01 00:00:00+02:00" itemprop='dateModified'/>
<meta property="article:modified_time" content="2022-09-01 00:00:00+02:00"/>
<meta property="article:published_time" content="2021-09-14 00:00:00+02:00"/>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Git - autocommit on file changes",
  "datePublished": "2021-09-14 00:00:00+02:00",
  "dateModified": "2022-09-01 00:00:00+02:00"
}
</script>



  <meta property="og:site_name" content="Krystian Safjan's Blog"/>
  <meta property="og:title" content="Git - autocommit on file changes"/>
  <meta property="og:description" content="How to create automatically commits if any file in the watched folder was changed"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="https://www.safjan.com/git-autocommit-on-file-changes/"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2021-09-14 00:00:00+02:00"/>
  <meta property="article:modified_time" content="2022-09-01 00:00:00+02:00"/>
  <meta property="article:author" content="https://www.safjan.com/author/krystian-safjan/">
  <meta property="article:section" content="note"/>
  <meta property="article:tag" content="git"/>
  <meta property="article:tag" content="autocommit"/>
  <meta property="article:tag" content="note-taking"/>
  <meta property="article:tag" content="notes"/>
  <meta property="article:tag" content="automatic"/>
  <meta property="article:tag" content="automation"/>
  <meta property="article:tag" content="git/autocommit"/>
  <meta property="og:image" content="/images/profile_new.jpg">

    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image" content="https://www.safjan.com/"/>
    <meta name="twitter:label1" content="Est. reading time"/>
    <meta name="twitter:data1" content="4 min."/>
    <meta name="twitter:site" content="@izikeros"/>
    <meta name="twitter:description" content="<p>How to create automatically commits if any file in the watched folder was changed</p>"/>
    <meta name="twitter:title" content="Git - autocommit on file changes"/>


  <title>Git - autocommit on file changes</title>


<!-- Google Automatic Ads -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9767732578835199"
     crossorigin="anonymous"></script>
<!-- End of Google Automatic Ads -->


</head>
<body class="light-theme">
  <aside>
    <div>
      <a href="https://www.safjan.com/">
        <img src="/images/profile_new.jpg" alt="Krystian Safjan's Blog" title="Krystian Safjan's Blog" width="140" height="140">
      </a>

      <h1>
        <a href="https://www.safjan.com/">Krystian Safjan's Blog</a>
      </h1>

<p>Data Scientist | Researcher | Team Leader<br><br> working at Ernst &amp; Young and writing about <a href="/category/data-science.html">Data Science and Visualization</a>, on <a href="/category/data-science.html">Machine Learning, Deep Learning</a> and <a href="/tag/nlp/">NLP</a>. There are also some  <a href="/category/howto.html">howto</a> posts on tools and workflows.</p>


      <ul class="social">
          <li>
            <a  class="sc-linkedin" href="https://pl.linkedin.com/in/krystiansafjan" target="_blank">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
          <li>
            <a  class="sc-github" href="https://github.com/izikeros" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
          <li>
            <a  class="sc-envelope" href="mailto:ksafjan@gmail.com" target="_blank">
              <i class="fas fa-envelope"></i>
            </a>
          </li>
          <li>
            <a  class="sc-graduation-cap" href="https://scholar.google.pl/citations?user=UlNJgMoAAAAJ" target="_blank">
              <i class="fas fa-graduation-cap"></i>
            </a>
          </li>
          <li>
            <a  class="sc-rss" href="/feeds/all.rss.xml" target="_blank">
              <i class="fas fa-rss"></i>
            </a>
          </li>
      </ul>
    </div>

  </aside>
  <main>

    <nav>
      <a href="https://www.safjan.com/">Home</a>

      <a href="/archives.html">Articles</a>
      <a href="/til.html">Notes</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>
      <a href="/pdfs/Krystian_Safjan_resume_priv.pdf">Resume</a>

      <a href="https://www.safjan.com/feeds/all.atom.xml">Atom</a>

      <a href="https://www.safjan.com/feeds/all.rss.xml">RSS</a>
    </nav>

<article class="single">
  <header>
      
    <p>
      <!-- Posted on: -->
      September 14, 2021 



  <span id="post-share-links">
    &nbsp;&nbsp;&nbsp;Share on:
    <a href="https://twitter.com/intent/tweet?text=Git%20-%20autocommit%20on%20file%20changes&url=https%3A//www.safjan.com/git-autocommit-on-file-changes/&hashtags=git,autocommit,note-taking,notes,automatic,automation,gitautocommit" target="_blank" title="Share on Twitter">Twitter</a>
    |
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//www.safjan.com/git-autocommit-on-file-changes/" target="_blank" title="Share on Facebook">Facebook</a>
    |
    <a href="https://news.ycombinator.com/submitlink?t=Git%20-%20autocommit%20on%20file%20changes&u=https%3A//www.safjan.com/git-autocommit-on-file-changes/" target="_blank" title="Share on HackerNews">HackerNews</a>
    |
    <a href="https://www.reddit.com/submit?url=https%3A//www.safjan.com/git-autocommit-on-file-changes/&title=Git%20-%20autocommit%20on%20file%20changes" target="_blank" title="Share via Reddit">Reddit</a>
  </span>
    <br/>
   </p>
  <h1 id="git-autocommit-on-file-changes">Git - autocommit on file changes</h1>
  <div class="header-underline"></div>
  </header>


  <div>
    <blockquote>
<p><strong>Motivation:</strong> I wanted to track the history of the changes introduced in my notes folder. Didn't want to create a commit, or redact the commit message after each change because typically during the day I made multiple edits in notes ad prefer to minimize time spent on managing my notes. I'm quickly jumping into the notes, adding something to existing notes, or creating new ones. Remembering to commit each change is too much overhead for me. I started to look for a solution that will monitor my notes folder, and, if anything changed, create a commit. I found several solutions that serve that purpose.</p>
</blockquote>
<p>For reference see <a href="https://stackoverflow.com/questions/420143/making-git-auto-commit">making-git-auto-commit</a> on StackOverflow.</p>
<p>My choice was <strong>gitwatch</strong> used as systemd service.</p>
<!-- MarkdownTOC levels='1,2,3' autolink=True autoanchor=True -->

<ul>
<li><a href="#gitwatch--active">gitwatch , active</a><ul>
<li><a href="#notes-for-installation-on-mac">Notes for installation on Mac</a></li>
</ul>
</li>
<li><a href="#gwatch-low-activity">gwatch  low activity</a></li>
<li><a href="#etckeeper">etckeeper</a></li>
<li><a href="#git-etc-github-%E2%98%854-low-activity-created-9-years-ago-last-commit-in-2014">git-etc github: ★4, low activity, created 9 years ago, last commit in 2014</a></li>
<li><a href="#git-powercommit">Git Powercommit</a></li>
<li><a href="#git-wip">git-wip</a></li>
<li><a href="#inotify">inotify</a></li>
<li><a href="#watchman">watchman</a></li>
<li><a href="#inotifysh">inotify.sh</a></li>
</ul>
<!-- /MarkdownTOC -->

<p><a id="gitwatch--active"></a></p>
<h1><a href="https://github.com/gitwatch/gitwatch">gitwatch</a> <img alt="GitHub stars" src="https://img.shields.io/github/stars/gitwatch/gitwatch.svg?logo=github">, active</h1>
<p>A bash script to watch a file or folder and commit changes to a git repo</p>
<p>Justification for my choice:
- active with large community
- There is an AUR package for Archlinux
- does exactly what I want, nothing more
- can be used as daemon that starts on boot</p>
<div class="highlight"><pre><span></span><code><span class="n">Usage</span><span class="o">:</span><span class="w"></span>
<span class="n">gitwatch</span><span class="w"> </span><span class="o">[-</span><span class="n">s</span><span class="w"> </span><span class="o">&lt;</span><span class="n">secs</span><span class="o">&gt;]</span><span class="w"> </span><span class="o">[-</span><span class="n">d</span><span class="w"> </span><span class="o">&lt;</span><span class="n">fmt</span><span class="o">&gt;]</span><span class="w"> </span><span class="o">[-</span><span class="n">r</span><span class="w"> </span><span class="o">&lt;</span><span class="n">remote</span><span class="o">&gt;</span><span class="w"> </span><span class="o">[-</span><span class="n">b</span><span class="w"> </span><span class="o">&lt;</span><span class="n">branch</span><span class="o">&gt;]]</span><span class="w"></span>
<span class="w">          </span><span class="o">[-</span><span class="n">m</span><span class="w"> </span><span class="o">&lt;</span><span class="n">msg</span><span class="o">&gt;]</span><span class="w"> </span><span class="o">[-</span><span class="n">l</span><span class="o">|-</span><span class="n">L</span><span class="w"> </span><span class="o">&lt;</span><span class="n">lines</span><span class="o">&gt;]</span><span class="w"> </span><span class="o">&lt;</span><span class="n">target</span><span class="o">&gt;</span><span class="w"></span>
</code></pre></div>

<p><a id="notes-for-installation-on-mac"></a></p>
<h2>Notes for installation on Mac</h2>
<p>If running on OS X, you'll need to install the following Homebrew tools:</p>
<div class="highlight"><pre><span></span><code>$ brew install fswatch
$ brew install coreutils
</code></pre></div>

<p>and</p>
<div class="highlight"><pre><span></span><code>$ brew install gitwatch
</code></pre></div>

<ol>
<li>If installed to a path other than <code>/usr/bin/gitwatch</code>, modify <code>gitwatch@.service</code> to suit. In my case, <code>gitwatch</code> was found in <code>/usr/local/bin/gitwatch</code></li>
<li>
<p>Create dir if it does not exist and copy systemd service file with <code>mkdir -p "$HOME/.config/systemd/user" &amp;&amp; cp gitwatch@.service $HOME/.config/systemd/user</code>
If you cannot find <code>gitwatch@.service</code> file take it from the GitHub repository.</p>
</li>
<li>
<p>Start and enable the service for a given path by running <code>systemctl --user --now enable gitwatch@$(systemd-escape "'-r url/to/repository' /path/to/folder").service</code>
On macOS you need to act differently</p>
</li>
<li>take <code>.plist</code> file from the repo, and adjust it to your needs</li>
<li>copy modified plist to `/Library/LaunchDaemons/`` with sudo</li>
<li>note: if there is a proper <code>gitwatch</code> script path (I needed to change <code>gitwatch.sh</code> to <code>gitwatch</code>)</li>
</ol>
<p><a id="gwatch-low-activity"></a></p>
<h1><a href="https://github.com/jw0k/gwatch">gwatch</a> <img alt="GitHub stars" src="https://img.shields.io/github/stars/jw0k/gwatch.svg?logo=github"> low activity</h1>
<p>A program that watches a folder for file modifications and commits them to a git repository automatically</p>
<p>After <code>gwatch</code> is started it will watch a given folder and all of its subfolders (recursively) for changes. If a change occurs, a timer will be started (the 30s by default). After the timer expires, <code>gwatch</code> will create a new git commit with all the modifications. The timer is to prevent creating too many commits when there are a lot of modifications. In order for <code>gwatch</code> to successfully create commits, a git repository must be initialized in the watched folder.</p>
<p><a id="etckeeper"></a></p>
<h1><a href="http://joeyh.name/code/etckeeper/">etckeeper</a></h1>
<blockquote>
<p>NOTE: In my case, I didn't need to track permissions</p>
</blockquote>
<p><code>etckeeper</code> is a collection of tools to let <code>/etc</code> be stored in a git, mercurial, darcs, or bzr repository. It hooks into apt (and other package managers including yum and pacman-g2) to automatically commit changes made to <code>/etc</code> during package upgrades. It tracks file metadata that revision control systems do not normally support, but that is important for <code>/etc</code>, such as the permissions of <code>/etc/shadow</code>. It's quite modular and configurable, while also being simple to use if you understand the basics of working with revision control.</p>
<p><code>etckeeper</code> now has a website at http://etckeeper.branchable.com/.</p>
<p><a id="git-etc-github-%E2%98%854-low-activity-created-9-years-ago-last-commit-in-2014"></a></p>
<h1><a href="https://arcanis.me/projects/git-etc">git-etc</a> github: ★4, low activity, created 9 years ago, last commit in 2014</h1>
<p>A simple daemon that automatically creates a git repository in the given directory and creates a commit at the specified time interval.</p>
<p>Has GUI, has AUR package</p>
<p><a id="git-powercommit"></a></p>
<h1><a href="https://github.com/grwlf/git-powercommit">Git Powercommit</a></h1>
<p>Commit every changed submodule. Commit every changed regular file or folder, aggregating the files that share a folder into a single commit.</p>
<p><a id="git-wip"></a></p>
<h1><a href="https://github.com/bartman/git-wip">git-wip</a></h1>
<p><code>git-wip</code> is a script that will manage Work In Progress (or WIP) branches. WIP branches are mostly thrown away but identify points of development between commits. The intent is to tie this script into your editor so that each time you save your file, the <code>git-wip</code> script captures that state in git. <code>git-wip</code> also helps you return to a previous state of development.</p>
<p><a id="inotify"></a></p>
<h1><a href="http://inotify.aiken.cz/?section=incron&amp;page=about&amp;lang=en">inotify</a></h1>
<p>This program is an "inotify cron" system. It consists of a daemon and a table manipulator. You can use it in a similar way as the regular cron. The difference is that the inotify cron handles filesystem events rather than time periods.</p>
<p><a id="watchman"></a></p>
<h1><a href="https://facebook.github.io/watchman/">watchman</a></h1>
<p>Watchman exists to watch files and record when they change. It can also trigger actions (such as rebuilding assets) when matching files change</p>
<p><a id="inotifysh"></a></p>
<h1><a href="https://github.com/nzvincent/nzvincent-github/blob/master/inotify-tools/inotify.sh">inotify.sh</a></h1>
<p>This script uses inotifywatch to monitor file status and trigger commands.
Designed for Ansible playbook, but you can use this for other development purposes.
To install e.g. <code>apt-get install -y inotify-tools</code>
see: https://gist.github.com/darencard/5d42319abcb6ec32bebf6a00ecf99e86</p>
<p>up:: [[MOC_git]]]</p>
  </div>


  <div class="tag-cloud">
    <p>
      <br/><br/>Tags:&nbsp;
      <a href="https://www.safjan.com/tag/git/">git</a>
      <a href="https://www.safjan.com/tag/autocommit/">autocommit</a>
      <a href="https://www.safjan.com/tag/note-taking/">note-taking</a>
      <a href="https://www.safjan.com/tag/notes/">notes</a>
      <a href="https://www.safjan.com/tag/automatic/">automatic</a>
      <a href="https://www.safjan.com/tag/automation/">automation</a>
      <a href="https://www.safjan.com/tag/gitautocommit/">git/autocommit</a>
    </p>
  </div>


  <div class="neighbors">
    <a class="btn float-left" href="https://www.safjan.com/interactive-plots-for-blogging/" title="Interactive plots for blogging">
      <i class="fa fa-angle-left"></i> Previous Post
    </a>
    <a class="btn float-right" href="https://www.safjan.com/python-documentation-with-pdoc3/" title="Python - project documentation from the code with pdoc3">
      Next Post <i class="fa fa-angle-right"></i>
    </a>
  </div>

  <div class="related-posts">
    <h4>You might enjoy</h4>
    <ul class="related-posts">
      <li><a href="https://www.safjan.com/git-delete-branch/">How to delete a Git branch locally and remotely?</a></li>
      <li><a href="https://www.safjan.com/git-delete-branches-merged-into-main-branch/">Git - delete branches that are merged into the main branch</a></li>
      <li><a href="https://www.safjan.com/git-hooks/">Git hooks</a></li>
      <li><a href="https://www.safjan.com/git-add/">Git add - stage changes in various ways</a></li>
      <li><a href="https://www.safjan.com/git-pre-commit-hooks/">Pre-commit hooks</a></li>
    </ul>
  </div>


</article>

    <footer>
<p>
  &copy; 2022 Krystian Safjan - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/deed.en_US" target="_blank">Creative Commons Attribution-ShareAlike</a>
</p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Krystian Safjan's Blog ",
  "url" : "https://www.safjan.com",
  "image": "/images/profile_new.jpg",
  "description": ""
}
</script>

</body>
</html>