
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="color-scheme" content="light dark"/>
    <script>
      (function() {
        var theme = localStorage.getItem('theme-preference');
        if (theme === 'dark' || theme === 'light') {
          document.documentElement.setAttribute('data-theme', theme);
        }
      })();
    </script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="HandheldFriendly" content="True"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"/>
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap"
              rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/stylesheet/style.css">


    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/pygments/github.min.css">


    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/fontawesome.css">
    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/brands.css">
    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/solid.css">

    <link rel="stylesheet" href="/pagefind/pagefind-ui.css">

        <link rel="stylesheet" type="text/css"
              href="https://www.safjan.com/styles/custom.css">

        <link href="https://www.safjan.com/feeds/all.atom.xml?utm_source=rss&utm_medium=feed&utm_campaign=rss-feed" type="application/atom+xml" rel="alternate"
              title="Krystian Safjan's Blog Atom">

        <link href="https://www.safjan.com/feeds/all.rss.xml?utm_source=rss&utm_medium=feed&utm_campaign=rss-feed" type="application/rss+xml" rel="alternate"
              title="Krystian Safjan's Blog RSS">


    <link rel="apple-touch-icon" sizes="180x180" href="https://www.safjan.com/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://www.safjan.com/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://www.safjan.com/favicon-16x16.png">
    <link rel="shortcut icon" href="https://www.safjan.com/favicon.ico">
    <link rel="manifest" href="https://www.safjan.com/site.webmanifest">
    <meta name="theme-color" content="#333333">
    <meta name="apple-mobile-web-app-title" content="Krystian Safjan's Blog">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RM2PKDCCYM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RM2PKDCCYM');
</script>
<!-- End of Google tag (gtag.js) -->



    <meta name="author" content="Krystian Safjan"/>
    <meta name="description" content="Learn how ActivityPub enables decentralized social networking by allowing users to interact across different platforms and control their own data, using activity streams represented in JSON-LD format. Discover its applications in social networks, chat apps, content management systems, and collaboration tools."/>
    <meta name="keywords" content="activitypub, social-networking, federated-social-web, rss, gitea, xmpp">


  <meta property="og:site_name" content="Krystian Safjan's Blog"/>
  <meta property="og:title" content="ActivityPub - How It Works and How to Use It?"/>
  <meta property="og:description" content="Learn how ActivityPub enables decentralized social networking by allowing users to interact across different platforms and control their own data, using activity streams represented in JSON-LD format. Discover its applications in social networks, chat apps, content management systems, and collaboration tools."/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="https://www.safjan.com/activitypub-how-it-works-how-to-use-it/"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2023-03-06 00:00:00+01:00"/>
  <meta property="article:modified_time" content="2023-07-12 00:00:00+02:00"/>
  <meta property="article:author" content="https://www.safjan.com/author/krystian-safjan/"/>
  <meta property="article:section" content="note"/>
  <meta property="article:tag" content="activitypub"/>
  <meta property="article:tag" content="social-networking"/>
  <meta property="article:tag" content="federated-social-web"/>
  <meta property="article:tag" content="rss"/>
  <meta property="article:tag" content="gitea"/>
  <meta property="article:tag" content="xmpp"/>
  <meta property="og:image" content="/images/profile_new.jpg"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image" content="/images/profile_new.jpg"/>
    <meta name="twitter:image:alt" content="Krystian Safjan's Blog"/>


    <meta name="twitter:site" content="@izikeros"/>
    <meta name="twitter:creator" content="@izikeros"/>
    <meta name="twitter:title" content="ActivityPub - How It Works and How to Use It?"/>
    <meta name="twitter:description" content="Learn how ActivityPub enables decentralized social networking by allowing users to interact across different platforms and control their own data, using activity streams represented in JSON-LD..."/>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.safjan.com/activitypub-how-it-works-how-to-use-it/"
  },
  "headline": "ActivityPub - How It Works and How to Use It?",
  "datePublished": "2023-03-06T00:00:00+01:00",
  "dateModified": "2023-07-12T00:00:00+02:00",
  "author": {
    "@type": "Person",
    "name": "Krystian Safjan",
    "url": "https://www.safjan.com/author/krystian-safjan/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Krystian Safjan's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "/images/profile_new.jpg"
    }  },
"image": "/images/profile_new.jpg",  "url": "https://www.safjan.com/activitypub-how-it-works-how-to-use-it/",
  "description": "Learn how ActivityPub enables decentralized social networking by allowing users to interact across different platforms and control their own data, using...",
  "articleSection": "note",
  "inLanguage": "en",
  "keywords": "activitypub, social-networking, federated-social-web, rss, gitea, xmpp",
  "wordCount": 971,
  "speakable": {
    "@type": "SpeakableSpecification",
    "cssSelector": ["article h1", ".summary", ".tldr", "article \u003e p:first-of-type"]
  }}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://www.safjan.com/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "note",
      "item": "https://www.safjan.com/category/note.html"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "ActivityPub - How It Works and How to Use It?"
    }
  ]
}
</script>



<meta name="ai:summary" content="Learn how ActivityPub enables decentralized social networking by allowing users to interact across different platforms and control their own data, using activity streams represented in JSON-LD format. Discover its applications in social networks, chat apps, content management systems, and...">

<meta name="ai:topics" content="activitypub, social-networking, federated-social-web, rss, gitea, xmpp">



<meta name="ai:word-count" content="971">
<meta name="ai:reading-time" content="4 min">

<meta name="ai:section" content="note">



<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">

    <title>    ActivityPub - How It Works and How to Use It?
</title>



<!-- Google Automatic Ads -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9767732578835199"
     crossorigin="anonymous"></script>
<!-- End of Google Automatic Ads -->


</head>
<body>
<div id="reading-progress" class="reading-progress"></div>
<aside>
    <div>
        <a href="https://www.safjan.com/">
                <img src="/images/profile_new.jpg" alt="Krystian Safjan's Blog" title="Krystian Safjan's Blog" width="140" height="140">
        </a>

        <h1>
            <a href="https://www.safjan.com/">Krystian Safjan's Blog</a>
        </h1>

<p>Data Scientist and Team Leader writing about Machine Learning, MLOps, and Python</p>


        <ul class="social">
                <li>
                    <a  class="sc-linkedin" href="https://pl.linkedin.com/in/krystiansafjan"
                       target="_blank">
                        <i class="fab fa-linkedin"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-github" href="https://github.com/izikeros"
                       target="_blank">
                        <i class="fab fa-github"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-envelope" href="mailto:ksafjan@gmail.com"
                       target="_blank">
                        <i class="fas fa-envelope"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-graduation-cap" href="https://scholar.google.pl/citations?user=UlNJgMoAAAAJ"
                       target="_blank">
                        <i class="fas fa-graduation-cap"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-rss" href="/feeds/all.rss.xml"
                       target="_blank">
                        <i class="fas fa-rss"></i>
                    </a>
                </li>
        </ul>
    </div>

<div class="promo-box">
    <a href="https://ksafjanuser.gumroad.com/l/mlops" class="promo-box-image">
        <img src="/images/mlop_interview_book_cover_3D_300px.jpg" alt="MLOps Interview Book Cover">
    </a>
    
    <p class="promo-box-headline">Ace Your MLOps Interview</p>
    
    <a href="https://ksafjanuser.gumroad.com/l/mlops" class="promo-box-cta">
        Get for $2.99
    </a>
    
    <p class="promo-box-features">50 Q&A â€¢ PDF/ePUB/mobi</p>
</div>
</aside>
<main>

        <nav aria-label="Main navigation">
            <a href="https://www.safjan.com/">Home</a>

                <a href="/archives.html">Articles</a>
                <a href="/til.html">Notes</a>
                <a href="/categories.html">Categories</a>
                <a href="/pdfs/Krystian_Safjan_resume_priv.pdf">Resume</a>

                <a href="https://www.safjan.com/feeds/all.atom.xml">Atom</a>

                <a href="https://www.safjan.com/feeds/all.rss.xml">RSS</a>

            <div id="search" class="nav-search"></div>
            <button type="button" id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
                <i class="fas fa-sun"></i>
                <i class="fas fa-moon"></i>
            </button>
        </nav>

    <article class="single">
        <header>
                
            <p>
                <!-- Posted on: -->
                2023-03-06 


                <br/>
            </p>
            <h1>ActivityPub - How It Works and How to Use It?</h1>
            <div class="header-underline"></div>



        </header>




        <div class="article-content">
            <p>ActivityPub is a protocol designed to enable decentralized social networking. It is based on the principles of the <strong><em>Federated Social Web</em></strong>, which aims to create a social web that is not owned by any single entity or corporation. In this blog post, we will explore the basics of ActivityPub and how it can be used in your applications.</p>
<!-- MarkdownTOC levels="2,3" autolink="true" autoanchor="true" -->

<ul>
<li><a href="#what-is-activitypub">What is ActivityPub?</a></li>
<li><a href="#how-does-activitypub-work">How does ActivityPub work?</a></li>
<li><a href="#how-can-activitypub-be-used-in-your-applications">How can ActivityPub be used in your applications?</a><ul>
<li><a href="#1--social-networking-platforms">1.  Social Networking Platforms</a></li>
<li><a href="#2--chat-applications">2.  Chat Applications</a></li>
<li><a href="#3--content-management-systems">3.  Content Management Systems</a></li>
<li><a href="#4--collaboration-tools">4.  Collaboration Tools</a></li>
</ul>
</li>
<li><a href="#other--related-protocols">Other,  related protocols</a><ul>
<li><a href="#1--ostatus">1.  OStatus</a></li>
<li><a href="#2--websub-formerly-known-as-pubsubhubbub">2.  WebSub (formerly known as PubSubHubbub)</a></li>
<li><a href="#3--diaspora">3.  Diaspora</a></li>
<li><a href="#4--zot">4.  Zot</a></li>
<li><a href="#5--matrix">5.  Matrix</a></li>
</ul>
</li>
<li><a href="#conclusion">Conclusion</a></li>
<li><a href="#references">References</a></li>
</ul>
<!-- /MarkdownTOC -->

<h2 id="what-is-activitypub">What is ActivityPub?</h2>
<p>ActivityPub is a decentralized protocol for social networking. It allows users to interact with each other across different social networking platforms, without having to be part of the same network. ActivityPub is designed to be scalable, secure, and decentralized, and it allows users to control their own data and content.</p>
<p>The core of ActivityPub is the activity stream. An activity stream is a list of actions that a user has taken or received, such as posting a message, following someone, or liking a post. ActivityPub uses the JSON-LD format to represent activity streams.</p>
<h2 id="how-does-activitypub-work">How does ActivityPub work?</h2>
<p>ActivityPub is based on a decentralized architecture, which means that there is no single central authority that controls the network. Instead, each user has their own server, known as a "node," which is responsible for storing their data and communicating with other nodes.</p>
<p>When a user wants to post a message or perform any other activity, their node creates an activity object, which contains information about the activity, such as the type of activity, the user who performed it, and any additional metadata. The activity object is then sent to the user's followers, who receive a notification of the activity.</p>
<p>If a user wants to follow another user, their node sends a follow request to the other user's node. If the other user accepts the request, their node sends a follow activity to the follower's node, which adds the user to their list of followers.</p>
<p>ActivityPub also supports other types of activities, such as likes, shares, and comments. These activities are all represented using the same activity object format.</p>
<p><img alt="ActivityPub" src="/images/misc/ActivityPub.png">
<em>How ActivityPub works (source: W3C)</em></p>
<h2 id="how-can-activitypub-be-used-in-your-applications">How can ActivityPub be used in your applications?</h2>
<p>ActivityPub can be used in a wide variety of applications, from social networking platforms to chat applications to content management systems. Here are some examples of how ActivityPub can be used in your applications:</p>
<h3 id="1-social-networking-platforms">1.  Social Networking Platforms</h3>
<p>ActivityPub can be used to create decentralized social networking platforms, where users can connect with each other across different networks. For example, Mastodon is a popular social networking platform that uses ActivityPub. Mastodon allows users to post messages, follow other users, and interact with each other in a decentralized manner.</p>
<h3 id="2-chat-applications">2.  Chat Applications</h3>
<p>ActivityPub can also be used to create decentralized chat applications. For example, XMPP is a protocol for instant messaging that supports ActivityPub. XMPP allows users to send messages, share files, and interact with each other in real-time.</p>
<h3 id="3-content-management-systems">3.  Content Management Systems</h3>
<p>ActivityPub can be used to create decentralized content management systems, where users can publish and share content across different networks. For example, Write.as is a blogging platform that uses ActivityPub. Write.as allows users to publish blog posts, follow other bloggers, and interact with each other in a decentralized manner.</p>
<h3 id="4-collaboration-tools">4.  Collaboration Tools</h3>
<p>ActivityPub can be used to create decentralized collaboration tools, where users can work together on projects across different networks. For example, Gitea is a platform for hosting and managing Git repositories that supports ActivityPub. Gitea allows users to collaborate on projects, share code, and interact with each other in a decentralized manner.</p>
<h2 id="other-related-protocols">Other,  related protocols</h2>
<p>ActivityPub is just one of several protocols that are designed to support decentralized communication and social networking. Here are some of the related protocols:</p>
<h3 id="1-ostatus">1.  OStatus</h3>
<p>OStatus is an older protocol that was developed before ActivityPub. It includes several components, including ActivityStreams, WebSub, and Salmon. OStatus was originally used for federated microblogging platforms like StatusNet and GNU Social.</p>
<p><strong>OStatus</strong>: <a href="https://www.w3.org/community/ostatus/wiki/Main_Page">https://www.w3.org/community/ostatus/wiki/Main_Page</a></p>
<h3 id="2-websub-formerly-known-as-pubsubhubbub">2.  WebSub (formerly known as PubSubHubbub)</h3>
<p>WebSub is a protocol for real-time notifications on the web. It allows publishers to notify subscribers when new content is available, and it is used by ActivityPub to send notifications of new activities.</p>
<p><strong>WebSub</strong>: <a href="https://www.w3.org/TR/websub/">https://www.w3.org/TR/websub/</a></p>
<h3 id="3-diaspora">3.  Diaspora</h3>
<p>Diaspora is a social networking platform that uses a protocol called the Diaspora protocol. The Diaspora protocol is similar to ActivityPub, but it was designed specifically for the Diaspora platform.</p>
<p><strong>Diaspora protocol:</strong> <a href="https://diaspora.github.io/diaspora_federation/protocol.html">https://diaspora.github.io/diaspora_federation/protocol.html</a></p>
<h3 id="4-zot">4.  Zot</h3>
<p>Zot is a protocol used by the Hubzilla social networking platform. Zot is similar to ActivityPub, but it includes additional features like encryption and private messaging.</p>
<p><strong>Zot</strong>: <a href="https://zotlabs.org/page/zot/zot-protocol">https://zotlabs.org/page/zot/zot-protocol</a></p>
<h3 id="5-matrix">5.  Matrix</h3>
<p>Matrix is a decentralized communication protocol that is designed for real-time messaging and collaboration. It includes features like end-to-end encryption, multi-device syncing, and bridging to other networks like IRC and Slack.</p>
<p>These protocols are all part of the wider ecosystem of decentralized communication and social networking. While they have their own unique features and use cases, they all share a common goal of enabling users to communicate and collaborate in a decentralized, open, and transparent way.</p>
<p><strong>Matrix</strong>: <a href="https://matrix.org/docs/spec/">https://matrix.org/docs/spec/</a></p>
<h2 id="conclusion">Conclusion</h2>
<p>ActivityPub is a powerful protocol that enables decentralized social networking. It allows users to interact with each other across different networks, without having to be part of the same network. ActivityPub can be used in a wide variety of applications, from social networking platforms to content management systems to collaboration tools. If you are interested in creating decentralized applications, ActivityPub is definitely worth</p>
<p>See the video: <a href="https://www.youtube.com/watch?v=kkvJMiiVRWs">How To Use ActivityPub In Your Applications? - YouTube</a></p>
<h2 id="references">References</h2>
<p>links to the protocols mentioned in this chat:</p>
<ol>
<li>ActivityPub: <a href="https://www.w3.org/TR/activitypub/">https://www.w3.org/TR/activitypub/</a></li>
<li>OStatus: <a href="https://www.w3.org/community/ostatus/wiki/Main_Page">https://www.w3.org/community/ostatus/wiki/Main_Page</a></li>
<li>WebSub: <a href="https://www.w3.org/TR/websub/">https://www.w3.org/TR/websub/</a></li>
<li>Diaspora protocol: <a href="https://diaspora.github.io/diaspora_federation/protocol.html">https://diaspora.github.io/diaspora_federation/protocol.html</a></li>
<li>Zot: <a href="https://zotlabs.org/page/zot/zot-protocol">https://zotlabs.org/page/zot/zot-protocol</a></li>
<li>Matrix: <a href="https://matrix.org/docs/spec/">https://matrix.org/docs/spec/</a></li>
</ol>
        </div>


        <div class="article-tags">
            <span class="tags-label">Tags:</span>
                <a href="https://www.safjan.com/tag/activitypub/" class="article-tag">activitypub</a>
                <a href="https://www.safjan.com/tag/social-networking/" class="article-tag">social-networking</a>
                <a href="https://www.safjan.com/tag/federated-social-web/" class="article-tag">federated-social-web</a>
                <a href="https://www.safjan.com/tag/rss/" class="article-tag">rss</a>
                <a href="https://www.safjan.com/tag/gitea/" class="article-tag">gitea</a>
                <a href="https://www.safjan.com/tag/xmpp/" class="article-tag">xmpp</a>
        </div>







            <div class="related-posts">
                <h4 class="related-posts-title">You might also like</h4>
                <div class="related-posts-grid">
                        <a href="https://www.safjan.com/emerging-alternatives-to-rss/" class="related-post-card">
                            <span class="related-post-title">RSS vs. The Emerging Web Standards - Which Will Reign Supreme?</span>
                            <span class="related-post-date">Mar 05, 2023</span>
                        </a>
                        <a href="https://www.safjan.com/federated-social-web-manifesto/" class="related-post-card">
                            <span class="related-post-title">Federated Social Web Manifesto</span>
                            <span class="related-post-date">Mar 06, 2023</span>
                        </a>
                        <a href="https://www.safjan.com/rss-traffic-analysis-for-a-blog/" class="related-post-card">
                            <span class="related-post-title">Rss Traffic Analysis for a Blog</span>
                            <span class="related-post-date">Aug 01, 2024</span>
                        </a>
                        <a href="https://www.safjan.com/how-to-deploy-freshrss-in-the-cloud-for-free-on-azure/" class="related-post-card">
                            <span class="related-post-title">How to Deploy FreshRSS in the Cloud for Free on Azure?</span>
                            <span class="related-post-date">Apr 11, 2023</span>
                        </a>
                </div>
            </div>




    </article>

    <footer>
<p>
  &copy; 2026 Krystian Safjan - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/deed.en_US" target="_blank">Creative Commons Attribution-ShareAlike</a>
</p>    </footer>
</main>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Blog",
  "name": "Krystian Safjan's Blog",
  "url": "https://www.safjan.com",
"image": "/images/profile_new.jpg",  "description": ""
}
</script>


<script src="/pagefind/pagefind-ui.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', function() {
        new PagefindUI({
            element: "#search",
            showSubResults: false,
            showImages: false,
            basePath: "/pagefind/"
        });
    });
</script>

<script src="https://www.safjan.com/theme/js/theme-switcher.js"></script>

<style>
.video-embed {
    position: relative;
    width: 100%;
    padding-bottom: 56.25%;
    background: #000;
    border-radius: 0.375rem;
    overflow: hidden;
}
.video-embed iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
}
.video-embed-wrapper {
    margin-bottom: 1rem;
}
.video-embed-info {
    padding: 0.5rem 0.75rem;
    background: var(--color-bg-secondary, #f6f8fa);
    border-radius: 0 0 0.375rem 0.375rem;
    font-size: 0.875rem;
    margin-top: -0.375rem;
}
.video-embed-info a {
    text-decoration: none;
    color: inherit;
}
.video-embed-info a:hover {
    text-decoration: underline;
}
</style>
<script>
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('pre > code').forEach(function(code) {
        var text = code.textContent.trim();
        var lines = text.split('\n');
        var url = lines[0].trim();

        var videoId = null;
        var embedUrl = null;
        var platform = null;

        // YouTube detection
        var ytMatch = url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/);
        if (ytMatch) {
            videoId = ytMatch[1];
            embedUrl = 'https://www.youtube-nocookie.com/embed/' + videoId;
            platform = 'youtube';
        }

        // Vimeo detection
        var vimeoMatch = url.match(/vimeo\.com\/(?:video\/)?(\d+)/);
        if (vimeoMatch) {
            videoId = vimeoMatch[1];
            embedUrl = 'https://player.vimeo.com/video/' + videoId + '?dnt=1';
            platform = 'vimeo';
        }

        if (!videoId || !embedUrl) return;

        var meta = {};
        lines.slice(1).forEach(function(line) {
            var m = line.match(/^(\w+):\s*(.+)$/);
            if (m) meta[m[1].toLowerCase()] = m[2].trim();
        });

        var wrapper = document.createElement('div');
        wrapper.className = 'video-embed-wrapper';

        var embed = document.createElement('div');
        embed.className = 'video-embed';
        embed.innerHTML = '<iframe src="' + embedUrl +
            '" allowfullscreen loading="lazy" title="' + (meta.title || (platform === 'youtube' ? 'YouTube video' : 'Vimeo video')).replace(/"/g, '&quot;') + '"></iframe>';
        wrapper.appendChild(embed);

        if (meta.title || meta.author) {
            var info = document.createElement('div');
            info.className = 'video-embed-info';
            var html = meta.title ? '<strong>' + meta.title + '</strong>' : '';
            if (meta.author) {
                html += (meta.title ? ' &bull; ' : '');
                html += meta.authorurl ? '<a href="' + meta.authorurl + '" target="_blank" rel="noopener">' + meta.author + '</a>' : meta.author;
            }
            info.innerHTML = html;
            wrapper.appendChild(info);
        }
        code.closest('pre').replaceWith(wrapper);
    });
});
</script>

<style>
.tweet-embed-wrapper {
    margin-bottom: 1rem;
}
.tweet-embed-loading {
    padding: 1rem;
    background: var(--color-bg-secondary, #f6f8fa);
    border-radius: 0.375rem;
    color: var(--color-text-secondary, #6c757d);
    font-size: 0.875rem;
}
</style>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var twitterScriptLoaded = false;

    function loadTwitterScript() {
        if (twitterScriptLoaded) return;
        twitterScriptLoaded = true;
        var script = document.createElement('script');
        script.src = 'https://platform.twitter.com/widgets.js';
        script.async = true;
        document.body.appendChild(script);
    }

    document.querySelectorAll('pre > code.language-tweet').forEach(function(code) {
        var text = code.textContent.trim();
        var url = text.split('\n')[0].trim();

        // Twitter/X URL detection
        var tweetMatch = url.match(/^https?:\/\/(twitter\.com|x\.com)\/\w+\/status\/(\d+)/);
        if (!tweetMatch) return;

        var wrapper = document.createElement('div');
        wrapper.className = 'tweet-embed-wrapper';
        wrapper.innerHTML = '<div class="tweet-embed-loading">Loading tweet...</div>';

        code.closest('pre').replaceWith(wrapper);

        // Fetch oEmbed data
        var oembedUrl = 'https://publish.twitter.com/oembed?url=' + encodeURIComponent(url) + '&dnt=true&omit_script=true';

        fetch(oembedUrl)
            .then(function(response) { return response.json(); })
            .then(function(data) {
                wrapper.innerHTML = data.html;
                loadTwitterScript();
                if (window.twttr && window.twttr.widgets) {
                    window.twttr.widgets.load(wrapper);
                }
            })
            .catch(function() {
                wrapper.innerHTML = '<div class="tweet-embed-loading">Failed to load tweet. <a href="' + url + '" target="_blank" rel="noopener">View on Twitter</a></div>';
            });
    });
});
</script>
</body>
</html>