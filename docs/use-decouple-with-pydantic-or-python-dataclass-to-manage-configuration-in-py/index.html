
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="HandheldFriendly" content="True"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"/>
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap"
              rel="stylesheet">

        <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/stylesheet/style.min.css">



        <link id="pygments-light-theme" rel="stylesheet" type="text/css"
              href="https://www.safjan.com/theme/pygments/github.min.css">



    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/fontawesome.css">
    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/brands.css">
    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/solid.css">

        <link rel="stylesheet" type="text/css"
              href="https://www.safjan.com/styles/custom.css">

        <link href="https://www.safjan.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Krystian Safjan's Blog Atom">

        <link href="https://www.safjan.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
              title="Krystian Safjan's Blog RSS">


<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RM2PKDCCYM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RM2PKDCCYM');
</script>
<!-- End of Google tag (gtag.js) -->



    <meta name="author" content="Krystian Safjan"/>
    <meta name="description" content="X::Python - Configuration Management Basic Usage Add pydantic or dataclass Using pydantic: Using dataclass: Advantages of using pydantic or dataclass: Should the config be immutable? dataclass + decouple example Basic Usage python-decouple is a viable alternative to python-dotenv for managing environment variables in …"/>
    <meta name="keywords" content="python, config, configuration, pydantic, decouple, python-app-config, immutable, casting, env-vars, environmental-variables">
    <meta expr:content="2024-04-19 00:00:00+02:00" itemprop='datePublished'/>
    <meta expr:content="2024-04-19 00:00:00+02:00" itemprop='dateModified'/>
    <meta property="article:modified_time" content="2024-04-19 00:00:00+02:00"/>
    <meta property="article:published_time" content="2024-04-19 00:00:00+02:00"/>
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Use Decouple With Pydantic or Python Dataclass to Manage Configuration in Python App",
  "datePublished": "2024-04-19 00:00:00+02:00",
  "dateModified": "2024-04-19 00:00:00+02:00"
}

    </script>



  <meta property="og:site_name" content="Krystian Safjan's Blog"/>
  <meta property="og:title" content="Use Decouple With Pydantic or Python Dataclass to Manage Configuration in Python App"/>
  <meta property="og:description" content="X::Python - Configuration Management Basic Usage Add pydantic or dataclass Using pydantic: Using dataclass: Advantages of using pydantic or dataclass: Should the config be immutable? dataclass + decouple example Basic Usage python-decouple is a viable alternative to python-dotenv for managing environment variables in …"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="https://www.safjan.com/use-decouple-with-pydantic-or-python-dataclass-to-manage-configuration-in-py/"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2024-04-19 00:00:00+02:00"/>
  <meta property="article:modified_time" content="2024-04-19 00:00:00+02:00"/>
  <meta property="article:author" content="https://www.safjan.com/author/krystian-safjan/">
  <meta property="article:section" content="note"/>
  <meta property="article:tag" content="python"/>
  <meta property="article:tag" content="config"/>
  <meta property="article:tag" content="configuration"/>
  <meta property="article:tag" content="pydantic"/>
  <meta property="article:tag" content="decouple"/>
  <meta property="article:tag" content="python-app-config"/>
  <meta property="article:tag" content="immutable"/>
  <meta property="article:tag" content="casting"/>
  <meta property="article:tag" content="env-vars"/>
  <meta property="article:tag" content="environmental-variables"/>
  <meta property="og:image" content="/images/profile_new.jpg">

    <meta name="twitter:card" content="summary"/>
    <meta property="twitter:image" content="/images/profile_new.jpg">

    <meta name="twitter:label1" content="Est. reading time"/>
    <meta name="twitter:data1" content="4 min."/>
    <meta name="twitter:site" content="@izikeros"/>
    <meta name="twitter:description" content=""/>
    <meta name="twitter:title" content="Use Decouple With Pydantic or Python Dataclass to Manage Configuration in Python App"/>


    <title>    Use Decouple With Pydantic or Python Dataclass to Manage Configuration in Python App
</title>


<!-- Google Automatic Ads -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9767732578835199"
     crossorigin="anonymous"></script>
<!-- End of Google Automatic Ads -->


</head>
<body class="light-theme">
<aside>
    <div>
        <a href="https://www.safjan.com/">
                <img src="/images/profile_new.jpg" alt="Krystian Safjan's Blog" title="Krystian Safjan's Blog" width="140" height="140">
        </a>

        <h1>
            <a href="https://www.safjan.com/">Krystian Safjan's Blog</a>
        </h1>

<p>Data Scientist | Researcher | Team Leader<br><br> working at Ernst &amp; Young and writing about <a href="/category/machine-learning.html">Data Science and Visualization</a>, on <a href="/category/machine-learning.html">Machine Learning, Deep Learning</a> and <a href="/tag/nlp/">NLP</a>. There are also some  <a href="/category/howto.html">howto</a> posts on tools and workflows.</p>




        <ul class="social">
                <li>
                    <a  class="sc-linkedin" href="https://pl.linkedin.com/in/krystiansafjan"
                       target="_blank">
                        <i class="fab fa-linkedin"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-github" href="https://github.com/izikeros"
                       target="_blank">
                        <i class="fab fa-github"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-envelope" href="mailto:ksafjan@gmail.com"
                       target="_blank">
                        <i class="fas fa-envelope"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-graduation-cap" href="https://scholar.google.pl/citations?user=UlNJgMoAAAAJ"
                       target="_blank">
                        <i class="fas fa-graduation-cap"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-rss" href="/feeds/all.rss.xml"
                       target="_blank">
                        <i class="fas fa-rss"></i>
                    </a>
                </li>
        </ul>
    </div>

<style>
    .button {
        background-color: yellow;
        color: black;
        border: none;
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
        border-radius: 20px;
    }

    .center {
        text-align: center;
    }

    .container {
        display: grid;
        grid-template-columns: 1fr 1fr;
    }

    .left-col {
    }

    .right-col {
    }

    .image {
        border-radius: 0;
        width: 100%;
    }

    .book-list {
        padding-top:0;
        padding-bottom: 0;
        text-align:left;
        box-sizing: border-box;
        display: block;
        list-style-image: url(/images/shortcode-tick.webp);
        margin-block-start: 1em;
        margin-block-end: 1em;
        margin-inline-start:0;
        margin-inline-end:0;
        padding-inline-start:40px;
    }

    .book-list li {
        font-weight: bold;
    }

    @media (max-width: 600px) {
        .container {
            grid-template-columns: 1fr;
        }
    }

</style>
<div class="container">
    <div class="left-col">
        <a href="https://ksafjanuser.gumroad.com/l/mlops">
            <img src="/images/mlop_interview_book_cover_3D_300px.jpg" class="image" alt="Interview Book Cover">
        </a>

        <div class="center">
            <a href="https://ksafjanuser.gumroad.com/l/mlops">
                <button class="button">Get for $2.99</button>
            </a>
        </div>
    </div>
    <div class="right-col">
        <div>
            <ul class="book-list">
                <li>PDF, ePUB, mobi format ebook, no DRM</li>
                <li>50 questions and answers</li>
                <li>Stories from real projects</li>
                <li>92 multiple choice quiz questions</li>
                <li>80 pages</li>
            </ul>
        </div>
    </div>
</div>
</aside>
<main>

        <nav>
            <a href="https://www.safjan.com/">Home</a>

                <a href="/archives.html">Articles</a>
                <a href="/til.html">Notes</a>
                <a href="/categories.html">Categories</a>
                <a href="/pdfs/Krystian_Safjan_resume_priv.pdf">Resume</a>

                <a href="https://www.safjan.com/feeds/all.atom.xml">Atom</a>

                <a href="https://www.safjan.com/feeds/all.rss.xml">RSS</a>
        </nav>

    <article class="single">
        <header>
                
            <p>
                <!-- Posted on: -->
                2024-04-19 



                    <span id="post-share-links">
    &nbsp;&nbsp;&nbsp;Share on:
    <a href="https://twitter.com/intent/tweet?text=Use%20Decouple%20With%20Pydantic%20or%20Python%20Dataclass%20to%20Manage%20Configuration%20in%20Python%20App&url=https%3A//www.safjan.com/use-decouple-with-pydantic-or-python-dataclass-to-manage-configuration-in-py/&hashtags=python,config,configuration,pydantic,decouple,python-app-config,immutable,casting,env-vars,environmental-variables" target="_blank" title="Share on Twitter">Twitter</a>
    |
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//www.safjan.com/use-decouple-with-pydantic-or-python-dataclass-to-manage-configuration-in-py/" target="_blank" title="Share on Facebook">Facebook</a>
    |
    <a href="https://news.ycombinator.com/submitlink?t=Use%20Decouple%20With%20Pydantic%20or%20Python%20Dataclass%20to%20Manage%20Configuration%20in%20Python%20App&u=https%3A//www.safjan.com/use-decouple-with-pydantic-or-python-dataclass-to-manage-configuration-in-py/" target="_blank" title="Share on HackerNews">HackerNews</a>
    |
    <a href="https://www.reddit.com/submit?url=https%3A//www.safjan.com/use-decouple-with-pydantic-or-python-dataclass-to-manage-configuration-in-py/&title=Use%20Decouple%20With%20Pydantic%20or%20Python%20Dataclass%20to%20Manage%20Configuration%20in%20Python%20App" target="_blank" title="Share via Reddit">Reddit</a>
  </span>
                <br/>
            </p>
            <h1 id="use-decouple-with-pydantic-or-python-dataclass-to-manage-configuration-in-py">Use Decouple With Pydantic or Python Dataclass to Manage Configuration in Python App</h1>
            <div class="header-underline"></div>



        </header>


        <div>
            <p>X::<a href="https://www.safjan.com/python-configuration-management/">Python - Configuration Management</a></p>
<!-- MarkdownTOC levels="2,3" autolink="true" autoanchor="true" -->

<ul>
<li><a href="#usage">Basic Usage</a></li>
<li><a href="#add-pydantic-or-dataclass">Add pydantic or dataclass</a></li>
<li><a href="#using-pydantic">Using <code>pydantic</code>:</a></li>
<li><a href="#using-dataclass">Using <code>dataclass</code>:</a></li>
<li><a href="#advantages-of-using-pydantic-or-dataclass">Advantages of using <code>pydantic</code> or <code>dataclass</code>:</a></li>
<li><a href="#should-the-config-be-immutable">Should the config be immutable?</a></li>
<li><a href="#dataclass--decouple-example">dataclass + decouple example</a></li>
</ul>
<!-- /MarkdownTOC -->

<p><a id="usage"></a></p>
<h2>Basic Usage</h2>
<p><code>python-decouple</code> is a viable alternative to <code>python-dotenv</code> for managing environment variables in Python projects. It allows you to define environment variables in a <code>.env</code> file and access them in your Python code easily. Here's how you can migrate from <code>python-dotenv</code> to <code>python-decouple</code>:</p>
<ol>
<li><strong>Installation</strong>:</li>
</ol>
<p>First, you need to install <code>python-decouple</code> if you haven't already:</p>
<p><code>bash
   pip install python-decouple</code></p>
<ol>
<li><strong>Create a <code>.env</code> file</strong>:</li>
</ol>
<p>If you haven't already, create a <code>.env</code> file in your project directory and add your environment variables in the format <code>KEY=VALUE</code>, one per line. For example:</p>
<p><code>plaintext
   SECRET_KEY=your_secret_key
   DEBUG=True</code></p>
<ol>
<li><strong>Modify your Python code</strong>:</li>
</ol>
<p>Update your Python code to use <code>python-decouple</code> instead of <code>python-dotenv</code>. Here's a basic example:</p>
<p>```python
   # Old code using python-dotenv
   from dotenv import load_dotenv
   import os</p>
<p>load_dotenv()</p>
<p>secret_key = os.getenv('SECRET_KEY')
   debug = os.getenv('DEBUG')</p>
<p>print(f"Secret Key: {secret_key}")
   print(f"Debug Mode: {debug}")
   ```</p>
<p>Migrate to <code>python-decouple</code>:</p>
<p>```python
   # New code using python-decouple
   from decouple import config</p>
<p>secret_key = config('SECRET_KEY')
   debug = config('DEBUG', default=False, cast=bool)</p>
<p>print(f"Secret Key: {secret_key}")
   print(f"Debug Mode: {debug}")
   ```</p>
<p>In the above example:
   - <code>config('SECRET_KEY')</code> reads the value of <code>SECRET_KEY</code> from the <code>.env</code> file.
   - <code>config('DEBUG', default=False, cast=bool)</code> reads the value of <code>DEBUG</code> from the <code>.env</code> file, with a default value of <code>False</code> if <code>DEBUG</code> is not set, and converts it to a boolean.</p>
<p><a id="add-pydantic-or-dataclass"></a></p>
<h2>Add pydantic or dataclass</h2>
<p>Using <code>pydantic</code> or <code>dataclass</code> to define a configuration class in your Python project can  lead to more reliable and pythonic code. Both <code>pydantic</code> and <code>dataclass</code> provide ways to define data structures with type validation and optional default values. Whether your config should be immutable depends on your specific use case and preferences, but immutability can often lead to safer and more predictable behavior, especially in multi-threaded or concurrent environments.</p>
<p>Here's how you can use <code>pydantic</code> and <code>dataclass</code> to define a configuration class for your project:</p>
<p><a id="using-pydantic"></a></p>
<h3>Using <code>pydantic</code></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">secret_key</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

<span class="c1"># Usage</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">(</span><span class="n">secret_key</span><span class="o">=</span><span class="s2">&quot;your_secret_key&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</code></pre></div>

<p><a id="using-dataclass"></a></p>
<h3>Using <code>dataclass</code></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>

<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">AppConfig</span><span class="p">:</span>
    <span class="n">secret_key</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

<span class="c1"># Usage</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">(</span><span class="n">secret_key</span><span class="o">=</span><span class="s2">&quot;your_secret_key&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</code></pre></div>

<p><a id="advantages-of-using-pydantic-or-dataclass"></a></p>
<h3>Advantages of using <code>pydantic</code> or <code>dataclass</code></h3>
<ol>
<li>
<p><strong>Type validation</strong>: Both <code>pydantic</code> and <code>dataclass</code> allow you to specify the types of your configuration attributes, providing type safety and reducing the risk of runtime errors.</p>
</li>
<li>
<p><strong>Default values</strong>: You can specify default values for configuration attributes, making it easier to define a set of common configurations while still allowing customization when needed.</p>
</li>
<li>
<p><strong>Immutability</strong> (with <code>frozen=True</code> in <code>dataclass</code>): Making the configuration class immutable can prevent accidental modification of configuration values, leading to more predictable behavior, especially in multi-threaded or concurrent environments.</p>
</li>
<li>
<p><strong>Pythonic syntax</strong>: Both <code>pydantic</code> and <code>dataclass</code> provide a concise and pythonic syntax for defining data structures, making your code more readable and maintainable.</p>
</li>
</ol>
<p><a id="should-the-config-be-immutable"></a></p>
<h3>Should the config be immutable?</h3>
<p>Whether your config should be immutable depends on your specific use case and requirements. Here are some considerations:</p>
<ul>
<li><strong>Predictability</strong>: Immutability can make your code more predictable by preventing accidental changes to configuration values.</li>
<li><strong>Concurrency</strong>: In multi-threaded or concurrent environments, immutability can help prevent race conditions and synchronization issues.</li>
<li><strong>Testing</strong>: Immutable objects are often easier to test since you don't need to worry about side effects from modifications.</li>
</ul>
<p>However, if you anticipate needing to modify configuration values dynamically at runtime, immutability may not be suitable for your use case. Ultimately, consider your project's requirements and design your configuration class accordingly.</p>
<p><a id="dataclass--decouple-example"></a></p>
<h2>dataclass + decouple example</h2>
<p>Here is an example demonstrating how to combine <code>dataclass</code> with <code>python-decouple</code> to manage configuration in a Python project:</p>
<ol>
<li><strong>Install <code>python-decouple</code></strong>:</li>
</ol>
<p>If you haven't already, install <code>python-decouple</code>:</p>
<p><code>bash
   pip install python-decouple</code></p>
<ol>
<li><strong>Create a <code>.env</code> file</strong>:</li>
</ol>
<p>Create a <code>.env</code> file in your project directory and add your environment variables:</p>
<p><code>plaintext
   SECRET_KEY=your_secret_key
   DEBUG=True</code></p>
<ol>
<li><strong>Define a <code>dataclass</code> for configuration</strong>:</li>
</ol>
<p>Create a Python file (e.g., <code>config.py</code>) and define a <code>dataclass</code> for your configuration:</p>
<p>```python
   from dataclasses import dataclass</p>
<p>@dataclass
   class AppConfig:
       secret_key: str
       debug: bool
   ```</p>
<ol>
<li><strong>Read configuration from <code>.env</code> using <code>decouple</code></strong>:</li>
</ol>
<p>Modify your <code>config.py</code> file to read the configuration from the <code>.env</code> file using <code>decouple</code>:</p>
<p>```python
   from dataclasses import dataclass
   from decouple import config</p>
<p>@dataclass
   class AppConfig:
       secret_key: str = config('SECRET_KEY')
       debug: bool = config('DEBUG', default=False, cast=bool)</p>
<p># Create an instance of AppConfig
   config = AppConfig()
   ```</p>
<ol>
<li><strong>Usage</strong>:</li>
</ol>
<p>Now you can use the <code>AppConfig</code> class instance in your project to access configuration values:</p>
<p>```python
   from config import config</p>
<p># Access configuration values
   print(f"Secret Key: {config.secret_key}")
   print(f"Debug Mode: {config.debug}")
   ```</p>
<p>With this setup, you're using <code>dataclass</code> to define a structured configuration class, and <code>decouple</code> to read configuration values from the <code>.env</code> file. This combination allows you to manage your project's configuration in a more organized and pythonic way.</p>
        </div>


        <div class="tag-cloud">
            <p>
                    <br/><br/>Tags:&nbsp;
                        <a href="https://www.safjan.com/tag/python/">python</a>
                        <a href="https://www.safjan.com/tag/config/">config</a>
                        <a href="https://www.safjan.com/tag/configuration/">configuration</a>
                        <a href="https://www.safjan.com/tag/pydantic/">pydantic</a>
                        <a href="https://www.safjan.com/tag/decouple/">decouple</a>
                        <a href="https://www.safjan.com/tag/python-app-config/">python-app-config</a>
                        <a href="https://www.safjan.com/tag/immutable/">immutable</a>
                        <a href="https://www.safjan.com/tag/casting/">casting</a>
                        <a href="https://www.safjan.com/tag/env-vars/">env-vars</a>
                        <a href="https://www.safjan.com/tag/environmental-variables/">environmental-variables</a>
            </p>
        </div>








            <div class="related-posts">
                <h4>You might enjoy</h4>
                <ul class="related-posts">
                        <li><a href="https://www.safjan.com/python-configuration-management/">Python - Configuration Management</a></li>
                        <li><a href="https://www.safjan.com/the-importance-of-adding-py-typed-file-to-your-typed-package/">The Importance of Adding a `py.typed` File to Your Typed Package</a></li>
                        <li><a href="https://www.safjan.com/python-project-with-Poetry-add-poetry-lock-to-the-git-repo-or-ignore-it/">In the Python project made with Poetry shall I add poetry.lock to the git repo or ignore it?</a></li>
                        <li><a href="https://www.safjan.com/techniques-to-boost-rag-performance-in-production/">Techniques to Boost RAG Performance in Production</a></li>
                        <li><a href="https://www.safjan.com/python-expertise-level-self-assessment/">Python Expertise Level - Self-Assessment</a></li>
                </ul>
            </div>

  <div class="neighbors">
    <a class="btn float-left" href="https://www.safjan.com/osi-approved-in-license-metadata-for-python-project/" title="OSI Approved in license metadata for Python project">
      <i class="fa fa-angle-left"></i> Previous Post
    </a>
    <a class="btn float-right" href="https://www.safjan.com/ragas-metrics-cheat-sheet/" title="RAGAS metrics cheat sheet">
      Next Post <i class="fa fa-angle-right"></i>
    </a>
  </div>


    </article>

    <footer>
<p>
  &copy; 2024 Krystian Safjan - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/deed.en_US" target="_blank">Creative Commons Attribution-ShareAlike</a>
</p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
</main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Krystian Safjan's Blog ",
  "url" : "https://www.safjan.com",
  "image": "/images/profile_new.jpg",
  "description": ""
}
</script>

</body>
</html>