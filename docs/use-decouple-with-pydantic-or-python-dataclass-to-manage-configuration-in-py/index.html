
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="color-scheme" content="light dark"/>
    <script>
      (function() {
        var theme = localStorage.getItem('theme-preference');
        if (theme === 'dark' || theme === 'light') {
          document.documentElement.setAttribute('data-theme', theme);
        }
      })();
    </script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="HandheldFriendly" content="True"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"/>
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap"
              rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/stylesheet/style.css">


    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/pygments/github.min.css">


    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/fontawesome.css">
    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/brands.css">
    <link rel="stylesheet" type="text/css" href="https://www.safjan.com/theme/font-awesome/css/solid.css">

    <link rel="stylesheet" href="/pagefind/pagefind-ui.css">

        <link rel="stylesheet" type="text/css"
              href="https://www.safjan.com/styles/custom.css">

        <link href="https://www.safjan.com/feeds/all.atom.xml?utm_source=rss&utm_medium=feed&utm_campaign=rss-feed" type="application/atom+xml" rel="alternate"
              title="Krystian Safjan's Blog Atom">

        <link href="https://www.safjan.com/feeds/all.rss.xml?utm_source=rss&utm_medium=feed&utm_campaign=rss-feed" type="application/rss+xml" rel="alternate"
              title="Krystian Safjan's Blog RSS">


    <link rel="apple-touch-icon" sizes="180x180" href="https://www.safjan.com/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://www.safjan.com/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://www.safjan.com/favicon-16x16.png">
    <link rel="shortcut icon" href="https://www.safjan.com/favicon.ico">
    <link rel="manifest" href="https://www.safjan.com/site.webmanifest">
    <meta name="theme-color" content="#333333">
    <meta name="apple-mobile-web-app-title" content="Krystian Safjan's Blog">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RM2PKDCCYM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RM2PKDCCYM');
</script>
<!-- End of Google tag (gtag.js) -->



    <meta name="author" content="Krystian Safjan"/>
    <meta name="description" content="Learn how to use python-decouple with Pydantic or dataclasses for managing configuration in Python applications, including basic setup and advantages of using these tools."/>
    <meta name="keywords" content="python, config, configuration, pydantic, decouple, python-app-config, immutable, casting, env-vars, environmental-variables">


  <meta property="og:site_name" content="Krystian Safjan's Blog"/>
  <meta property="og:title" content="Use Decouple With Pydantic or Python Dataclass to Manage Configuration in Python App"/>
  <meta property="og:description" content="Learn how to use python-decouple with Pydantic or dataclasses for managing configuration in Python applications, including basic setup and advantages of using these tools."/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="https://www.safjan.com/use-decouple-with-pydantic-or-python-dataclass-to-manage-configuration-in-py/"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2024-04-19 00:00:00+02:00"/>
  <meta property="article:modified_time" content="2024-04-19 00:00:00+02:00"/>
  <meta property="article:author" content="https://www.safjan.com/author/krystian-safjan/"/>
  <meta property="article:section" content="note"/>
  <meta property="article:tag" content="python"/>
  <meta property="article:tag" content="config"/>
  <meta property="article:tag" content="configuration"/>
  <meta property="article:tag" content="pydantic"/>
  <meta property="article:tag" content="decouple"/>
  <meta property="article:tag" content="python-app-config"/>
  <meta property="article:tag" content="immutable"/>
  <meta property="article:tag" content="casting"/>
  <meta property="article:tag" content="env-vars"/>
  <meta property="article:tag" content="environmental-variables"/>
  <meta property="og:image" content="/images/profile_new.jpg"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image" content="/images/profile_new.jpg"/>
    <meta name="twitter:image:alt" content="Krystian Safjan's Blog"/>


    <meta name="twitter:site" content="@izikeros"/>
    <meta name="twitter:creator" content="@izikeros"/>
    <meta name="twitter:title" content="Use Decouple With Pydantic or Python Dataclass to Manage Configuration in Python App"/>
    <meta name="twitter:description" content="Learn how to use python-decouple with Pydantic or dataclasses for managing configuration in Python applications, including basic setup and advantages of using these tools."/>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.safjan.com/use-decouple-with-pydantic-or-python-dataclass-to-manage-configuration-in-py/"
  },
  "headline": "Use Decouple With Pydantic or Python Dataclass to Manage Configuration in Python App",
  "datePublished": "2024-04-19T00:00:00+02:00",
  "dateModified": "2024-04-19T00:00:00+02:00",
  "author": {
    "@type": "Person",
    "name": "Krystian Safjan",
    "url": "https://www.safjan.com/author/krystian-safjan/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Krystian Safjan's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "/images/profile_new.jpg"
    }  },
"image": "/images/profile_new.jpg",  "url": "https://www.safjan.com/use-decouple-with-pydantic-or-python-dataclass-to-manage-configuration-in-py/",
  "description": "Learn how to use python-decouple with Pydantic or dataclasses for managing configuration in Python applications, including basic setup and advantages of...",
  "articleSection": "note",
  "inLanguage": "en",
  "keywords": "python, config, configuration, pydantic, decouple, python-app-config, immutable, casting, env-vars, environmental-variables",
  "wordCount": 788,
  "speakable": {
    "@type": "SpeakableSpecification",
    "cssSelector": ["article h1", ".summary", ".tldr", "article \u003e p:first-of-type"]
  }}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://www.safjan.com/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "note",
      "item": "https://www.safjan.com/category/note.html"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Use Decouple With Pydantic or Python Dataclass..."
    }
  ]
}
</script>



<meta name="ai:summary" content="Learn how to use python-decouple with Pydantic or dataclasses for managing configuration in Python applications, including basic setup and advantages of using these tools.">

<meta name="ai:topics" content="python, config, configuration, pydantic, decouple, python-app-config, immutable, casting, env-vars, environmental-variables">



<meta name="ai:word-count" content="788">
<meta name="ai:reading-time" content="3 min">

<meta name="ai:section" content="note">



<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">

    <title>    Use Decouple With Pydantic or Python Dataclass to Manage Configuration in Python App
</title>



<!-- Google Automatic Ads -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9767732578835199"
     crossorigin="anonymous"></script>
<!-- End of Google Automatic Ads -->


</head>
<body>
<div id="reading-progress" class="reading-progress"></div>
<aside>
    <div>
        <a href="https://www.safjan.com/">
                <img src="/images/profile_new.jpg" alt="Krystian Safjan's Blog" title="Krystian Safjan's Blog" width="140" height="140">
        </a>

        <h1>
            <a href="https://www.safjan.com/">Krystian Safjan's Blog</a>
        </h1>

<p>Data Scientist and Team Leader writing about Machine Learning, MLOps, and Python</p>


        <ul class="social">
                <li>
                    <a  class="sc-linkedin" href="https://pl.linkedin.com/in/krystiansafjan"
                       target="_blank">
                        <i class="fab fa-linkedin"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-github" href="https://github.com/izikeros"
                       target="_blank">
                        <i class="fab fa-github"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-envelope" href="mailto:ksafjan@gmail.com"
                       target="_blank">
                        <i class="fas fa-envelope"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-graduation-cap" href="https://scholar.google.pl/citations?user=UlNJgMoAAAAJ"
                       target="_blank">
                        <i class="fas fa-graduation-cap"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-rss" href="/feeds/all.rss.xml"
                       target="_blank">
                        <i class="fas fa-rss"></i>
                    </a>
                </li>
        </ul>
    </div>

<div class="promo-box">
    <a href="https://ksafjanuser.gumroad.com/l/mlops" class="promo-box-image">
        <img src="/images/mlop_interview_book_cover_3D_300px.jpg" alt="MLOps Interview Book Cover">
    </a>
    
    <p class="promo-box-headline">Ace Your MLOps Interview</p>
    
    <a href="https://ksafjanuser.gumroad.com/l/mlops" class="promo-box-cta">
        Get for $2.99
    </a>
    
    <p class="promo-box-features">50 Q&A â€¢ PDF/ePUB/mobi</p>
</div>
</aside>
<main>

        <nav aria-label="Main navigation">
            <a href="https://www.safjan.com/">Home</a>

                <a href="/archives.html">Articles</a>
                <a href="/til.html">Notes</a>
                <a href="/categories.html">Categories</a>
                <a href="/pdfs/Krystian_Safjan_resume_priv.pdf">Resume</a>

                <a href="https://www.safjan.com/feeds/all.atom.xml">Atom</a>

                <a href="https://www.safjan.com/feeds/all.rss.xml">RSS</a>

            <div id="search" class="nav-search"></div>
            <button type="button" id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
                <i class="fas fa-sun"></i>
                <i class="fas fa-moon"></i>
            </button>
        </nav>

    <article class="single">
        <header>
                
            <p>
                <!-- Posted on: -->
                2024-04-19 


                <br/>
            </p>
            <h1>Use Decouple With Pydantic or Python Dataclass to Manage Configuration in Python App</h1>
            <div class="header-underline"></div>



        </header>




        <div class="article-content">
            <p><a href="https://www.safjan.com/python-configuration-management/">Python - Configuration Management</a></p>
<!-- MarkdownTOC levels="2,3" autolink="true" autoanchor="true" -->

<ul>
<li><a href="#usage">Basic Usage</a></li>
<li><a href="#add-pydantic-or-dataclass">Add pydantic or dataclass</a></li>
<li><a href="#using-pydantic">Using <code>pydantic</code>:</a></li>
<li><a href="#using-dataclass">Using <code>dataclass</code>:</a></li>
<li><a href="#advantages-of-using-pydantic-or-dataclass">Advantages of using <code>pydantic</code> or <code>dataclass</code>:</a></li>
<li><a href="#should-the-config-be-immutable">Should the config be immutable?</a></li>
<li><a href="#dataclass--decouple-example">dataclass + decouple example</a></li>
</ul>
<!-- /MarkdownTOC -->

<h2 id="basic-usage">Basic Usage</h2>
<p><code>python-decouple</code> is a viable alternative to <code>python-dotenv</code> for managing environment variables in Python projects. It allows you to define environment variables in a <code>.env</code> file and access them in your Python code easily. Here's how you can migrate from <code>python-dotenv</code> to <code>python-decouple</code>:</p>
<ol>
<li><strong>Installation</strong>:</li>
</ol>
<p>First, you need to install <code>python-decouple</code> if you haven't already:</p>
<p><code>bash
   pip install python-decouple</code></p>
<ol>
<li><strong>Create a <code>.env</code> file</strong>:</li>
</ol>
<p>If you haven't already, create a <code>.env</code> file in your project directory and add your environment variables in the format <code>KEY=VALUE</code>, one per line. For example:</p>
<p><code>plaintext
   SECRET_KEY=your_secret_key
   DEBUG=True</code></p>
<ol>
<li><strong>Modify your Python code</strong>:</li>
</ol>
<p>Update your Python code to use <code>python-decouple</code> instead of <code>python-dotenv</code>. Here's a basic example:</p>
<p>```python
   # Old code using python-dotenv
   from dotenv import load_dotenv
   import os</p>
<p>load_dotenv()</p>
<p>secret_key = os.getenv('SECRET_KEY')
   debug = os.getenv('DEBUG')</p>
<p>print(f"Secret Key: {secret_key}")
   print(f"Debug Mode: {debug}")
   ```</p>
<p>Migrate to <code>python-decouple</code>:</p>
<p>```python
   # New code using python-decouple
   from decouple import config</p>
<p>secret_key = config('SECRET_KEY')
   debug = config('DEBUG', default=False, cast=bool)</p>
<p>print(f"Secret Key: {secret_key}")
   print(f"Debug Mode: {debug}")
   ```</p>
<p>In the above example:
   - <code>config('SECRET_KEY')</code> reads the value of <code>SECRET_KEY</code> from the <code>.env</code> file.
   - <code>config('DEBUG', default=False, cast=bool)</code> reads the value of <code>DEBUG</code> from the <code>.env</code> file, with a default value of <code>False</code> if <code>DEBUG</code> is not set, and converts it to a boolean.</p>
<h2 id="add-pydantic-or-dataclass">Add pydantic or dataclass</h2>
<p>Using <code>pydantic</code> or <code>dataclass</code> to define a configuration class in your Python project can  lead to more reliable and pythonic code. Both <code>pydantic</code> and <code>dataclass</code> provide ways to define data structures with type validation and optional default values. Whether your config should be immutable depends on your specific use case and preferences, but immutability can often lead to safer and more predictable behavior, especially in multi-threaded or concurrent environments.</p>
<p>Here's how you can use <code>pydantic</code> and <code>dataclass</code> to define a configuration class for your project:</p>
<h3 id="using-pydantic">Using <code>pydantic</code></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">secret_key</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

<span class="c1"># Usage</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">(</span><span class="n">secret_key</span><span class="o">=</span><span class="s2">&quot;your_secret_key&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</code></pre></div>

<h3 id="using-dataclass">Using <code>dataclass</code></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>

<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">AppConfig</span><span class="p">:</span>
    <span class="n">secret_key</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

<span class="c1"># Usage</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">(</span><span class="n">secret_key</span><span class="o">=</span><span class="s2">&quot;your_secret_key&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</code></pre></div>

<h3 id="advantages-of-using-pydantic-or-dataclass">Advantages of using <code>pydantic</code> or <code>dataclass</code></h3>
<ol>
<li>
<p><strong>Type validation</strong>: Both <code>pydantic</code> and <code>dataclass</code> allow you to specify the types of your configuration attributes, providing type safety and reducing the risk of runtime errors.</p>
</li>
<li>
<p><strong>Default values</strong>: You can specify default values for configuration attributes, making it easier to define a set of common configurations while still allowing customization when needed.</p>
</li>
<li>
<p><strong>Immutability</strong> (with <code>frozen=True</code> in <code>dataclass</code>): Making the configuration class immutable can prevent accidental modification of configuration values, leading to more predictable behavior, especially in multi-threaded or concurrent environments.</p>
</li>
<li>
<p><strong>Pythonic syntax</strong>: Both <code>pydantic</code> and <code>dataclass</code> provide a concise and pythonic syntax for defining data structures, making your code more readable and maintainable.</p>
</li>
</ol>
<h3 id="should-the-config-be-immutable">Should the config be immutable?</h3>
<p>Whether your config should be immutable depends on your specific use case and requirements. Here are some considerations:</p>
<ul>
<li><strong>Predictability</strong>: Immutability can make your code more predictable by preventing accidental changes to configuration values.</li>
<li><strong>Concurrency</strong>: In multi-threaded or concurrent environments, immutability can help prevent race conditions and synchronization issues.</li>
<li><strong>Testing</strong>: Immutable objects are often easier to test since you don't need to worry about side effects from modifications.</li>
</ul>
<p>However, if you anticipate needing to modify configuration values dynamically at runtime, immutability may not be suitable for your use case. Ultimately, consider your project's requirements and design your configuration class accordingly.</p>
<h2 id="dataclass-decouple-example">dataclass + decouple example</h2>
<p>Here is an example demonstrating how to combine <code>dataclass</code> with <code>python-decouple</code> to manage configuration in a Python project:</p>
<ol>
<li><strong>Install <code>python-decouple</code></strong>:</li>
</ol>
<p>If you haven't already, install <code>python-decouple</code>:</p>
<p><code>bash
   pip install python-decouple</code></p>
<ol>
<li><strong>Create a <code>.env</code> file</strong>:</li>
</ol>
<p>Create a <code>.env</code> file in your project directory and add your environment variables:</p>
<p><code>plaintext
   SECRET_KEY=your_secret_key
   DEBUG=True</code></p>
<ol>
<li><strong>Define a <code>dataclass</code> for configuration</strong>:</li>
</ol>
<p>Create a Python file (e.g., <code>config.py</code>) and define a <code>dataclass</code> for your configuration:</p>
<p>```python
   from dataclasses import dataclass</p>
<p>@dataclass
   class AppConfig:
       secret_key: str
       debug: bool
   ```</p>
<ol>
<li><strong>Read configuration from <code>.env</code> using <code>decouple</code></strong>:</li>
</ol>
<p>Modify your <code>config.py</code> file to read the configuration from the <code>.env</code> file using <code>decouple</code>:</p>
<p>```python
   from dataclasses import dataclass
   from decouple import config</p>
<p>@dataclass
   class AppConfig:
       secret_key: str = config('SECRET_KEY')
       debug: bool = config('DEBUG', default=False, cast=bool)</p>
<p># Create an instance of AppConfig
   config = AppConfig()
   ```</p>
<ol>
<li><strong>Usage</strong>:</li>
</ol>
<p>Now you can use the <code>AppConfig</code> class instance in your project to access configuration values:</p>
<p>```python
   from config import config</p>
<p># Access configuration values
   print(f"Secret Key: {config.secret_key}")
   print(f"Debug Mode: {config.debug}")
   ```</p>
<p>With this setup, you're using <code>dataclass</code> to define a structured configuration class, and <code>decouple</code> to read configuration values from the <code>.env</code> file. This combination allows you to manage your project's configuration in a more organized and pythonic way.</p>
        </div>


        <div class="article-tags">
            <span class="tags-label">Tags:</span>
                <a href="https://www.safjan.com/tag/python/" class="article-tag">python</a>
                <a href="https://www.safjan.com/tag/config/" class="article-tag">config</a>
                <a href="https://www.safjan.com/tag/configuration/" class="article-tag">configuration</a>
                <a href="https://www.safjan.com/tag/pydantic/" class="article-tag">pydantic</a>
                <a href="https://www.safjan.com/tag/decouple/" class="article-tag">decouple</a>
                <a href="https://www.safjan.com/tag/python-app-config/" class="article-tag">python-app-config</a>
                <a href="https://www.safjan.com/tag/immutable/" class="article-tag">immutable</a>
                <a href="https://www.safjan.com/tag/casting/" class="article-tag">casting</a>
                <a href="https://www.safjan.com/tag/env-vars/" class="article-tag">env-vars</a>
                <a href="https://www.safjan.com/tag/environmental-variables/" class="article-tag">environmental-variables</a>
        </div>







            <div class="related-posts">
                <h4 class="related-posts-title">You might also like</h4>
                <div class="related-posts-grid">
                        <a href="https://www.safjan.com/python-configuration-management/" class="related-post-card">
                            <span class="related-post-title">Python - Configuration Management</span>
                            <span class="related-post-date">Apr 14, 2022</span>
                        </a>
                        <a href="https://www.safjan.com/understanding-pythons-copy-vs-deepcopy-when-to-use-each/" class="related-post-card">
                            <span class="related-post-title">Understanding Python's `copy` vs `deepcopy` - When to Use Each</span>
                            <span class="related-post-date">Mar 20, 2025</span>
                        </a>
                        <a href="https://www.safjan.com/ragas-mlflow-rag-evaluation-tutorial/" class="related-post-card">
                            <span class="related-post-title">RAG Evaluation with RAGAS and MLflow - A Practical Guide</span>
                            <span class="related-post-date">Jan 08, 2026</span>
                        </a>
                        <a href="https://www.safjan.com/python-protocols-structural-subtyping/" class="related-post-card">
                            <span class="related-post-title">Understanding Python Protocols - Structural Subtyping in Practice</span>
                            <span class="related-post-date">Oct 29, 2025</span>
                        </a>
                </div>
            </div>




    </article>

    <footer>
<p>
  &copy; 2026 Krystian Safjan - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/deed.en_US" target="_blank">Creative Commons Attribution-ShareAlike</a>
</p>    </footer>
</main>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Blog",
  "name": "Krystian Safjan's Blog",
  "url": "https://www.safjan.com",
"image": "/images/profile_new.jpg",  "description": ""
}
</script>


<script src="/pagefind/pagefind-ui.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', function() {
        new PagefindUI({
            element: "#search",
            showSubResults: false,
            showImages: false,
            basePath: "/pagefind/"
        });
    });
</script>

<script src="https://www.safjan.com/theme/js/theme-switcher.js"></script>

<style>
.video-embed {
    position: relative;
    width: 100%;
    padding-bottom: 56.25%;
    background: #000;
    border-radius: 0.375rem;
    overflow: hidden;
}
.video-embed iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
}
.video-embed-wrapper {
    margin-bottom: 1rem;
}
.video-embed-info {
    padding: 0.5rem 0.75rem;
    background: var(--color-bg-secondary, #f6f8fa);
    border-radius: 0 0 0.375rem 0.375rem;
    font-size: 0.875rem;
    margin-top: -0.375rem;
}
.video-embed-info a {
    text-decoration: none;
    color: inherit;
}
.video-embed-info a:hover {
    text-decoration: underline;
}
</style>
<script>
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('pre > code').forEach(function(code) {
        var text = code.textContent.trim();
        var lines = text.split('\n');
        var url = lines[0].trim();

        var videoId = null;
        var embedUrl = null;
        var platform = null;

        // YouTube detection
        var ytMatch = url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/);
        if (ytMatch) {
            videoId = ytMatch[1];
            embedUrl = 'https://www.youtube-nocookie.com/embed/' + videoId;
            platform = 'youtube';
        }

        // Vimeo detection
        var vimeoMatch = url.match(/vimeo\.com\/(?:video\/)?(\d+)/);
        if (vimeoMatch) {
            videoId = vimeoMatch[1];
            embedUrl = 'https://player.vimeo.com/video/' + videoId + '?dnt=1';
            platform = 'vimeo';
        }

        if (!videoId || !embedUrl) return;

        var meta = {};
        lines.slice(1).forEach(function(line) {
            var m = line.match(/^(\w+):\s*(.+)$/);
            if (m) meta[m[1].toLowerCase()] = m[2].trim();
        });

        var wrapper = document.createElement('div');
        wrapper.className = 'video-embed-wrapper';

        var embed = document.createElement('div');
        embed.className = 'video-embed';
        embed.innerHTML = '<iframe src="' + embedUrl +
            '" allowfullscreen loading="lazy" title="' + (meta.title || (platform === 'youtube' ? 'YouTube video' : 'Vimeo video')).replace(/"/g, '&quot;') + '"></iframe>';
        wrapper.appendChild(embed);

        if (meta.title || meta.author) {
            var info = document.createElement('div');
            info.className = 'video-embed-info';
            var html = meta.title ? '<strong>' + meta.title + '</strong>' : '';
            if (meta.author) {
                html += (meta.title ? ' &bull; ' : '');
                html += meta.authorurl ? '<a href="' + meta.authorurl + '" target="_blank" rel="noopener">' + meta.author + '</a>' : meta.author;
            }
            info.innerHTML = html;
            wrapper.appendChild(info);
        }
        code.closest('pre').replaceWith(wrapper);
    });
});
</script>

<style>
.tweet-embed-wrapper {
    margin-bottom: 1rem;
}
.tweet-embed-loading {
    padding: 1rem;
    background: var(--color-bg-secondary, #f6f8fa);
    border-radius: 0.375rem;
    color: var(--color-text-secondary, #6c757d);
    font-size: 0.875rem;
}
</style>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var twitterScriptLoaded = false;

    function loadTwitterScript() {
        if (twitterScriptLoaded) return;
        twitterScriptLoaded = true;
        var script = document.createElement('script');
        script.src = 'https://platform.twitter.com/widgets.js';
        script.async = true;
        document.body.appendChild(script);
    }

    document.querySelectorAll('pre > code.language-tweet').forEach(function(code) {
        var text = code.textContent.trim();
        var url = text.split('\n')[0].trim();

        // Twitter/X URL detection
        var tweetMatch = url.match(/^https?:\/\/(twitter\.com|x\.com)\/\w+\/status\/(\d+)/);
        if (!tweetMatch) return;

        var wrapper = document.createElement('div');
        wrapper.className = 'tweet-embed-wrapper';
        wrapper.innerHTML = '<div class="tweet-embed-loading">Loading tweet...</div>';

        code.closest('pre').replaceWith(wrapper);

        // Fetch oEmbed data
        var oembedUrl = 'https://publish.twitter.com/oembed?url=' + encodeURIComponent(url) + '&dnt=true&omit_script=true';

        fetch(oembedUrl)
            .then(function(response) { return response.json(); })
            .then(function(data) {
                wrapper.innerHTML = data.html;
                loadTwitterScript();
                if (window.twttr && window.twttr.widgets) {
                    window.twttr.widgets.load(wrapper);
                }
            })
            .catch(function() {
                wrapper.innerHTML = '<div class="tweet-embed-loading">Failed to load tweet. <a href="' + url + '" target="_blank" rel="noopener">View on Twitter</a></div>';
            });
    });
});
</script>
</body>
</html>