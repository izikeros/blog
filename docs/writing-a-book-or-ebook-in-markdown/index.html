
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="color-scheme" content="light dark"/>
    <script>
      (function() {
        var theme = localStorage.getItem('theme-preference');
        if (theme === 'dark' || theme === 'light') {
          document.documentElement.setAttribute('data-theme', theme);
        }
      })();
    </script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="HandheldFriendly" content="True"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"/>
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap"
              rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="http://127.0.0.1:8000/theme/stylesheet/style.css">


    <link rel="stylesheet" type="text/css" href="http://127.0.0.1:8000/theme/pygments/github.min.css">


    <link rel="stylesheet" type="text/css" href="http://127.0.0.1:8000/theme/font-awesome/css/fontawesome.css">
    <link rel="stylesheet" type="text/css" href="http://127.0.0.1:8000/theme/font-awesome/css/brands.css">
    <link rel="stylesheet" type="text/css" href="http://127.0.0.1:8000/theme/font-awesome/css/solid.css">

    <link rel="stylesheet" href="http://127.0.0.1:8000/pagefind/pagefind-ui.css">

        <link rel="stylesheet" type="text/css"
              href="http://127.0.0.1:8000/styles/custom.css">








    <meta name="author" content="Krystian Safjan"/>
    <meta name="description" content="Write, format, and style your ebook with ease using Markdown, Pandoc, CSS, Calibre, and Git."/>
    <meta name="keywords" content="markdown, content-creation, pandoc, calibre, git, epub, mobi, Asciidoctor, weasyprint">


  <meta property="og:site_name" content="Krystian Safjan's Blog"/>
  <meta property="og:title" content="Writing a Book or Ebook in Markdown"/>
  <meta property="og:description" content="Write, format, and style your ebook with ease using Markdown, Pandoc, CSS, Calibre, and Git."/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="http://127.0.0.1:8000/writing-a-book-or-ebook-in-markdown/"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2023-02-02 00:00:00+01:00"/>
  <meta property="article:modified_time" content="2023-07-12 00:00:00+02:00"/>
  <meta property="article:author" content="http://127.0.0.1:8000/author/krystian-safjan/"/>
  <meta property="article:section" content="note"/>
  <meta property="article:tag" content="markdown"/>
  <meta property="article:tag" content="content-creation"/>
  <meta property="article:tag" content="pandoc"/>
  <meta property="article:tag" content="calibre"/>
  <meta property="article:tag" content="git"/>
  <meta property="article:tag" content="epub"/>
  <meta property="article:tag" content="mobi"/>
  <meta property="article:tag" content="Asciidoctor"/>
  <meta property="article:tag" content="weasyprint"/>
  <meta property="og:image" content="/images/profile_new.jpg"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image" content="/images/profile_new.jpg"/>
    <meta name="twitter:image:alt" content="Krystian Safjan's Blog"/>


    <meta name="twitter:site" content="@izikeros"/>
    <meta name="twitter:creator" content="@izikeros"/>
    <meta name="twitter:title" content="Writing a Book or Ebook in Markdown"/>
    <meta name="twitter:description" content="Write, format, and style your ebook with ease using Markdown, Pandoc, CSS, Calibre, and Git."/>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://127.0.0.1:8000/writing-a-book-or-ebook-in-markdown/"
  },
  "headline": "Writing a Book or Ebook in Markdown",
  "datePublished": "2023-02-02T00:00:00+01:00",
  "dateModified": "2023-07-12T00:00:00+02:00",
  "author": {
    "@type": "Person",
    "name": "Krystian Safjan",
    "url": "http://127.0.0.1:8000/author/krystian-safjan/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Krystian Safjan's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "/images/profile_new.jpg"
    }  },
"image": "/images/profile_new.jpg",  "url": "http://127.0.0.1:8000/writing-a-book-or-ebook-in-markdown/",
  "description": "Write, format, and style your ebook with ease using Markdown, Pandoc, CSS, Calibre, and Git."
}
</script>

    <title>    Writing a Book or Ebook in Markdown
</title>



<!-- Google Automatic Ads -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9767732578835199"
     crossorigin="anonymous"></script>
<!-- End of Google Automatic Ads -->


</head>
<body>
<div id="reading-progress" class="reading-progress"></div>
<aside>
    <div>
        <a href="http://127.0.0.1:8000/">
                <img src="/images/profile_new.jpg" alt="Krystian Safjan's Blog" title="Krystian Safjan's Blog" width="140" height="140">
        </a>

        <h1>
            <a href="http://127.0.0.1:8000/">Krystian Safjan's Blog</a>
        </h1>

<p>Data Scientist | Researcher | Team Leader<br><br> working at Ernst &amp; Young and writing about <a href="/category/machine-learning.html">Data Science and Visualization</a>, on <a href="/category/machine-learning.html">Machine Learning, Deep Learning</a> and <a href="/tag/nlp/">NLP</a>. There are also some <a href="/category/howto.html">howto</a> posts on tools and workflows.</p>


        <ul class="social">
                <li>
                    <a  class="sc-linkedin" href="https://pl.linkedin.com/in/krystiansafjan"
                       target="_blank">
                        <i class="fab fa-linkedin"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-github" href="https://github.com/izikeros"
                       target="_blank">
                        <i class="fab fa-github"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-envelope" href="mailto:ksafjan@gmail.com"
                       target="_blank">
                        <i class="fas fa-envelope"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-graduation-cap" href="https://scholar.google.pl/citations?user=UlNJgMoAAAAJ"
                       target="_blank">
                        <i class="fas fa-graduation-cap"></i>
                    </a>
                </li>
                <li>
                    <a  class="sc-rss" href="/feeds/all.rss.xml"
                       target="_blank">
                        <i class="fas fa-rss"></i>
                    </a>
                </li>
        </ul>
    </div>

<div class="promo-box">
    <a href="https://ksafjanuser.gumroad.com/l/mlops" class="promo-box-image">
        <img src="/images/mlop_interview_book_cover_3D_300px.jpg" alt="MLOps Interview Book Cover">
    </a>
    
    <p class="promo-box-headline">Ace Your MLOps Interview</p>
    
    <a href="https://ksafjanuser.gumroad.com/l/mlops" class="promo-box-cta">
        Get for $2.99
    </a>
    
    <p class="promo-box-features">50 Q&A â€¢ PDF/ePUB/mobi</p>
</div>
</aside>
<main>

        <nav>
            <a href="http://127.0.0.1:8000/">Home</a>

                <a href="/archives.html">Articles</a>
                <a href="/til.html">Notes</a>
                <a href="/categories.html">Categories</a>
                <a href="/pdfs/Krystian_Safjan_resume_priv.pdf">Resume</a>



            <div id="search" class="nav-search"></div>
            <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
                <i class="fas fa-sun"></i>
                <i class="fas fa-moon"></i>
            </button>
        </nav>

    <article class="single">
        <header>
                
            <p>
                <!-- Posted on: -->
                2023-02-02 


                <br/>
            </p>
            <h1 id="writing-a-book-or-ebook-in-markdown">Writing a Book or Ebook in Markdown</h1>
            <div class="header-underline"></div>



        </header>



        <details class="toc-details" id="toc-container">
            <summary>Table of Contents</summary>
            <nav class="toc" aria-label="Table of Contents">
                <ul class="toc-list"></ul>
            </nav>
        </details>

        <div class="article-content">
            <h2 id="general-approach">General approach</h2>
<p>To write a book in Markdown and style the rendered ebook, you can use a combination of the following tools:</p>
<ol>
<li>A plain <strong>text editor</strong>, such as Sublime Text or Atom, to write your book in Markdown.</li>
<li><strong>Pandoc</strong>, a command-line tool that can convert your Markdown files to various ebook formats, such as EPUB, MOBI, and PDF. It also supports styling the output using a template.</li>
<li>A <strong>style sheet</strong> written in CSS, which can be used to style the output generated by Pandoc.</li>
<li><strong>Calibre</strong>, an open-source ebook management software that can be used to convert and preview your book in different formats. It also includes a built-in editor that supports editing and previewing the book in EPUB, MOBI, and other formats.</li>
<li><strong>Git</strong>, a version control system that can help you track changes in your book and collaborate with other authors.</li>
</ol>
<p>You can use these tools to write, format, and style your book, and then convert it to various ebook formats.</p>
<p>Additionally, you can use tools like <strong>Jekyll</strong>, <strong>Hugo</strong>, or <strong>Asciidoctor</strong> which are static site generators and allow you to write your book in markdown and output a website or ebook with a template and styles.</p>
<p>Pandoc and Gitbook are two popular tools for writing books in markdown format. They allow for easy conversion to various ebook formats, including PDF and ePub, and have support for custom templates and styles. Pandoc uses a markdown syntax that supports formatting, metadata, and the inclusion of external files. Gitbook provides a more feature-rich platform, with support for collaboration, versioning, and integration with other tools like GitHub. Both tools can handle books with multiple chapters in separate files and allow you to control the style of the rendered ebook.</p>
<p>[[writing_book_or_ebook_using_gitbook]]
[[writing_book_or_ebook_using_pandoc]]</p>
<h2 id="python-script">Python script</h2>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">markdown2</span>
<span class="kn">import</span> <span class="nn">weasyprint</span>
<span class="kn">import</span> <span class="nn">ebooklib</span>
<span class="kn">from</span> <span class="nn">ebooklib</span> <span class="kn">import</span> <span class="n">epub</span>

<span class="c1"># Function to convert markdown to HTML</span>
<span class="k">def</span> <span class="nf">markdown_to_html</span><span class="p">(</span><span class="n">markdown_file</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">markdown_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">markdown_text</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="n">html</span> <span class="o">=</span> <span class="n">markdown2</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span><span class="n">markdown_text</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">html</span>

<span class="c1"># Function to generate TOC</span>
<span class="k">def</span> <span class="nf">generate_toc</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="n">chapters</span><span class="p">):</span>
    <span class="c1"># create the Table of Contents</span>
    <span class="n">toc</span> <span class="o">=</span> <span class="n">ebooklib</span><span class="o">.</span><span class="n">epub</span><span class="o">.</span><span class="n">Link</span><span class="p">(</span><span class="s2">&quot;toc.html&quot;</span><span class="p">,</span> <span class="s2">&quot;Table of Contents&quot;</span><span class="p">,</span> <span class="s2">&quot;toc&quot;</span><span class="p">)</span>
    <span class="n">book</span><span class="o">.</span><span class="n">toc</span> <span class="o">=</span> <span class="p">(</span><span class="n">toc</span><span class="p">,)</span>

    <span class="c1"># create the first chapter</span>
    <span class="n">toc_chapter</span> <span class="o">=</span> <span class="n">epub</span><span class="o">.</span><span class="n">EpubHtml</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Table of Contents&quot;</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;toc.html&quot;</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;en&#39;</span><span class="p">)</span>
    <span class="n">toc_chapter</span><span class="o">.</span><span class="n">content</span><span class="o">=</span> <span class="s1">&#39;&lt;html&gt;&lt;head&gt;&lt;title&gt;Table of Contents&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Table of Contents&lt;/h1&gt;&lt;ul&gt;&#39;</span>

    <span class="k">for</span> <span class="n">chapter</span> <span class="ow">in</span> <span class="n">chapters</span><span class="p">:</span>
        <span class="n">toc_chapter</span><span class="o">.</span><span class="n">content</span> <span class="o">+=</span> <span class="s1">&#39;&lt;li&gt;&lt;a href=&quot;#</span><span class="si">{0}</span><span class="s1">&quot;&gt;</span><span class="si">{1}</span><span class="s1">&lt;/a&gt;&lt;/li&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">chapter</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">chapter</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">toc_chapter</span><span class="o">.</span><span class="n">content</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/ul&gt;&lt;/body&gt;&lt;/html&gt;&#39;</span>
    <span class="n">book</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">toc_chapter</span><span class="p">)</span>

<span class="c1"># Main function to generate ebooks</span>
<span class="k">def</span> <span class="nf">generate_ebooks</span><span class="p">(</span><span class="n">markdown_file</span><span class="p">,</span> <span class="n">cover_image</span><span class="p">):</span>
    <span class="c1"># Convert markdown to HTML</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">markdown_to_html</span><span class="p">(</span><span class="n">markdown_file</span><span class="p">)</span>

    <span class="c1"># Generate ebooks</span>
    <span class="n">chapters</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;chapter-1&quot;</span><span class="p">,</span> <span class="s2">&quot;Chapter 1&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;chapter-2&quot;</span><span class="p">,</span> <span class="s2">&quot;Chapter 2&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;chapter-3&quot;</span><span class="p">,</span> <span class="s2">&quot;Chapter 3&quot;</span><span class="p">)]</span>
    <span class="n">book</span> <span class="o">=</span> <span class="n">epub</span><span class="o">.</span><span class="n">EpubBook</span><span class="p">()</span>

    <span class="c1"># Add metadata</span>
    <span class="n">book</span><span class="o">.</span><span class="n">set_identifier</span><span class="p">(</span><span class="s2">&quot;id123456&quot;</span><span class="p">)</span>
    <span class="n">book</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;My Book&quot;</span><span class="p">)</span>
    <span class="n">book</span><span class="o">.</span><span class="n">set_language</span><span class="p">(</span><span class="s2">&quot;en&quot;</span><span class="p">)</span>
    <span class="n">book</span><span class="o">.</span><span class="n">add_author</span><span class="p">(</span><span class="s2">&quot;Author Name&quot;</span><span class="p">)</span>

    <span class="c1"># Add cover image</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">cover_image</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">cover</span><span class="p">:</span>
        <span class="n">cover_data</span> <span class="o">=</span> <span class="n">cover</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">cover_item</span> <span class="o">=</span> <span class="n">ebooklib</span><span class="o">.</span><span class="n">epub</span><span class="o">.</span><span class="n">EpubItem</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s2">&quot;cover&quot;</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;cover.jpg&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="n">cover_data</span><span class="p">,</span> <span class="n">media_type</span><span class="o">=</span><span class="s2">&quot;image/jpeg&quot;</span><span class="p">)</span>
    <span class="n">book</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">cover_item</span><span class="p">)</span>

    <span class="c1"># Add chapters</span>
    <span class="k">for</span> <span class="n">chapter</span> <span class="ow">in</span> <span class="n">chapters</span><span class="p">:</span>
        <span class="n">chapter_id</span><span class="p">,</span> <span class="n">chapter_title</span> <span class="o">=</span> <span class="n">chapter</span>
        <span class="n">chapter_html</span> <span class="o">=</span> <span class="n">ebooklib</span><span class="o">.</span><span class="n">epub</span><span class="o">.</span><span class="n">EpubHtml</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">chapter_title</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">.html&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">chapter_id</span><span class="p">),</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;en&#39;</span><span class="p">)</span>
        <span class="n">chapter_html</span><span class="o">.</span><span class="n">content</span><span class="o">=</span> <span class="s1">&#39;&lt;html&gt;&lt;head&gt;&lt;title&gt;</span><span class="si">{0}</span><span class="s1">&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;</span><span class="si">{0}</span><span class="s1">&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">chapter_title</span><span class="p">)</span>
        <span class="n">book</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">chapter_html</span><span class="p">)</span>

    <span class="c1"># Generate TOC</span>
    <span class="n">generate_toc</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="n">chapters</span><span class="p">)</span>

    <span class="c1"># Set cover image</span>
    <span class="n">book</span><span class="o">.</span><span class="n">set_cover</span><span class="p">(</span><span class="s2">&quot;cover&quot;</span><span class="p">,</span> <span class="n">cover_item</span><span class="p">)</span>

    <span class="c1"># Generate ePUB file</span>
    <span class="n">epub</span><span class="o">.</span><span class="n">write</span>
    <span class="n">epub</span><span class="o">.</span><span class="n">write_epub</span><span class="p">(</span><span class="s2">&quot;book.epub&quot;</span><span class="p">,</span> <span class="n">book</span><span class="p">,</span> <span class="p">{})</span>

    <span class="c1"># Generate HTML file</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;book.html&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">html_file</span><span class="p">:</span>
        <span class="n">html_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

    <span class="c1"># Generate PDF file</span>
    <span class="n">weasyprint</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="n">html</span><span class="p">)</span><span class="o">.</span><span class="n">write_pdf</span><span class="p">(</span><span class="s2">&quot;book.pdf&quot;</span><span class="p">)</span>

<span class="c1"># Example usage</span>
<span class="n">generate_ebooks</span><span class="p">(</span><span class="s2">&quot;book.md&quot;</span><span class="p">,</span> <span class="s2">&quot;cover.jpg&quot;</span><span class="p">)</span>
</code></pre></div>

<p><strong>Note</strong>: The above code uses the <code>markdown2</code> and <code>weasyprint</code> packages to convert markdown to HTML and PDF respectively, and the <code>ebooklib</code> package to generate ePUB. You may need to install these packages before running the script by running <code>pip install markdown2 weasyprint ebooklib</code>.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://www.ssp.sh/brain/create-a-book-on-markdown/">Create a Book on Markdown</a></li>
</ul>
<p>up::[[MOC_content_creation]]</p>
        </div>


        <div class="article-tags">
            <span class="tags-label">Tags:</span>
                <a href="http://127.0.0.1:8000/tag/markdown/" class="article-tag">markdown</a>
                <a href="http://127.0.0.1:8000/tag/content-creation/" class="article-tag">content-creation</a>
                <a href="http://127.0.0.1:8000/tag/pandoc/" class="article-tag">pandoc</a>
                <a href="http://127.0.0.1:8000/tag/calibre/" class="article-tag">calibre</a>
                <a href="http://127.0.0.1:8000/tag/git/" class="article-tag">git</a>
                <a href="http://127.0.0.1:8000/tag/epub/" class="article-tag">epub</a>
                <a href="http://127.0.0.1:8000/tag/mobi/" class="article-tag">mobi</a>
                <a href="http://127.0.0.1:8000/tag/asciidoctor/" class="article-tag">Asciidoctor</a>
                <a href="http://127.0.0.1:8000/tag/weasyprint/" class="article-tag">weasyprint</a>
        </div>









    </article>

    <footer>
<p>
  &copy; 2026 Krystian Safjan - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/deed.en_US" target="_blank">Creative Commons Attribution-ShareAlike</a>
</p>    </footer>
</main>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Blog",
  "name": "Krystian Safjan's Blog",
  "url": "http://127.0.0.1:8000",
"image": "/images/profile_new.jpg",  "description": ""
}
</script>


<script src="http://127.0.0.1:8000/pagefind/pagefind-ui.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', function() {
        new PagefindUI({
            element: "#search",
            showSubResults: false,
            showImages: false,
            basePath: "http://127.0.0.1:8000/pagefind/"
        });
    });
</script>

<script src="http://127.0.0.1:8000/theme/js/theme-switcher.js"></script>
</body>
</html>